!function(){function sanitizeHtml(html){return html.replace(/<[^>]*>?/gi,sanitizeTag)}function sanitizeTag(tag){return tag.match(basic_tag_whitelist)||tag.match(a_white)||tag.match(img_white)?tag:""}function balanceTags(html){if(""==html)return"";var re=/<\/?\w+[^>]*(\s|$|>)/g,tags=html.toLowerCase().match(re),tagcount=(tags||[]).length;if(0==tagcount)return html;for(var tagname,tag,match,ignoredtags="<p><img><br><li><hr>",tagpaired=[],tagremove=[],needsRemoval=!1,ctag=0;ctag<tagcount;ctag++)if(tagname=tags[ctag].replace(/<\/?(\w+).*/,"$1"),!(tagpaired[ctag]||ignoredtags.search("<"+tagname+">")>-1)){if(tag=tags[ctag],match=-1,!/^<\//.test(tag))for(var ntag=ctag+1;ntag<tagcount;ntag++)if(!tagpaired[ntag]&&tags[ntag]=="</"+tagname+">"){match=ntag;break}-1==match?needsRemoval=tagremove[ctag]=!0:tagpaired[match]=!0}if(!needsRemoval)return html;var ctag=0;return html=html.replace(re,function(match){var res=tagremove[ctag]?"":match;return ctag++,res})}var output,Converter;"object"==typeof exports&&"function"==typeof require?(output=exports,Converter=require("./Markdown.Converter").Converter):(output=window.Markdown,Converter=output.Converter),output.getSanitizingConverter=function(){var converter=new Converter;return converter.hooks.chain("postConversion",sanitizeHtml),converter.hooks.chain("postConversion",balanceTags),converter};var basic_tag_whitelist=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,a_white=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,img_white=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i}();
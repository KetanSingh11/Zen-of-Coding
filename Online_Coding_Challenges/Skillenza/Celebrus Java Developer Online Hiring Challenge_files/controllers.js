function MainCtrl($rootScope,$filter,$scope,$http,$location,$interval,$anchorScroll,$window,$cookies,$cookieStore,$modal,$state,$stateParams,Auth,$httpParamSerializerJQLike,$timeout,snackbar,vsityPlatformServices,mapInputTypeFieldId,getPlatformData,SweetAlert,md5,Socialshare,ENV,ngMeta){function attachSignin(element){auth2.attachClickHandler(element,{},function(googleUser){onSignIn(googleUser)})}function onSignIn(googleUser){googleUser.getBasicProfile();socialInit(googleUser.getAuthResponse().id_token,"google"),$scope.ifUserLogin=!0}function socialInit(access_token,flag){var socialLoginData=JSON.stringify({token:access_token,social_type:flag,device_type:$scope.device_type,device_token:$scope.device_token});if($scope.showloader=!0,$scope.showSignuploader=!0,$scope.hideLoginButton=!0,$state.is("login")||$state.is("signup")){var socialLoginUrl=$scope.baseUrl+"/users/login/social";$http.post(socialLoginUrl,socialLoginData).success(function(response){($scope.signupModalIsOpen||$scope.signinModalIsOpen)&&$scope.cancelModal(),$scope.showloader=!1,$scope.showSignuploader=!1,$scope.hideLoginButton=!1,$scope.authToken=response.data["X-Auth-Token"],$scope.userHandle=response.data.handle,$scope.selfHandle=$scope.userHandle;response.data.extra;$scope.selfId=response.data.id,$scope.is_first_login=response.data.profile_incomplete,angular.forEach(response.data.extra,function(item){1==item.id&&($scope.profileFirstName=item.value),3==item.id&&($scope.lastName=item.value)}),$cookies.put("Authorization",$scope.authToken,{expires:exp}),$cookies.put("isLoggedInUser",!0,{expires:exp}),$cookies.put("cHandle",$scope.userHandle,{expires:exp}),$cookies.put("selfId",$scope.selfId,{expires:exp}),$cookies.put("newUser",$scope.is_first_login,{expires:exp}),$scope.getForm(function(){1==$scope.is_first_login?$state.go("user.update",{},{reload:!0}):$scope.loginReferer()||$state.go("index.home",{},{reload:!0})})})}if(!$state.is("login")&&!$state.is("signup")){if($state.is("index.specChallenge"))var socialLoginUrl=$scope.baseUrl+"/users/login/social",params={r:"activity",rv:$scope.forSignup?$scope.forSignup:$rootScope.rootActId};if($state.is("index.profile"))var socialLoginUrl=$scope.baseUrl+"/users/login/social",params={r:"member",rv:$scope.forSignupMID?$scope.forSignupMID:$rootScope.rootMemId};if($state.is("index.communities"))var socialLoginUrl=$scope.baseUrl+"/users/login/social",params={r:"gang",rv:$scope.forSignupCID?$scope.forSignupCID:$rootScope.rootCommId};if($state.is("enterprise"))var socialLoginUrl=$scope.baseUrl+"/users/login/social",params={r:"community",rv:2};$http.post(socialLoginUrl,socialLoginData,{params:params}).success(function(response){$scope.showloader=!1,$scope.showSignuploader=!1,$scope.hideLoginButton=!1,$scope.authToken=response.data["X-Auth-Token"],$scope.userHandle=response.data.handle,$scope.selfHandle=$scope.userHandle;response.data.extra;$scope.selfId=response.data.id,$scope.is_first_login=response.data.profile_incomplete,angular.forEach(response.data.extra,function(item){1==item.id&&($scope.profileFirstName=item.value),3==item.id&&($scope.lastName=item.value)}),$cookies.put("Authorization",$scope.authToken,{expires:exp}),$cookies.put("isLoggedInUser",!0,{expires:exp}),$cookies.put("cHandle",$scope.userHandle,{expires:exp}),$cookies.put("selfId",$scope.selfId,{expires:exp}),$cookies.put("newUser",$scope.is_first_login,{expires:exp}),$state.is("enterprise")||($scope.signupModalIsOpen||$scope.signinModalIsOpen)&&$scope.cancelModal(),$scope.getForm(function(){1==$scope.is_first_login&&response.data.reference_data?("community"==response.data.reference_data.r&&$cookies.put("entType",response.data.reference_data.rv),"judge"==response.data.reference_data.r&&$cookies.put("entType",response.data.reference_data.r),"activity"==response.data.reference_data.r&&$cookies.put("entType",response.data.reference_data.r),$state.go("user.update",{},{reload:!0})):$state.is("index.specChallenge")?($scope.getReferences(),$state.go("index.specChallenge",{actvSlug:$stateParams.actvSlug},{reload:!0})):$state.is("index.profile")?($scope.getReferences(),$state.go("index.profile",{userH:$stateParams.userH},{reload:!0})):$state.is("index.communities")?($scope.getReferences(),$state.go("index.communities",{handle:$stateParams.handle},{reload:!0})):$state.go("index.home",{},{reload:!0})})})}}function makeParamArrayURL(u,obj){var ret=[];for(key in obj){var value=obj[key];if("string"==typeof value||"number"==typeof value)ret.push(encodeURIComponent(key)+"="+encodeURIComponent(value));else if(Array.isArray(value))for(var x=0;x<value.length;x++)ret.push(encodeURIComponent(key)+"="+encodeURIComponent(value[x]))}return(u+"?"+ret.join("&")).replace(/'/g,"%27").replace(/"/g,"%22")}function ModalInstanceCtrl($scope,$modalInstance){$scope.close=function(){$modalInstance.close(),$scope.getTags($scope.checkForTagId)},$scope.LoginClose=function(){$modalInstance.close()},$scope.checkpointClose=function(){$modalInstance.close()},$scope.checkpointDeny=function(){$modalInstance.close()}}$scope.socketBaseUrl=ENV.socketEndpoint;var my_awesome_script=document.createElement("script"),usersnap_script=document.createElement("script");$scope.objectiveMulitpleSelectedHolder=[],$scope.objectiveSingleSelectedOption=null,$scope.getObjectiveOptionIndex=function(index,type){"multiple"==type?-1==$scope.objectiveMulitpleSelectedHolder.indexOf(index)?$scope.objectiveMulitpleSelectedHolder.push(index):$scope.objectiveMulitpleSelectedHolder.splice($scope.objectiveMulitpleSelectedHolder.indexOf(index),1):$scope.objectiveSingleSelectedOption=index},my_awesome_script.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"),document.head.appendChild(my_awesome_script),$scope.$watch("online",function(newStatus){$rootScope.newStatus=newStatus;var status=!1;!1===$rootScope.newStatus&&(status=!0),status&&($rootScope.showConnectedNow=!0,$timeout(function(){$rootScope.showConnectedNow=!1},3e3))}),$scope.setIbox=function(i){my_new_scope="ibox_auto_class"+i,i>0&&($scope[my_new_scope]="ibox collapsed")},$scope.showhidenew=function(i){my_new_scope="ibox_auto_class"+i,"ibox collapsed"==$scope[my_new_scope]?$scope[my_new_scope]="ibox":$scope[my_new_scope]="ibox collapsed"},$scope.checkdateFromNow=function(dateVal){var currentDate=moment();return moment(dateVal).diff(currentDate,"seconds")},"localhost"!=window.location.hostname&&(usersnap_script.setAttribute("body",function(){var s=document.createElement("script");s.type="text/javascript",s.async=!0,s.src="//api.usersnap.com/load/7cf0fbe0-bd5c-4294-b246-dd8116fa8414.js";var x=document.getElementsByTagName("script")[0];x.parentNode.insertBefore(s,x)}()),document.head.appendChild(usersnap_script),console.log=function(){}),$scope.insertImage=function(callback){return"http://www.discoposse.com/wp-content/uploads/2014/08/test-all-the-things.jpg"},$scope.initialChatboxSize="closed",$scope.chatboxAction=!1,$scope.chatboxTouched=function(){$scope.initialChatboxSize="closed"==$scope.initialChatboxSize?"open":"closed","closed"==$scope.initialChatboxSize&&($scope.chatboxAction=!1)},$scope.baseUrl=ENV.apiEndpoint,$scope.hostUrl=ENV.hostUrl;var date=new Date,d=date.getDate(),m=date.getMonth(),y=date.getFullYear();$scope.userPageIndex=1,$scope.commPageIndex=1,$scope.actPageIndex=1,$scope.gangActPageIndex=1,$scope.timelinePageIndex=1,$scope.leaderboardLoadBusy=!0,$scope.leaderboardScrollFinished=!1,$scope.leaderboardPageIndex=1,$scope.submissionsPageIndex=1,$scope.submissionsScrollFinished=!1,$scope.submissionsLoadBusy=!0,$scope.notificationsPageIndex=1,$scope.communityFollowersPageIndex=1,$scope.gangActScrollFinished=!1,$scope.userScrollFinished=!1,$scope.commScrollFinished=!1,$scope.actScrollFinished=!1,$scope.timelineScrollFinished=!1,$scope.notificationsScrollFinished=!1,$scope.communityFollowersScrollFinished=!1,$scope.aws=0,$scope.git=0,$scope.show_live_act=!0,$scope.show_upcoming_act=!1,$scope.show_expired_act=!1,$scope.commLoadBusy=!0,$scope.communityFollowersLoadBusy=!0,$scope.userLoadBusy=!0,$scope.actLoadBusy=!0,$scope.showloaderGangActsBusy=!0,$scope.timelineLoadBusy=!0,$scope.notificationsLoadBusy=!0,$scope.hasura=0,$scope.flock=0,$scope.chatCount=0,$scope.inputName=null,$scope.inputUsername=null,$scope.inputEmail=null,$scope.signup=null,$scope.inputPassword=null,$scope.message=null,$scope.iamJudge=!1,$scope.usernameRegex="^[a-zA-Z0-9_]{5,20}$",$scope.urlRegex="^([a-z]+:/+)([^/s]*)([a-z0-9-@^=%&;/~+]*)[?]?([^ #]*)#?([^ #]*)$",$scope.gangRegex="^[a-z0-9_-]+$",$scope.got=[],$scope.submission_runs=[],$scope.submission_submits=[],$scope.submissions_index={},$scope.dsSubmissionSet=[],$scope.dssubmissions_index={},$scope.addCheckpointBlock=!1;var prefix=ENV.s3Bucket;prefix=prefix.slice(0,prefix.length-1),$scope.checkpoint_type={0:{name:"Multiple Choice Question",type_id:1},1:{name:"Competitive Programming",type_id:2},2:{name:"Data Science",type_id:3},3:{name:"Manual Evaluation",type_id:4},4:{name:"Unevaluated",type_id:5},5:{name:"Checkin",type_id:6},6:{name:"Team",type_id:7},7:{name:"Blackbox",type_id:8},8:{name:"RSVP",type_id:9}},$scope.resources_featured_challenges=[{title:"PHP Developer Hiring Challenge",community:"by ATC online",secondary_text:"",date:"12th Apr 2018 to 20th May 2018",url:"http://bit.ly/2G24m2x",img:"https://cdn.skillenza.com/files/c01f3271-4fef-4463-92b0-2d546b022e80/php_card_banner.png"}],$scope.resources=[{created_at:"May 9th",items:[{title:"Top JavaScript Frontend Frameworks Comparison in 2018 | FusionCharts",media:"{}",description:"There are haters, and there are advocates of frameworks. Read this comprehensive comparison to determine which side you're on when it comes to the most popular frontend JS frameworks",thumbnailBaseUrl:"https://www.fusioncharts.com/images/coding-guy.png",thumbnailUrl:prefix+"/img/36.png",url:"http://bit.ly/2Iv6RzLâ€‹"},{title:"How To Build Mobile Responsive Dashboard Using Bootstrap",media:"{}",description:"How often do you access the internet when you are traveling, grabbing a quick lunch at your favorite restaurant, or while relaxing after dinner? Quite often, isn't it? And not every time you access the internet, it is on the laptop.",thumbnailBaseUrl:"https://www.fusioncharts.com/blog/wp-content/uploads/2018/01/Twitter-Dashboard.png",thumbnailUrl:prefix+"/img/37.png",sourceName:"Jonathan",sourceUrl:"https://www.fusioncharts.com/blog/author/jonathan/",url:"http://bit.ly/2IwBYec"},{title:"Intro to image classification with KNN - Akash Goswami - Medium",media:"{}",description:"Each point in the KNN 2D space example can be represented as a vector (for now, a list of two numbers). All those vectors stacked vertically will form a matrix representing all the points in the 2D plane.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1200/1*hIBFrnsRnLx-6ik4aRjy_A.png",thumbnailUrl:prefix+"/img/38.png",sourceName:"Akash Goswami",sourceUrl:"https://medium.com/@YearsOfNoLight",url:"http://bit.ly/2IsMNOB"},{title:"A new way of building dynamic visualisations. - Sushrut Shivaswamy - Medium",media:"{}",description:"Now that we know how a webapp works and how charts are usually made we can look for commonalities between the two. Webapps are composed of DOM nodes. Charts are composed of SVG geometries. Webapps can be broken down into reusable sections of DOM that can be modelled as components.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1200/1*pXitH0oMDdrvQRHjFsNM5g.png",thumbnailUrl:prefix+"/img/39.png",sourceName:"Sushrut Shivaswamy",sourceUrl:"https://medium.com/@sushrut.shivaswamy",url:"http://bit.ly/2I8HbcP"},{title:"How does the Blockchain Work? (Part 1) - The Blockchain Review - Medium",media:"{}",description:"Update: April 27, 2018: Looking for a New Cryptocurrency? Check out the Metabase ICO If you really want to get into the blockchain and cryptocurrency world, I would highly recommend that you start your journey by reading these two white papers: Bitcoin: A Peer-to-Peer Electronic Cash System and; Ethereum: A Next-Generation Smart Contract and Decentralized Application Platform and then read them again....and again...",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1200/1*FruX92C_kTF9GZi_gsHANA.jpeg",thumbnailUrl:prefix+"/img/40.jpg",sourceName:"Collin Thompson",sourceUrl:"https://medium.com/@collin_thompson",url:"http://bit.ly/2KRKh2Q"}]},{created_at:"May 2nd",items:[{title:"How the best product engineering teams maximize value",media:"{}",description:"With perfect information, an engineering design process can be pretty straightforward: you can focus on implementing functionality while minimizing engineering complexity and risk. But this gets a lot trickier when there are a lot of product uncertainties. How do you make an engineering plan when you don't know how it will be used or extended?",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1600/1*ZwEOGr8AsjE_2gW-q0LsqA.jpeg",thumbnailUrl:prefix+"/img/41.jpg",sourceName:"Eric Pelz",sourceUrl:"https://hackernoon.com/@esp",url:"http://bit.ly/2I7WfYt"},{title:"The UX of AI",media:"{}",description:"Using Google Clips to understand how a human-centered design process elevates artificial intelligence",thumbnailBaseUrl:"https://storage.googleapis.com/gd-wagtail-prod-assets/original_images/UX_of_AI_inline_008.png",thumbnailUrl:prefix+"/img/42.png",url:"http://bit.ly/2rxyLRT"},{title:"Travelling Salesman Problem Is Not A Problem, It's A Herculean Task.",media:"{}",description:"There is one problem that never goes out of fashion even though people in mathematics have tried to optimize solutions for it over decades. Yes, decades! To nobody's surprise, the Travelling Salesman Problem (read: TSP) remains to be one of the most fascinating and complicated algorithms to innovate upon.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1200/1*U_WGp0CNfDRIWvjJA7vp2A.png",thumbnailUrl:prefix+"/img/43.png",sourceName:"Pranav Divakar",sourceUrl:"https://blog.locus.sh/@pranavdivakar",url:"http://bit.ly/2IqMpjH"},{title:"How To Prioritize Product Feature Development: Create Software, Not Bloatware - Chargebee's SaaS Dispatch",media:"{}",description:'Having received three Michelin stars, and having been regularly voted as the "Best Restaurant in the World" by a panel of around 500 experts, El Bulli in Spain was the frontrunner in the culinary world.',thumbnailBaseUrl:"https://www.chargebee.com/blog/wp-content/uploads/2016/04/sushi-culinary-artisans.gif",thumbnailUrl:prefix+"/img/44.gif",sourceName:"Sadhana Balaji",sourceUrl:"https://www.chargebee.com/blog/author/sadhana/",url:"http://bit.ly/2wA5kUa"},{title:"Essential Cheat Sheets for Machine Learning and Deep Learning Engineers",media:"{}",description:"Learning machine learning and deep learning is difficult for newbies. As well as deep learning libraries are difficult to understand. I am creating a repository on Github(cheatsheets-ai) with cheat...",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/2000/1*gccuMDV8fXjcvz1RSk4kgQ.png",thumbnailUrl:prefix+"/img/45.png",url:"http://bit.ly/2I9zaEM"}]},{created_at:"Apr 25th",items:[{title:"Take on Your Competition with These Lessons from Google Maps",media:"{}",description:"Bret Taylor is no stranger to being the underdog. From a scan of his resume, this may not seem to be true: MS in CS at Stanford; joined Google in 2003 and helped lead the team that co-created Google Maps; co-founded and was CEO of FriendFeed, which was successfully sold to Facebook in 2009; became CTO of Facebook until 2012; and finally co-founded and is currently CEO of startup Quip , which recently raised $30 million from Greylock and Benchmark.",thumbnailBaseUrl:"https://s3.amazonaws.com/marquee-test-akiaisur2rgicbmpehea/a53UPUvVSRCGD83HRZtq_FR_CEO15_0159.jpg",thumbnailUrl:prefix+"/img/46.jpg",url:"http://bit.ly/2KNB5we"},{title:"How to Learn Machine Learning as a Designer - UX Collective",media:"{}",description:"As a designer its crucial to understand the technology you're working with in order to know its limitations and capabilities. Smashing Magazine agrees with me on this. The tricky thing is that most resources for learning new technologies are made by technicians for technicians.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1600/1*anyM1XYVyW4owri8NvOIIQ.png",thumbnailUrl:prefix+"/img/47.png",sourceName:"Florian Oefner",sourceUrl:"https://uxdesign.cc/@florian_oefner",url:"http://bit.ly/2rwN4p6"},{title:"9 Things I Learned Working In Blockchain for 24 months",media:"{}",description:"After you read this you'll know more than the average bear about blockchains. What follows are 9 things I've learned while immersed in blockchain and ledger over the last two years. Consider it a primer for those embarking on blockchain endeavours.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/2000/1*B7YNtYDY-wmIf2ud1_iALw.png",thumbnailUrl:prefix+"/img/48.png",sourceName:"Lee Cocking",sourceUrl:"https://startupsventurecapital.com/@leecocking",url:"http://bit.ly/2rxsPrr"},{title:"The Network Effects Manual: 13 Different Network Effects (andâ€ˆcounting)",media:"{}",description:"The 13 Network Effects & How They Actually Work",thumbnailBaseUrl:"https://daks2k3a4ib2z.cloudfront.net/59fec87058ec9300013fd4f4/5a558408c7613e00012cfef5_NFX%20Map%20-%20Full%20-%20small.jpg",thumbnailUrl:prefix+"/img/49.jpg",url:"http://bit.ly/2KR5LNl"},{title:"The Anatomy of the Perfect Technical Interview from a Former Amazon VP",media:"{}",description:'Neil Roseman is downright tired of hearing Silicon Valley companies say they "hire only the best and the brightest." No matter how many times they say it, most still make decisions based on gut feel, basic credentials, GPAs, ivy league educations, flashy company names - even SAT scores. Roseman objects.',thumbnailBaseUrl:"https://s3.amazonaws.com/marquee-test-akiaisur2rgicbmpehea/YFeSASISEu0T6FKJBicY_HiRes.jpg",thumbnailUrl:prefix+"/img/50.jpg",url:"http://bit.ly/2wtJwd1"}]},{created_at:"Apr 18th",items:[{title:"The effective engineer's handbook",media:"{}",thumbnailUrl:"https://bannerzen.herokuapp.com/api?width=150&height=150&n=4&text=effective&text=engineers&text=handbook",description:"One must have chaos within oneself, to give birth to a dancing star. - Friedrich Nietzsche By now you must have received the official RethinkDB onboarding booklet. It is a document written by lawyers designed to have you meet minimal compliance to minimal standards.",url:"http://bit.ly/2jJZXIW"},{title:"Design Kit: The Human-Centered Design Toolkit",media:"{}",description:"A step-by-step guide to help you tackle challenges like a designer",thumbnailBaseUrl:"https://churchill.imgix.net/images/posts/DesignThinkerCollage.jpg?auto=format&h=512&w=512&q=30",thumbnailUrl:prefix+"/img/51.jpg",url:"http://bit.ly/2K6frSA"},{title:"Machine Learning is Fun! - Adam Geitgey - Medium",media:"{}",description:"Update: This article is part of a series. Check out the full series: Part 1, Part 2, Part 3, Part 4, Part 5, Part 6, Part 7 and Part 8! You can also read this article in æ—¥æœ¬èªž, PortuguÃªs, PortuguÃªs...",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1600/1*YXiclXZdJQVJZ0tQHCv5zw.png",thumbnailUrl:prefix+"/img/52.png",sourceName:"Adam Geitgey",sourceUrl:"https://medium.com/@ageitgey",url:"http://bit.ly/2KOYmy1"},{title:"A Comprehensive Guide to Understand and Implement Text Classification in Python",media:"{}",description:'One of the widely used natural language processing task in different business problems is "Text Classification". The goal of text classification is to automatically classify the text documents into one or more defined categories. Some examples of text classification are: Understanding audience sentiment from social media, Detection of spam and non-spam emails, Auto tagging of customer queries, and Categorization of news articles into defined topics.',thumbnailBaseUrl:"https://s3-ap-south-1.amazonaws.com/av-blog-media/wp-content/uploads/2018/04/Untitled-Diagram.png",thumbnailUrl:prefix+"/img/53.png",sourceName:"Shivam Bansal",sourceUrl:"https://www.analyticsvidhya.com/blog/author/shivam5992/",url:"http://bit.ly/2rzuInh"},{title:"Ranking Programming Languages by GitHub Users",media:"{}",description:"I've recently become obsessed with the sheer amount of development activity happening on sites like GitHub. As a first project on working with this data, I thought it would be fun to rank all the programming languages by counting how many people on GitHub use each language.",sourceName:"Ben Frederickson",thumbnailUrl:"https://bannerzen.herokuapp.com/api?width=150&height=150&n=4&text=Programming&text=Languages&text=GitHub",sourceUrl:"null",url:"http://bit.ly/2jNyAOk"}]},{created_at:"Apr 11th",items:[{title:"The resume of the future will tell employers who you are, and not just what you've done",media:"{}",description:'"No one says \'Maintain power control packages\' except those who wrote the institution\'s official discourse and those who seek to identify with the institution in order to gain employment," Faigley writes. The language of the resume establishes and enforces the power relationship between the candidate and their would-be employer, he says, as "an initial gesture of subservience, like a dog presenting its neck."',thumbnailBaseUrl:"https://qz.com/wp-content/uploads/2018/03/resumes.jpg?quality=75&strip=all&w=1400",thumbnailUrl:prefix+"/img/54.jpg",url:"http://bit.ly/2Iqxy8T"},{title:"What I Learned from Quip on How to Build a Product on 8 Different Platforms with Only 13 Engineers",media:"{}",description:"How do you build a great product that impacts the lives of millions of people with just a small engineering team? That's a question I've often thought long and hard about during my years at Quora a...",thumbnailBaseUrl:"https://d3oj8nq9p0q26f.cloudfront.net/blog/assets/images/posts/puzzle-56e738652e7ebd1822303bcc1d7ec6733ba8f9326d3e77477895aaea6b7633e9.jpg",thumbnailUrl:prefix+"/img/55.jpg",sourceName:"Edmond Lau",sourceUrl:"null",url:"http://bit.ly/2K6wAMb"},{title:"The Blockchain Economy: A beginner's guide to institutional cryptoeconomics",media:"{}",description:"The blockchain is a digital, decentralised, distributed ledger. Most explanations for the importance of the blockchain start with Bitcoin and the history of money. But money is just the first use case of the blockchain. And it is unlikely to be the most important.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1600/0*o7jSV4im3ZVc0LcD.",thumbnailUrl:prefix+"/img/56.png",sourceName:"Cryptoeconomics",sourceUrl:"https://medium.com/@cryptoeconomics",url:"http://bit.ly/2rx02DZ"},{title:"Linear Algebra for Deep Learning - Towards Data Science",media:"{}",description:"The Math behind every deep learning program. Deep Learning is a subdomain of machine learning, concerned with the algorithm which imitates the function and structure of the brain called the artificial neural network. Linear algebra is a form of continuous rather than discrete mathematics, many computer scientists have little experience with it.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/2000/1*oOS8U37MHmJ7Vl8nqnepiA.jpeg",thumbnailUrl:prefix+"/img/57.jpg",sourceName:"Vihar Kurama",sourceUrl:"https://towardsdatascience.com/@vihar.kurama",url:"http://bit.ly/2G3Wg9F"},{title:"Python is the Perfect Tool for any Problem - Towards Data Science",media:"{}",description:"Reflecting on my first Python program Reflection is always a helpful (and sometimes entertaining ) exercise. For nostalgia's sakeâ€Š-â€Šif one can be nostalgic for something 2 years old- I wanted to share my first Python program. I initially picked up Python as an aerospace engineering student to avoid spreadsheets and little did I know how good a decision this would turn out to be.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1600/0*UiI1SaCbMvovF2wh.",thumbnailUrl:prefix+"/img/58.jpg",sourceName:"William Koehrsen",sourceUrl:"https://towardsdatascience.com/@williamkoehrsen",url:"http://bit.ly/2G3iGId"}]},{created_at:"4-Apr-2018",items:[{title:"10 Machine Learning Algorithms You Should Know to Become a Data Scientist - DZone AI",media:"{}",description:'Machine learning practitioners have different personalities. While some of them are "I am an expert in X and X can train on any type of data," where X = some algorithm, others are "right tool for the right job" people.',thumbnailBaseUrl:"http://dz2cdn2.dzone.com/storage/article-thumb/8633821-thumb.jpg",thumbnailUrl:prefix+"/img/31.jpg",sourceName:"Shashank Gupta",sourceUrl:"https://dzone.com/users/3130803/shanky238.html",url:"http://bit.ly/2H7oW3P"},{title:"A Complete Tutorial on Tree Based Modeling from Scratch (in R & Python)",media:"{}",description:"Introduction Tree based learning algorithms are considered to be one of the best and mostly used supervised learning methods. Tree based methods empower predictive models with high accuracy, stability and ease of interpretation. Unlike linear models, they map non-linear relationships quite well. They are adaptable at solving any kind of problem at hand (classification or regression).",thumbnailBaseUrl:"https://www.analyticsvidhya.com/wp-content/uploads/2016/04/otree.jpg",thumbnailUrl:prefix+"/img/32.jpg",sourceName:"Analytics Vidhya Content Team",sourceUrl:"https://www.analyticsvidhya.com/blog/author/avcontentteam/",url:"http://bit.ly/2GSgo3e"},{title:"Understanding Microservices: From Idea To Starting Line",media:"{}",description:'Microservices is an architecture in which different component pieces of a software design are created and housed as individual, isolated services. Each is deployed separately and they communicate through well-defined network-based interfaces. Microservices are intended to be "small" (loosely defined) and kept to a single bounded context. There are many benefits to microservices.',thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/2000/1*SlOGiH26JSP3h6uijnAi3A.jpeg",thumbnailUrl:prefix+"/img/33.jpg",sourceName:"Michael Douglass",sourceUrl:"https://medium.freecodecamp.org/@mikedoug",url:"http://bit.ly/2GwnFq7"},{title:"The Best Tools for Smart Contract Development - Blockgeeks",media:"{}",description:"This is a guest post by KC TAM on Using Various Tools for Smart Contract Development: Remix, Web3 on TestRPC. I recently read a good article on Blockgeeks, in which Ameer is trying to put everything about coding Decentralized Applications into one masterpiece. What a very ambitious and great work it is!",thumbnailBaseUrl:"https://blockgeeks.com/wp-content/uploads/2018/02/image2-3.png",thumbnailUrl:prefix+"/img/34.png",sourceName:"Austrian Q @ajian",sourceUrl:"https://blockgeeks.com/author/ajian",url:"http://bit.ly/2JeNTei"},{title:"33 Questions Smart Product Managers Ask in Job Interviews | Aha! Blog",media:"{}",description:'"Do you validate parking?" I had asked a job candidate at a previous company if they had any questions for me. And this was the sole question from the product manager I was interviewing. Flabbergasting. Product managers are supposed to be curious and inquisitive.',thumbnailBaseUrl:"https://s3-us-west-1.amazonaws.com/k1w1-aha-blog/uploads-v2/2018/03/product-manager-interview-questions.jpg",thumbnailUrl:prefix+"/img/35.jpg",url:"http://bit.ly/2GAhhde"}]},{created_at:"28-Mar-2018",items:[{title:"This 90-Day Plan Turns Engineers into Remarkable Managers",media:"{}",description:"There's an all-too-common cycle in tech these days. Startup avoids management. Founder makes all the decisions. Startup gets traction. Hiring takes off. Management is suddenly needed. Founder turns to his best engineer: \"I'm drowning. Can you manage this team for me?\"",thumbnailBaseUrl:"https://s3.amazonaws.com/marquee-test-akiaisur2rgicbmpehea/tr7oJoMNQtOjrnJAlKFw_red%20calendar%20.jpg",thumbnailUrl:prefix+"/img/26.jpg",url:"http://bit.ly/2E0okd5"},{title:"The Ultimate Guide to Kicking Ass on Take-home Coding Challenges",media:"{}",description:"1. Why take-home coding challenges are better than the alternatives, and you should love them 2. The drawbacks of take-home coding challenges 3. The basic types of take-home coding challenges 4. Mistakes to avoid making when given a take-home coding challenge 5. Get organized: how to plan before you write a line of code 6.",thumbnailBaseUrl:"https://www.fullstackinterviewing.com/assets/img/whiteboard-drawing.jpg",thumbnailUrl:prefix+"/img/27.jpg",sourceName:"janephilipps",sourceUrl:"",url:"http://bit.ly/2pHwB1q"},{title:"How Blockchain Applications Will Move Beyond Finance",media:"{}",description:"To understand the transformation that's being brought about by blockchain technology, it's useful to start with its largest implementation to date: bitcoin. In the fall of 2014 my colleague Catherine Tucker and I conducted a large-scale experiment at MIT, in which 4,494 undergraduate students were offered access to bitcoin.",thumbnailBaseUrl:"https://hbr.org/resources/images/article_assets/2017/03/mar17-02-blockchain-finance.jpg",thumbnailUrl:prefix+"/img/28.jpg",url:"http://bit.ly/2pK1EcF"},{title:"Top 20 Data Science Blogs And Websites For Data Scientists",media:"{}",description:"The field of Data Science is constantly growing, enabling businesses to become more data-driven with better insights and knowledge. Whether you're a professional working in the field of data science or a student, take a look at these Top 20 Data Science Blogs that are frequently updated and with the highest number of followers.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1600/0*AV7o53oKnwtuI3EY.png",thumbnailUrl:prefix+"/img/29.png",sourceName:"Exastax",sourceUrl:"https://medium.com/@exastax",url:"http://bit.ly/2Gbo1C6"},{title:"The Mistakes I Made As a Beginner Programmer - Samer Buna - Medium",media:"{}",description:"Learn to identify them, make habits to avoid them Let me make one thing clear first. If you are a beginner programmer, this article is not meant to make you feel bad about the mistakes that you might be making but rather to make you aware of them, teach you to spot signs of them, and remind you to avoid them.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/2000/1*aPoiIzO6HE4uwMBLXgkB6A.png",thumbnailUrl:prefix+"/img/30.png",sourceName:"Samer Buna",sourceUrl:"https://medium.com/@samerbuna",url:"http://bit.ly/2usU4YL"}]},{created_at:"21-Mar-2018",items:[{title:"How to Crush the Crypto Market, Quit Your Job, Move to Paradise and Do Whatever You Want the Rest...",media:"{}",description:"Do you like making money at the push of a button? How about working from home in your underwear? Do you hate corporate meetings worse than the plague? Would you rather be traveling the world, having adventures and sleeping on a beach in Thailand than grinding your life away in an office for fifty years?",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1200/1*o1E3zQ79fKShSIyZA6fy5Q.jpeg",thumbnailUrl:prefix+"/img/21.jpg",sourceName:"Daniel Jeffries",sourceUrl:"https://hackernoon.com/@dan.jeffries",url:"http://bit.ly/2GQpniN"},{title:"How I Coded Everyday for 365 Days - Hacker Noon",media:"{}",description:'Approximately 365 days ago, I sat around thinking, "How can I get better at programming? How can I learn more? How do I learn?" Growing up in the heart of Silicon Valley, I saw people who were building mind-blowing projects, and I wanted to be able to do that too.',thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/2000/1*hqdgM516v_m6sbGVMh8ZIA.jpeg",thumbnailUrl:prefix+"/img/22.jpg",sourceName:"Emily Yu",sourceUrl:"https://hackernoon.com/@emilyyu_17465",url:"http://bit.ly/2GRdZ6q"},{title:"6 Questions to Ask If You Want to Grow Into a Leadership Role | Aha! Blog",media:"{}",description:"Difficult work is often the most rewarding. This is especially true for those in leadership roles. I am incredibly proud of our software and the high-growth business we built at Aha! - but I am even more proud of the leaders we have helped grow.",thumbnailBaseUrl:"https://s3-us-west-1.amazonaws.com/k1w1-aha-blog/uploads-v2/2018/02/grow-into-leader.jpg",
thumbnailUrl:prefix+"/img/23.jpg",url:"http://bit.ly/2HWHLpo"},{title:"Immersive design: the next 10 years of interfaces - UX Collective",media:"{}",description:"Like many designers, I started my career as a Graphic Designer. I dealt in picas, carried Pantone books, and swore to measure twice and cut once. Then the web came along and with it came Web Designers. We had to become acquainted with HTML, CSS, Javascript and we're still trying to keep up with the right way to build for it.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/2000/1*vPtldCObyR0I4KkFrrtMqw.jpeg",thumbnailUrl:prefix+"/img/24.jpg",sourceName:"Gabriel Valdivia",sourceUrl:"https://uxdesign.cc/@gabrielvaldivia",url:"http://bit.ly/2DMg28s"},{title:"Learn Blockchains by Building One - Hacker Noon",media:"{}",description:"We're going to use the Python Flask Framework. It's a micro-framework and it makes it easy to map endpoints to Python functions. This allows us talk to our blockchain over the web using HTTP requests. We'll create three methods: /transactions/new to create a new transaction to a block /mine to tell our server to mine a new block.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1200/1*zutLn_-fZZhy7Ari-x-JWQ.jpeg",thumbnailUrl:prefix+"/img/25.jpg",sourceName:"Daniel van Flymen",sourceUrl:"https://hackernoon.com/@vanflymen",url:"http://bit.ly/2u9wIY5"}]},{created_at:"14-Mar-2018",items:[{title:"Tailoring Your Design Concept to the Right Audience",media:"{}",description:"Few occasions during the ideation phase will ever be as anticipated and well-attended as the unveiling of a new design concept. It's like your own Apple Keynote - there you are sporting New Balance shoes and a black turtleneck. When done right, concept designs are a glimpse into the future of your product.",thumbnailBaseUrl:"https://s3.amazonaws.com/marquee-test-akiaisur2rgicbmpehea/uoiYlxUFTEC5FKU76U29_Design-concept-headerArtboard%201.png",thumbnailUrl:prefix+"/img/16.png",url:"http://bit.ly/tailoring_design_concept"},{title:"Premortem: Prevent Failures by Recognizing Patterns | Taylor Smith",media:"{}",description:'When kicking off your next big project, add a "pre-mortem" to the agenda to encourage team members/stakeholders to learn from past challenges and recognize problems before they derail the project.',thumbnailBaseUrl:"https://www.tsmithcreative.com/assets/thumbnail/premortem.jpg",thumbnailUrl:prefix+"/img/17.jpg",url:"http://bit.ly/premortem_prevent_failures"},{title:"The two laws of building products - The Startup - Medium",media:"{}",description:"If you can't sell it, don't build it If you can't build it, don't sell it The single necessary and sufficient condition for a business, says MIT's Bill Aulet, is a paying customer.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1600/0*bWx5HBoBINu8gHZh.",thumbnailUrl:prefix+"/img/18.png",sourceName:"Mark Ridley",sourceUrl:"https://medium.com/@Mark_Ridley",url:"http://bit.ly/2_laws_of_building_product"},{title:"The Joel Test: 12 Steps to Better Code",media:"{}",description:"Have you ever heard of SEMA? It's a fairly esoteric system for measuring how good a software team is. No, wait! Don't follow that link! It will take you about six years just to understand that stuff. So I've come up with my own, highly irresponsible, sloppy test to rate the quality of a software...",thumbnailBaseUrl:"https://i0.wp.com/www.joelonsoftware.com/wp-content/uploads/2016/12/11969842.jpg?fit=400%2C400&ssl=1",thumbnailUrl:prefix+"/img/19.jpg",sourceName:"Joel Spolsky",sourceUrl:"https://www.joelonsoftware.com/author/joelonsoftware/",url:"http://bit.ly/12_steps_2_better_code"},{title:"The Business of Artificial Intelligence",media:"{}",description:"For more than 250 years the fundamental drivers of economic growth have been technological innovations. The most important of these are what economists call general-purpose technologies - a category that includes the steam engine, electricity, and the internal combustion engine. Each one catalyzed waves of complementary innovations and opportunities.",thumbnailBaseUrl:"https://hbr.org/resources/images/article_assets/2017/07/AI-hero-premium.jpg",thumbnailUrl:prefix+"/img/20.jpg",url:"http://bit.ly/business_of_AI"}]},{created_at:"7-Mar-2018",items:[{title:"An Ode to Experimental Design - Signal v. Noise",media:"{}",description:"After running tests for a while, you'll find yourself throwing away mountains of design work for just a handful of meaningful improvements. Do that enough, and you'll notice something: Maybe design isn't such a special endeavor after all! The truth is...a lot of design is ephemeral, malleable, disposable... garbage.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1200/1*Lij75ocQNTo4OkQ8SIahdw.png",thumbnailUrl:prefix+"/img/11.png",sourceName:"Jonas Downey",sourceUrl:"https://m.signalvnoise.com/@jonasdowney",url:"http://bit.ly/experiment_design"},{title:"The Art of the Lazy Product Manager - The Startup - Medium",media:"{}",description:"Gillian is the first product manager at a fifteen-person startup that just raised a $5M Series A round. Having spent years in the startup trenches, she's technically competent, meticulous, and a great communicator. She's a Type A product manager, and she's up for a challenge. She needs to be.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1200/0*ovh7usZBOsVieV_K.",thumbnailUrl:prefix+"/img/12.png",sourceName:"Parul Singh",sourceUrl:"https://medium.com/@parulia",url:"http://bit.ly/the_are_lazy_product_manager"},{title:"Which machine learning algorithm should I use?",media:"{}",description:'This resource is designed primarily for beginner to intermediate data scientists or analysts who are interested in identifying and applying machine learning algorithms to address the problems of their interest. A typical question asked by a beginner, when facing a wide variety of machine learning algorithms, is "which algorithm should',thumbnailBaseUrl:"https://blogs.sas.com/content/subconsciousmusings/files/2017/04/machine-learning-cheet-sheet.png",thumbnailUrl:prefix+"/img/13.png",sourceName:"Hui Li",sourceUrl:"https://blogs.sas.com/content/author/huili/",url:"http://bit.ly/machine_learning_algorithm"},{title:"What's Next for Nest at Google?",media:"{}",description:"In the tech industry, the dog eat dog world is not always a bad thing. Companies acquire other companies as a natural way for both to grow. But for smart home hardware company Nest, acquisitions have been challenging. Both of the acquisitions they took part in-when Google acquired them, and when they subsequently acquired Dropcam-were ...",thumbnailBaseUrl:"https://producthabits.com/wp-content/uploads/2018/02/Screen-Shot-2018-01-26-at-3.25.55-PM.png",thumbnailUrl:prefix+"/img/14.png",url:"http://bit.ly/nest_for_google"},{title:"Why Decentralization Matters - Chris Dixon - Medium",media:"{}",description:"The first two eras of the internet During the first era of the internetâ€Š-â€Šfrom the 1980s through the early 2000sâ€Š-â€Šinternet services were built on open protocols that were controlled by the internet community. This meant that people or organizations could grow their internet presence knowing the rules of the game wouldn't change later on.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1600/0*7lrwGIDbAYk6q7zG.",thumbnailUrl:prefix+"/img/15.png",sourceName:"Chris Dixon",sourceUrl:"https://medium.com/@cdixon",url:"http://bit.ly/decentralization_matters"}]},{created_at:"28-Feb-2018",items:[{title:"Designing smart notifications - Intercom - Medium",media:"{}",description:'My phone buzzed. I was somewhere in Iceland. More than ten miles from my car and any other human being. Holding a phone with a dying battery. I turned it on to check Google Maps. "Spotify added 2 tracks to the playlist Afternoon Acoustic". Perfect timing.',thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/2000/1*Ny3jGYYkxZZfhOR9QlYpWg.png",thumbnailUrl:prefix+"/img/beat_8.png",sourceName:"Intercom",sourceUrl:"https://medium.com/@intercom",url:"http://bit.ly/2oezaqM"},{title:"An Exclusive Look at How AI and Machine Learning Work at Apple",media:"{}",description:"An exclusive inside look at how artificial intelligence and machine learning work at Apple. On July 30, 2014, Siri had a brain transplant. Three years earlier, Apple had been the first major tech company to integrate a smart assistant into its operating system.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/2000/1*ilv-vqqxBBSrTJe6fBEM1w.png",thumbnailUrl:prefix+"/img/beat_7.png",sourceName:"Steven Levy",sourceUrl:"https://medium.com/@stevenlevy",url:"http://bit.ly/2C8Otd4"},{title:"Ethereum scalability research and development subsidy programs - Ethereum Blog",media:"{}",description:"The Ethereum community, key developers and researchers and others have always recognized scalability as perhaps the single most important key technical challenge that needs to be solved in order for blockchain applications to reach mass adoption. Blockchain scalability is difficult primarily because a typical blockchain design requires every node in the network to process every ...",thumbnailBaseUrl:"https://secure.gravatar.com/avatar/0c2adc17a0896fef419d5a4a7cb15b7c?s=96",thumbnailUrl:prefix+"/img/beat_6.jpg",sourceUrl:"https://blog.ethereum.org",url:"http://bit.ly/2EUzdBE"},{title:"The Challenges of Building Ethereum Infrastructure - Jameson Lopp - Medium",media:"{}",description:"Several of our engineers, myself included, have spent a substantial portion of the past year working on building low level Ethereum infrastructure at BitGo. We've encountered a plethora of challenges along the way; in this post we'll cover some of the more interesting ones.",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/2000/1*mqwF8F5iYPNgHdba4Bs8bw.png",thumbnailUrl:prefix+"/img/beat_9.png",sourceName:"Jameson Lopp",sourceUrl:"https://medium.com/@lopp",url:"http://bit.ly/2sGCsrE"},{title:"Machine Learning is Fun! - Adam Geitgey - Medium",media:"{}",description:"Update: This article is part of a series. Check out the full series: Part 1, Part 2, Part 3, Part 4, Part 5, Part 6, Part 7 and Part 8! You can also read this article in æ—¥æœ¬èªž, PortuguÃªs, PortuguÃªs...",thumbnailBaseUrl:"https://cdn-images-1.medium.com/max/1200/1*YXiclXZdJQVJZ0tQHCv5zw.png",thumbnailUrl:prefix+"/img/beat_10.png",sourceName:"Adam Geitgey",sourceUrl:"https://medium.com/@ageitgey",url:"http://bit.ly/2sFDO5R"}]},{created_at:"21-Feb-2018",items:[{title:"Learning Machine Learning and NLP from 187 Quora Questions",description:"Robbie Allen shares how was able to learn ML and NLP using 187 Quora questions. A great read for anyone who wants to learn and grow...",url:"http://bit.ly/2BF4bMb",sourceUrl:"unsupervisedmethods.com",tags:[],thumbnailUrl:prefix+"/img/beat_2.jpg"},{title:"Making Sense of Ethereumâ€™s Layer 2 Scaling Solutions",description:"State Channels, Plasma, and Truebit, A perfect read for anyone who wants to understand what are scaling problems today in Ethereum and how Layer 2 Scaling Solutions like State Channels, Plasma, and Truebit plan to solve it.",url:"http://bit.ly/2EERDmB",sourceUrl:"medium.com",tags:[],thumbnailUrl:prefix+"/img/beat_3.jpg"},{title:"DAppChains",description:"Scaling Ethereum DApps Through Sidechains, Today's Dapps are not scalable and if want to build decentralized products that even close to Twitter, Facebook or Medium we have to think outside the box...",url:"http://bit.ly/2CyMdrj",sourceUrl:"medium.com",tags:[],thumbnailUrl:prefix+"/img/beat_4.png"},{title:"Infrastructure Matters",description:"2018 will be the year when we will see maximum innovations on Blockchain Infrastructure products. So if you are thinking of building something :) this article might give you a few ideas",url:"http://bit.ly/2BEaAXY",sourceUrl:"medium.com",tags:[],thumbnailUrl:prefix+"/img/beat_5.png"},{title:"My Curated List of AI and Machine Learning Resources from Around the Web",description:" Robbie Allen's 10 year research in to AI and ML all summed in one article. Gold #Readworthy",url:"http://bit.ly/2GsyvZv",sourceUrl:"unsupervisedmethods.com",tags:[],thumbnailUrl:prefix+"/img/beat_1.png"}]}],$scope.resourceLink=function(url){window.open(url,"_BLANK")},$scope.getallLanguages=function(){var getLangUrl=$scope.baseUrl+"/languages",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getLangUrl,{headers:headers}).success(function(response){$scope.allLanguages=response.data})},$scope.resetResume=function(){$scope.isInvalid=!1,$scope.resume_url="",$scope.secFormUser.resumeUpload.$valid=!1},$scope.getSocialHandle=function(url){if(url){var result=url.split("/");return""!=result[result.length-1]?result[result.length-1]:result[result.length-2]}},$scope.to_array=function(obj){var arr=[];for(var key in obj)obj.hasOwnProperty(key)&&(arr[key]=obj[key]);return arr},$scope.problemSectionVisibilityObj={nav:!1,sidebar:!0},$scope.showallQuestions=function(){0==$scope.problemSectionVisibilityObj.nav?$scope.problemSectionVisibilityObj.nav=!0:$scope.problemSectionVisibilityObj.nav=!1},$scope.aceFontSize=15,$scope.changeFontSizeAce=function(action){var top_limit=65,change=5,lower_limit=15;"plus"==action&&$scope.aceFontSize<=top_limit&&($scope.aceFontSize+=change,($scope.aceFontSize==top_limit||$scope.aceFontSize>top_limit)&&($scope.aceFontSize=top_limit)),"minus"==action&&$scope.aceFontSize>=lower_limit&&($scope.aceFontSize-=change,($scope.aceFontSize==lower_limit||$scope.aceFontSize<lower_limit)&&($scope.aceFontSize=lower_limit)),"reset"==action&&($scope.aceFontSize=15)};var now=new $window.Date,exp=new $window.Date(now.getFullYear(),now.getMonth()+6,now.getDate());if($scope.authoriztionToken=$cookies.get("Authorization"),$scope.userHandle=$cookies.get("cHandle"),$scope.entType=$cookies.get("entType"),$scope.selfId=$cookies.get("selfId"),$rootScope.profilePicture=$cookies.get("profilePicture"),$scope.userHandle)var md5String=md5.createHash($scope.userHandle);$scope.defaultUserImg="https://www.gravatar.com/avatar/"+md5String+"?s=150?&d=identicon",$scope.pictureNotUploaded="http://i.imgur.com/K9Vs8RQ.png",$scope.isDisabled=!1,$scope.selectedTags=null,$scope.selectedExpTags=null,$scope.tags=null,$scope.selectedCommunities=null,$scope.selectedCommunityData=null,$scope.selectedCommunityDataHandle=null,$scope.selectedExpTags={};$scope.selectedGender=null,$scope.global=null,$scope.skillsInterested=[],$scope.skillsExperienced=[],$scope.skillsInts=null,$scope.actvID=null,$scope.postEdit=!0,$scope.checkpointIds=null,$scope.hideAnchorTag=!1,$scope.chatIndex={},$scope.checktab=null,$scope.keys=Object.keys,$scope.emailVerificationLoading=!0,$scope.fullTagsData={},$scope.device_type="web",$scope.device_token="111111",$scope.activityTitleLimit=15,$scope.activityTitleTablist=23,$scope.activityTitleSignuplist=18,$scope.publicActDescLimit=70,$scope.secondaryResumeUrl=15,$scope.discussionData=[],$scope.discussionTree=[],$rootScope.pageTitle="Skillenza",$scope.sortableOptions={connectWith:".connectList"},$scope.signupModal=function(actId,memId,comID){$scope.forSignup=actId,$scope.forSignupMID=memId,$scope.forSignupCID=comID,$scope.signupModalIsOpen=!0,$scope.$modalInstance=$modal.open({templateUrl:"views/signup-modal.ba932caa.html",controller:function($scope,$modalInstance){$scope.signupModalDeny=function(){$modalInstance.dismiss("cancel")},$scope.modalSwitch=function(type){"signup"==type?($scope.signupModalDeny(),$scope.loginModal()):($scope.signinModalDeny(),$scope.signupModal())}},windowClass:"animated fadeIn",scope:$scope})},$scope.loginModal=function(actid){$scope.signinModalIsOpen=!0,$scope.$modalInstance=$modal.open({templateUrl:"views/signin-modal.070d53d4.html",controller:function($scope,$modalInstance){$scope.signinModalDeny=function(){$modalInstance.dismiss("cancel")},$scope.modalSwitch=function(type){"signup"==type?($scope.signupModalDeny(),$scope.loginModal()):($scope.signinModalDeny(),$scope.signupModal())}},windowClass:"animated fadeIn",scope:$scope})},$scope.modalHalt=function(){$(".modal").hide()},$scope.isUrlValid=function(userInput){return!!new RegExp("^(https?://)?(www\\.)?([-a-z0-9]{1,63}\\.)*?[a-z0-9][-a-z0-9]{0,61}[a-z0-9]\\.[a-z]{2,6}(/[-\\w@\\+\\.~#\\?&/=%]*)?$","i").test(userInput)},$scope.usernameCheck=function(username,from){var usernameCheckUrl=$scope.baseUrl+"/users/availability",myHandle=$cookies.get("cHandle");if($scope.loggedIn=$cookies.get("isLoggedInUser"),$scope.loggedIn)var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};else var headers={};var params={handle:username};$http.get(usernameCheckUrl,{headers:headers,params:params}).success(function(response){$scope.usernameAvailable="Username Available",$scope.usernameNotAvailable="",$scope.usernameIsAvailable=!0,"signup"!=from||$scope.emailIsAvailable&&$scope.usernameIsAvailable||($scope.signupForm.$valid=!1)}).error(function(response){username!=myHandle?($scope.usernameNotAvailable=response.errors,$scope.usernameIsAvailable=!1):$scope.usernameIsAvailable=!0,$scope.usernameAvailable="","activity"!=from||$scope.usernameIsAvailable||($scope.primaryActform.$valid=!1),2!=from||$scope.usernameIsAvailable||($scope.primaryEntform.$valid=!1),"judge"!=from||$scope.usernameIsAvailable||($scope.primaryJudgeform.$valid=!1),"none"!=from||$scope.usernameIsAvailable||($scope.primaryUserform.$valid=!1),"signup"!=from||$scope.usernameIsAvailable||($scope.signupForm.$valid=!1),"modal"!=from||$scope.usernameIsAvailable||($scope.signupForm.$valid=!1),"enterprise"!=from||$scope.usernameIsAvailable||($scope.signupForm.$valid=!1)})},$scope.emailCheck=function(email,from){var emailCheckUrl=$scope.baseUrl+"/users/availability",authToken=$cookies.get("Authorization"),validEmail=$scope.isValidEmail(email),headers={Authorization:authToken},params={email:email};validEmail&&$http.get(emailCheckUrl,{headers:headers,params:params}).success(function(response){$scope.emailNotAvailable="",$scope.emailIsAvailable=!0,"signup"!=from||$scope.emailIsAvailable&&$scope.usernameIsAvailable||($scope.signupForm.$valid=!1)}).error(function(response){$scope.emailNotAvailable=response.message,$scope.emailIsAvailable=!1,"signup"!=from||$scope.emailIsAvailable&&$scope.usernameIsAvailable||($scope.signupForm.$valid=!1)})},$scope.interacted=function(field){return field.$dirty},$scope.loggedIn=$cookies.get("isLoggedInUser"),$scope.loggedIn||($rootScope.pageTitle="Skillenza"),$scope.getReferences=function(flag){var referUrl=$scope.baseUrl+"/users/reference",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(referUrl,{headers:headers}).success(function(response){response.data.followed_member&&(1==flag&&$state.go("index.profile",{userH:response.data.followed_member},{reload:!0}),snackbar.create(response.message,5e3)),response.data.followed_gang&&(1==flag&&$state.go("index.communities",{handle:response.data.followed_gang},{reload:!0}),snackbar.create(response.message,5e3)),"judge"==response.data.reference&&(1==flag&&$state.go("index.specChallenge",{actvSlug:response.data.activity_slug},{reload:!0}),snackbar.create(response.message,5e3)),response.data.gang_type&&($scope.entType=response.data.gang_type,$cookies.put("entType",$scope.entType),1==flag&&$state.go("user.secondary",{typeId:$scope.entType},{reload:!0})),"activity"==$scope.entType&&($scope.secondaryFormItems=[],1==flag&&response.data.activity_data&&$timeout(function(){$state.go("index.specChallenge",{actvSlug:response.data.activity_data.slug},{reload:!0})},2e3),angular.forEach(response.data,function(data){$scope.secondaryFormActId=data.activity_id,2!=data.type&&3!=data.type||$scope.secondaryFormItems.push(data)}),$scope.secondaryFormFilterFieldIds=$scope.secondaryFormItems.map(function(u){var result={};u.member_detail_field_id;return 15==u.member_detail_field_id||24==u.member_detail_field_id||30==u.member_detail_field_id?(result.id=u.member_detail_field_id,result.value=JSON.parse(u.value)):(result.id=u.member_detail_field_id,result.value=u.value),result}),1!=flag||response.data.activity_data||$state.go("user.secondary",{typeId:$scope.entType},{reload:!0})),$scope.primaryFormLoader=!1}).error(function(response){409==response.status?(response.data.followed_member&&$state.go("index.profile",{userH:response.data.followed_member},{reload:!0}),response.data.followed_gang&&$state.go("index.communities",{handle:response.data.followed_gang},{reload:!0})):$state.go("index.home")})},$scope.submitFormSecondary=function(actId){$scope.showSecondaryFormLoarder=!0,$scope.viaRefActivityId=actId,$scope.submitForm()},$scope.passwordMatch=function(p,cp){p!=cp?($scope.password_error="Passwords do not match",$scope.setNewForm.$invalid=!0):($scope.password_error=null,$scope.setNewForm.$invalid=!1)},$scope.toGetActId=function(actId){$scope.viaRefActivityId=actId},$scope.savedSkillsData=[],$stateParams&&($scope.activity_id=$state.params.activity_id),$scope.open=function(){$modal.open({templateUrl:"views/aws_modal.05962ffa.html",controller:MainCtrl})},function(d){var js,id="facebook-jssdk",ref=d.getElementsByTagName("script")[0];d.getElementById(id)||(js=d.createElement("script"),js.id=id,js.async=!0,js.src="//connect.facebook.net/en_US/all.js",ref.parentNode.insertBefore(js,ref))}(document),window.fbAsyncInit=function(){FB.init({appId:"1758467224423088",cookie:!0,xfbml:!0,version:"v2.5"}),FB.getLoginStatus(function(response){"connected"===response.status&&($scope.ifUserLogin=!0)})},$scope.checkLoginState=function(){FB.login(function(response){response.authResponse&&($scope.ifUserLogin=!0,socialInit(response.authResponse.accessToken,"facebook"))},{scope:"email"})};var startApp=function(){gapi.load("auth2",function(){auth2=gapi.auth2.init({client_id:"513908222809-ao1f4i4ho7uup8629hrg9oku02n3b8vf.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/userinfo.email",cookiepolicy:"single_host_origin"}),attachSignin(document.getElementById("google_login"))})};window.onSignIn=onSignIn,$scope.init=function(){startApp()},$scope.resetPassword=function(email){var resetData=JSON.stringify({email:email}),resetUrl=$scope.baseUrl+"/users/password/forget";$scope.hideResetButton=!0,$scope.showloader=!0,$http.post(resetUrl,resetData).success(function(response){$scope.hideResetButton=!1,$scope.makeButtonDisabled=!0,snackbar.create(response.message,3e3),$scope.showloader=!1}).error(function(data){$scope.showloader=!1,$scope.makeButtonDisabled=!1,$scope.hideResetButton=!1,snackbar.create(data.message,5e3)})},$scope.verifyRandomKey=function(){$scope.randomKey=$stateParams.randomkey,$location.search()?($scope.refrenceRoute=$location.search().r,$scope.refrenceVal=$location.search().rv):($scope.refrenceRoute="",$scope.refrenceVal="");var verficationData=JSON.stringify({reset_key:$scope.randomKey}),verificationUrl=$scope.baseUrl+"/users/password/reset";$state.is("resetpassword")&&$http.post(verificationUrl,verficationData).success(function(response){$cookies.remove("Authorization"),$cookies.remove("userfirstname"),$cookies.remove("cHandle"),$cookies.remove("profilePicture"),$cookies.remove("isLoggedInUser")}).error(function(data){$scope.showViking=1,$scope.errorMessage=data.message,$cookies.remove("Authorization"),$cookies.remove("userfirstname"),$cookies.remove("cHandle"),$cookies.remove("profilePicture"),$cookies.remove("isLoggedInUser"),$state.go("reset")})},$scope.sendNewPassword=function(new_password){$scope.hideNewPasswordBtn=!0,$scope.showloader=!0,$scope.randomKey=$stateParams.randomkey;var verficationData=JSON.stringify({reset_key:$scope.randomKey,new_password:new_password}),verificationUrl=$scope.baseUrl+"/users/password/reset";if($scope.refrenceRoute&&$scope.refrenceVal)var params={r:$scope.refrenceRoute,rv:$scope.refrenceVal};else var params={};$scope.randomKey&&$http.post(verificationUrl,verficationData,{params:params}).success(function(response){$location.search().reftg?($scope.authToken=response.data["X-Auth-Token"],$scope.userHandle=response.data.handle,$scope.selfHandle=$scope.userHandle,$scope.selfId=response.data.member_id,$cookies.put("Authorization",$scope.authToken,{expires:exp}),$cookies.put("isLoggedInUser",!0,{expires:exp}),$cookies.put("selfId",$scope.selfId,{expires:exp}),$cookies.put("cHandle",$scope.userHandle,{expires:exp}),$scope.activityRegister("",$scope.refrenceVal)):(snackbar.create(response.message,5e3),$timeout(function(){$state.go("login")},5e3)),$scope.showloader=!1}).error(function(data){$scope.hideNewPasswordBtn=!1,$scope.showloader=!1,snackbar.create(data.message,5e3)})},$scope.viewPassword=function(){$scope.showPassword=!$scope.showPassword},$scope.validTypeMap={image:["image/png","image/jpeg"]},$scope.extensionCheck={image:["png","jpeg","jpg"],video:["mp4","m4v","webm","mov"]},$scope.getUrlFileType=function(url){var a=url,b=a.split(".");return b[b.length-1]},$scope.composeInvalidFileTypeError=function(prefix,a,suffix){var middle="";return 1===a.length?middle=a[0]:2===a.length?middle=a[0]+" or "+a[1]:a.length>2&&(middle=a.slice(0,a.length-1).join(", ")+" or "+a[a.length-1]),prefix+" "+middle+" "+suffix},$scope.convertToUrl=function(url){return url&&"string"==typeof url&&url.length>0?"http://"===url.slice(0,7)?url:"https://"===url.slice(0,8)?url:"http://"+url:url},$scope.fileUploaded=!1,$scope.setFile=function(element,mymodel,myindex,filetype,checkPointIndex,questionIndex,flag){$scope.isInvalid=!0,$scope.showloader=!0,$scope.invalidFileType="";var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.$apply(function($scope){if($scope.theFile=element.files[0],void 0!==$scope.theFile){var fileName=$scope.theFile.name,fileType=$scope.theFile.type;if(filetype){if(!$scope.validTypeMap[filetype]||-1==$scope.validTypeMap[filetype].indexOf(fileType)||$scope.theFile.size>1999e4)return $scope.invalidFileType=$scope.composeInvalidFileTypeError("Only files of type",$scope.validTypeMap[filetype]," and size under 19.99MB is supported. Got file of type "+fileType+" with size "+Math.floor($scope.theFile.size/1048576)+" MB."),void SweetAlert.swal("Ooh!",$scope.invalidFileType,"error");$scope.invalidFileType=""}var signReqUrl=$scope.baseUrl+"/sign_s3?file_name="+fileName+"&file_type="+fileType;$http.get(signReqUrl,{headers:headers}).then(function(response){$scope.fileResponse=response,$scope.fileUploadUrl=$scope.fileResponse.data.data.data.url,$scope.fileFields=$scope.fileResponse.data.data.data.fields;var postData=(response.data.data.data.url,response.data.data.data.fields.key,new FormData);for(key in $scope.fileFields)postData.append(key,$scope.fileFields[key]);var signReqUrl=$scope.baseUrl+"/sign_s3?file_name="+fileName+"&file_type="+fileType;$http.get(signReqUrl,{headers:headers}).then(function(response){$scope.fileResponse=response,$scope.fileUploadUrl=$scope.fileResponse.data.data.data.url,$scope.fileFields=$scope.fileResponse.data.data.data.fields;var cdn_url=response.data.data.cdn_url,full_url=response.data.data.data.url+response.data.data.data.fields.key,postData=new FormData;for(key in $scope.fileFields)postData.append(key,$scope.fileFields[key]);postData.append("file",$scope.theFile),$http.post($scope.fileUploadUrl,postData,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(response){$scope.isInvalid=!1,$scope.fileUploaded=!0,$scope.showloader=!1,"number"==typeof myindex?$scope[mymodel][myindex]=cdn_url||full_url:flag?$scope.checkpoints[checkPointIndex].questions[questionIndex][mymodel]=cdn_url||full_url:$scope[mymodel]=cdn_url||full_url})})})}else $scope.isInvalid=!1})},$scope.setMutipleFile=function(element,checkPointIndex,questionIndex,index,mymodel,keyTitle){$scope.isInvalid=!0;var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.$apply(function($scope){$scope.theFile=element.files[0],$scope.fileName=$scope.theFile.name,$scope.fileType=$scope.theFile.type;var signReqUrl=$scope.baseUrl+"/sign_s3?file_name="+$scope.fileName+"&file_type="+$scope.fileType;$http.get(signReqUrl,{headers:headers}).then(function(response){$scope.fileResponse=response,$scope.fileUploadUrl=$scope.fileResponse.data.data.data.url,$scope.fileFields=$scope.fileResponse.data.data.data.fields;var cdn_url=response.data.data.cdn_url,full_url=response.data.data.data.url+response.data.data.data.fields.key,postData=new FormData;for(key in $scope.fileFields)postData.append(key,$scope.fileFields[key]);postData.append("file",$scope.theFile),$http.post($scope.fileUploadUrl,postData,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(response){$scope.isInvalid=!1,"questionOptions"==keyTitle&&($scope.checkpoints[checkPointIndex].questions[questionIndex].questionOptions[index][mymodel]=cdn_url||full_url),"questionSamples"==keyTitle&&($scope.checkpoints[checkPointIndex].questions[questionIndex].questionSamples[index][mymodel]=cdn_url||full_url)})})})},$scope.modalSignup=function(params){$scope.signup(params,"modal")},$scope.signup=function(params,from){var signupData=JSON.stringify({handle:params.inputUsername,email:params.inputEmail,password:params.inputPassword});if($scope.hideSignupButton=!0,$scope.showSignuploader=!0,$state.is("signup"))var signupUrl=$scope.baseUrl+"/users/",params={};if(!$state.is("signup")){if($state.is("index.specChallenge"))var signupUrl=$scope.baseUrl+"/users/",params={r:"activity",rv:$scope.forSignup?$scope.forSignup:$rootScope.rootActId};if($state.is("index.profile"))var signupUrl=$scope.baseUrl+"/users/",params={r:"member",rv:$scope.forSignupMID?$scope.forSignupMID:$rootScope.rootMemId};if($state.is("index.communities"))var signupUrl=$scope.baseUrl+"/users/",params={r:"gang",rv:$scope.forSignupCID?$scope.forSignupCID:$rootScope.rootCommId};if($state.is("enterprise"))var signupUrl=$scope.baseUrl+"/users/",params={r:"community",rv:2}}$http.post(signupUrl,signupData,{params:params}).success(function(response){$scope.showSignuploader=!1,$scope.hideSignupButton=!1,$scope.signupResponse=response.data,$state.go("emailVerify"),"modal"==from&&($scope.signupModalIsOpen||$scope.signinModalIsOpen)&&$scope.cancelModal()}).error(function(data){$scope.showSignuploader=!1,$scope.hideSignupButton=!1,$scope.showloader=!1,"modal"==from&&($scope.signupModalIsOpen||$scope.signinModalIsOpen)&&$scope.cancelModal(),snackbar.create(data.message,3e3)})},$scope.splitIntoLines=function(s){return s.slice().replace(/\r\n/,"\n").split("\n")},$scope.editProfileModal=function(from,extra,index){$scope.$modalInstance=$modal.open({templateUrl:"views/profile/edit-modal.5d7ec583.html",resolve:{loadPlugin:function($ocLazyLoad){return $ocLazyLoad.load([{files:["/node_modules/@bower_components/jasny-bootstrap/dist/js/jasny-bootstrap.min.js","/node_modules/@bower_components/jasny-bootstrap/dist/css/jasny-bootstrap.min.css"]},{insertBefore:"#loadBefore",name:"localytics.directives",files:["/node_modules/@bower_components/chosen/chosen.min.css","/node_modules/@bower_components/chosen/chosen.jquery.min.js","/node_modules/@bower_components/chosen/chosen.proto.min.js"]},{files:["views/profile/styles/profile-modal.288ea90b.css"]},{name:"ui.switchery",files:[prefix+"/node_modules/@bower_components/switchery/dist/switchery.min.css",prefix+"/node_modules/@bower_components/switchery/dist/switchery.min.js",prefix+"/node_modules/@bower_components/ng-switchery/src/ng-switchery.js"]}])}},controller:function($scope,$modalInstance){$scope.editProfile={},$scope.editProfile.from=from,$scope.editProfile.extra=extra,$scope.editProfile.index=index,$scope.editProfileModalDeny=function(){$modalInstance.close()}},size:"md",windowClass:"animated fadeIn",scope:$scope})},$scope.followersModal=function(name,self,from){$scope.$modalInstance=$modal.open({templateUrl:"views/profile/followers-modal.9f1c5bbd.html",resolve:{loadPlugin:function($ocLazyLoad){return $ocLazyLoad.load([{files:["views/profile/styles/profile-modal.288ea90b.css"]}])}},controller:function($scope,$modalInstance){$scope.followersModalData={},$scope.followersModalData.name=1==self?"your":name+"'s",$scope.followersModalData.from=from,
$scope.followersModalDeny=function(){$modalInstance.close()}},size:"md",windowClass:"animated fadeIn",scope:$scope})},$scope.objectiveModal=function(timeremaining,totalproblems,problemsattempted,cktype,ob){$scope.$modalInstance=$modal.open({templateUrl:"views/objectiveModal.08befb10.html",controller:function($scope,$modalInstance){ob&&($scope.current_team_size=ob.length,$scope.min_team_size=$scope.ProblemFull[0].minTeamSize,$scope.max_team_size=$scope.ProblemFull[0].maxTeamSize),$scope.modalCk_id=cktype,$scope.modaltime_remaining=timeremaining,$scope.modaltotal_problems=totalproblems,$scope.modalproblems_attempted=problemsattempted,$scope.objectiveModalDeny=function(){$modalInstance.close()}},size:"md",windowClass:"animated fadeIn",scope:$scope})},$scope.backtocheckpointsModal=function(time_remaining,ckid){$scope.$modalInstance=$modal.open({templateUrl:"views/backtocheckpoints.7915c314.html",controller:function($scope,$modalInstance){$scope.modaltime_remaining=time_remaining,$scope.modalCk_id=ckid,$scope.backtochkDeny=function(){$modalInstance.close()}},size:"md",windowClass:"animated fadeIn",scope:$scope})},$scope.checkpointPauseModal=function(){$scope.$modalInstance=$modal.open({templateUrl:"views/checkpoints/user/checkpoint_pause_modal.7b504b2e.html",controller:function($scope,$modalInstance){$scope.checkpointPauseModalDeny=function(){$modalInstance.close()}},size:"md",windowClass:"animated fadeIn",scope:$scope})},$scope.chkpointModal=function(modalParam,chkDesc,chkDuration,status,cktypeId,stageIndex,stagetitle,completeData){$scope.$modalInstance=$modal.open({templateUrl:"views/ck_intro.370f7961.html",controller:function($scope,$modalInstance){$scope.modalCkId=modalParam,$scope.stateIndex=stageIndex,$scope.stageTitle=stagetitle,$scope.chkDesc=chkDesc,7==cktypeId&&($scope.cktypeId=cktypeId),$scope.status=status,$scope.chkDuration=60*Number(chkDuration),completeData&&angular.forEach(completeData,function(item,key){item.ck_id==modalParam&&($scope.stateIndex=key,$scope.chkDesc=item.description,$scope.chkDuration=60*Number(item.duration),7==cktypeId&&($scope.cktypeId=cktypeId))}),$scope.checkpointDeny=function(){$modalInstance.close()}},size:"md",windowClass:"animated fadeIn",scope:$scope})},$scope.problemCTADisabled=!1,$scope.problemTimeout=function(){$modal.open({templateUrl:"views/problem_timedout_modal.73274e19.html",controller:function($scope,$modalInstance){$scope.problemModalDeny=function(){$state.go("index.checkpoints",{actvSlug:$stateParams.actvSlug}),$modalInstance.close()}},backdrop:"static",keyboard:!1,windowClass:"animated fadeIn",scope:$scope});$scope.problemCTADisabled=!0},$scope.EmailVeriFyModal=function(){$scope.$modalInstance=$modal.open({templateUrl:"views/emailVerify-modal.bea6a40c.html",controller:ModalInstanceCtrl,size:"md",backdrop:"static",keyboard:!1,windowClass:"animated fadeIn",scope:$scope})},$scope.loginReferer=function(){return!!$rootScope.reference&&($location.path($rootScope.reference),$rootScope.reference=null,!0)},$scope.login=function(params){var loginData=JSON.stringify({username:angular.lowercase(params.inputUsername),password:params.inputPassword,device_type:$scope.device_type,device_token:$scope.device_token});if(params.inputUsername&&params.inputPassword){var passLogin=!0;$scope.emailToVerify=params.inputUsername,$scope.hideLoginButton=!0,$scope.showloader=!0,$scope.message=null}if(passLogin)if($state.is("login")||$state.is("signup")){var loginUrl=$scope.baseUrl+"/users/login",params={};$http.post(loginUrl,loginData,{params:params}).success(function(data,status,headers,config){$scope.showloader=!1,($scope.signupModalIsOpen||$scope.signinModalIsOpen)&&$scope.cancelModal(),$scope.authToken=data.data["X-Auth-Token"],$scope.userHandle=data.data.handle,$scope.selfHandle=$scope.userHandle,$scope.selfId=data.data.id,$scope.is_first_login=data.data.profile_incomplete,$cookies.put("newUser",$scope.is_first_login,{expires:exp}),$cookies.put("Authorization",$scope.authToken,{expires:exp}),$cookies.put("isLoggedInUser",!0,{expires:exp}),$cookies.put("selfId",$scope.selfId,{expires:exp}),$cookies.put("cHandle",$scope.userHandle,{expires:exp}),$scope.getForm(function(){1==$scope.is_first_login?(data.data.reference_data&&("community"==data.data.reference_data.r&&$cookies.put("entType",data.data.reference_data.rv),"judge"==data.data.reference_data.r&&$cookies.put("entType",data.data.reference_data.r),"activity"==data.data.reference_data.r&&$cookies.put("entType",data.data.reference_data.r)),$state.go("user.update",{},{reload:!0})):$scope.loginReferer()||$state.go("index.home",{},{reload:!0})})}).error(function(data,status,headers,config){$scope.showloader=!1,$scope.hideLoginButton=!1,400===status||401===status?$scope.signup_err=data.errors:423==status&&($scope.signinModal=!1,$scope.signupModal=!1,$scope.emailModal=!0,snackbar.create(data.message,5e3))})}else if(!$state.is("login")&&!$state.is("signup")){if($state.is("index.specChallenge"))var loginUrl=$scope.baseUrl+"/users/login",params={r:"activity",rv:$scope.forSignup?$scope.forSignup:$rootScope.rootActId};if($state.is("index.profile"))var loginUrl=$scope.baseUrl+"/users/login",params={r:"member",rv:$scope.forSignupMID?$scope.forSignupMID:$rootScope.rootMemId};if($state.is("index.communities"))var loginUrl=$scope.baseUrl+"/users/login",params={r:"gang",rv:$scope.forSignupCID?$scope.forSignupCID:$rootScope.rootCommId};if($state.is("enterprise"))var loginUrl=$scope.baseUrl+"/users/login",params={r:"community",rv:2};$http.post(loginUrl,loginData,{params:params}).success(function(data,status,headers,config){$scope.showloader=!1,$scope.authToken=data.data["X-Auth-Token"],$scope.userHandle=data.data.handle,$scope.selfHandle=$scope.userHandle,$scope.selfId=data.data.id,$scope.is_first_login=data.data.profile_incomplete,$cookies.put("newUser",$scope.is_first_login,{expires:exp}),$cookies.put("Authorization",$scope.authToken,{expires:exp}),$cookies.put("isLoggedInUser",!0,{expires:exp}),$cookies.put("selfId",$scope.selfId,{expires:exp}),$cookies.put("cHandle",$scope.userHandle,{expires:exp}),($scope.signupModalIsOpen||$scope.signinModalIsOpen)&&$scope.cancelModal(),$scope.getForm(function(){1==$scope.is_first_login?$state.go("user.update",{},{reload:!0}):$state.is("index.specChallenge")?($scope.getReferences(),$state.go("index.specChallenge",{actvSlug:$stateParams.actvSlug},{reload:!0})):$state.is("index.profile")?($scope.getReferences(),$state.go("index.profile",{userH:$stateParams.userH},{reload:!0})):$state.is("index.communities")?($scope.getReferences(),$state.go("index.communities",{handle:$stateParams.handle},{reload:!0})):$scope.loginReferer()||$state.go("index.home",{},{reload:!0})})}).error(function(data,status,headers,config){$scope.showloader=!1,$scope.hideLoginButton=!1,400===status||401===status?($scope.signup_err=data.errors,snackbar.create(data.errors,5e3),$state.is("index.specChallenge")||($state.is("index.profile")?$state.go("index.profile",{userH:$stateParams.userH}):$state.is("index.communities")&&$state.go("index.communities",{handle:$stateParams.handle}))):423==status&&($scope.signinModal=!1,$scope.signupModal=!1,$scope.emailModal=!0)})}},$scope.scrollDown=function(){$location.hash("bottom"),$anchorScroll()},$scope.glued=!0,$scope.chatBox=function(id,handle,name){$scope.chatStorey[id]?$scope.chatStorey[id].handle=handle:($scope.chatCount++,$scope.chatStorey[id]={handle:handle,name:name,index:$scope.chatCount-1})},$scope.checkboxList=function(index,item){0==item[index].length&&delete item[index]},$scope.getTimeLine=function(){$scope.showloaderTimeline=!0;var timelineUrl=$scope.baseUrl+"/users/timeline",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(timelineUrl,{headers:headers}).success(function(response){$scope.showloaderTimeline=!1,$scope.timelineData=response.data,angular.forEach($scope.timelineData,function(item,key){if(!item.from.picture_url||-1===$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.from.picture_url))){var getHandle=item.from.member_handle?item.from.member_handle:item.from.gang_handle,handle_md5=md5.createHash(getHandle),from_avatar="https://www.gravatar.com/avatar/"+handle_md5+"?s=150?&d=identicon";$scope.timelineData[key].from.picture_url=from_avatar}}),$scope.timelinePageIndex++,$scope.timelineLoadBusy=!1,$scope.stories=$scope.stories.concat($scope.timelineData)}),$scope.getNextTimelineItems=function(){$scope.timelineLoadBusy=!0,$scope.showloaderTimeline=!0;var timelineUrl=$scope.baseUrl+"/users/timeline",authToken=$cookies.get("Authorization"),headers={Authorization:authToken},params={page:$scope.timelinePageIndex};$http.get(timelineUrl,{headers:headers,params:params}).success(function(response){$scope.newtimelineData=response.data,angular.forEach($scope.newtimelineData,function(item,key){if(!item.from.picture_url||-1===$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.from.picture_url))){var getHandle=item.from.member_handle?item.from.member_handle:item.from.gang_handle,handle_md5=md5.createHash(getHandle),from_avatar="https://www.gravatar.com/avatar/"+handle_md5+"?s=150?&d=identicon";$scope.newtimelineData[key].from.picture_url=from_avatar}}),$scope.timelineLoadBusy=!1,$scope.showloaderTimeline=!1,0===$scope.newtimelineData.length?$scope.timelineScrollFinished=!0:($scope.timelinePageIndex++,$scope.stories=$scope.stories.concat($scope.newtimelineData))})}},$scope.leaderboardEmpty=!1,$scope.iam_host_for_leaderboard=0,$scope.leaderboardFullData=[],$scope.leaderboardMyData=[],$scope.leaderboardIndex=[],$scope.getLeaderboard=function(chkid){$scope.leaderboardLoader=!0;var getLeaderboardUrl=$scope.baseUrl+"/activity/leaderboard?checkpoint_id="+chkid,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getLeaderboardUrl,{headers:headers}).success(function(response){$scope.leaderboardLoader=!1,$scope.leaderboardLoadBusy=!1,$scope.leaderboardPageIndex++,$scope.leaderboardData=response.data.leaderboard_data;var items_leaderboard={};if(items_leaderboard.is_host=response.data.is_host,response.data.my_leaderboard_data&&($scope.leaderboard_data_self=response.data.my_leaderboard_data,1==response.data.is_host&&($scope.iam_host_for_leaderboard=1),$scope.Utils.keys($scope.leaderboard_data_self).length>0)){var my_leaderboard_data={};my_leaderboard_data.ckTypeId=$scope.leaderboard_data_self.checkpoint_type_id,my_leaderboard_data.sl_number=$scope.leaderboard_data_self.sl_num,my_leaderboard_data.rank=$scope.leaderboard_data_self.rank,my_leaderboard_data.result=$scope.leaderboard_data_self.result,my_leaderboard_data.is_qualified=$scope.leaderboard_data_self.is_qualified,my_leaderboard_data.score=$scope.leaderboard_data_self.score,!1===response.data.is_team?(my_leaderboard_data.handle=$cookies.get("cHandle"),my_leaderboard_data.md5=md5.createHash(my_leaderboard_data.handle),my_leaderboard_data.member_id=$scope.leaderboard_data_self.member_id,my_leaderboard_data.picture=$scope.profilePicture?$scope.profilePicture:$scope.defaultUserImg,angular.forEach($scope.leaderboard_data_self.member_data.extra,function(extra){1==extra.id&&(my_leaderboard_data.name=extra.value),3==extra.id&&(my_leaderboard_data.lastName=extra.value),my_leaderboard_data.picture=my_leaderboard_data.picture?my_leaderboard_data.picture:"https://www.gravatar.com/avatar/"+my_leaderboard_data.md5+"?s=150?&d=identicon"})):(my_leaderboard_data.handle=$scope.leaderboard_data_self.team_handle,my_leaderboard_data.md5=md5.createHash(my_leaderboard_data.handle),my_leaderboard_data.name=$scope.leaderboard_data_self.team_name,my_leaderboard_data.picture=my_leaderboard_data.picture?my_leaderboard_data.picture:"https://www.gravatar.com/avatar/"+my_leaderboard_data.md5+"?s=150?&d=identicon"),$scope.leaderboardMyData.push({checkpointType:my_leaderboard_data.ckTypeId,sl_no:my_leaderboard_data.sl_number,handle:my_leaderboard_data.handle,name:my_leaderboard_data.name,lastName:my_leaderboard_data.lastName,picture:my_leaderboard_data.picture,memid:my_leaderboard_data.memId,score:my_leaderboard_data.score,result:my_leaderboard_data.result,rank:my_leaderboard_data.rank,is_qualified:my_leaderboard_data.is_qualified})}angular.forEach($scope.leaderboardData,function(item){if(items_leaderboard.is_qualified=item.is_qualified,items_leaderboard.ckTypeId=item.checkpoint_type_id,items_leaderboard.score=item.score,items_leaderboard.sl_number=item.sl_num,items_leaderboard.result=item.result,items_leaderboard.rank=item.rank,items_leaderboard.memData=[item.member_data],items_leaderboard.picture="",items_leaderboard.phone="",items_leaderboard.location="",items_leaderboard.institution_name="",items_leaderboard.experience="",items_leaderboard.resume_url="",items_leaderboard.skills_interested=[],items_leaderboard.skills_experienced=[],!0===response.data.is_team){$scope.leaderboardData_with_team=!0,items_leaderboard.name=item.team_name,items_leaderboard.handle=item.team_handle,items_leaderboard.memId=item.team_member_ids;var team_members=[],items_leaderboard_members={};items_leaderboard.is_qualified=$scope.getTeamQualificationStatus(item.all_team_members_submissions),angular.forEach(item.all_team_members_submissions,function(data){items_leaderboard_members.score=data.score,items_leaderboard_members.result=data.result,items_leaderboard_members.is_qualified=data.is_qualified,team_members.push({score:items_leaderboard_members.score,is_qualified:items_leaderboard_members.is_qualified})}),items_leaderboard.md5=md5.createHash(items_leaderboard.handle),items_leaderboard.picture=items_leaderboard.picture?items_leaderboard.picture:"https://www.gravatar.com/avatar/"+items_leaderboard.md5+"?s=150?&d=identicon"}else $scope.leaderboardData_with_team=!1,angular.forEach(items_leaderboard.memData,function(i){items_leaderboard.name="",items_leaderboard.lastName="",items_leaderboard.handle=i.handle,items_leaderboard.memId=i.id,items_leaderboard.md5=md5.createHash(items_leaderboard.handle),items_leaderboard.extra=i.extra,angular.forEach(items_leaderboard.extra,function(extra){1==extra.id&&(items_leaderboard.name=extra.value),3==extra.id&&(items_leaderboard.lastName=extra.value),12==extra.id&&(items_leaderboard.resume_url=extra.value),5==extra.id&&(items_leaderboard.picture=extra.value),6==extra.id&&(items_leaderboard.phone=extra.value),9==extra.id&&Object.keys(extra.values).lenght>0&&(items_leaderboard.location=extra.values[0].properties),24==extra.id&&(items_leaderboard.institution_name=extra.values[0].institution_name),28==extra.id&&(items_leaderboard.experience=extra.value),13==extra.id&&(items_leaderboard.skills_interested=extra.values),14==extra.id&&(items_leaderboard.skills_experienced=extra.values)}),items_leaderboard.picture=items_leaderboard.picture?items_leaderboard.picture:"https://www.gravatar.com/avatar/"+items_leaderboard.md5+"?s=150?&d=identicon"});$scope.leaderboardFullData.push({checkpointType:items_leaderboard.ckTypeId,sl_no:items_leaderboard.sl_number,handle:items_leaderboard.handle,name:items_leaderboard.name,lastName:items_leaderboard.lastName,resume_url:items_leaderboard.resume_url,phone:items_leaderboard.phone,location:items_leaderboard.location,experience:items_leaderboard.experience,skills_interested:items_leaderboard.skills_interested,skills_experienced:items_leaderboard.skills_experienced,institution_name:items_leaderboard.institution_name,picture:items_leaderboard.picture,memid:items_leaderboard.memId,score:items_leaderboard.score,result:items_leaderboard.result,rank:items_leaderboard.rank,all_team_members:team_members,is_qualified:items_leaderboard.is_qualified})}),angular.forEach($scope.leaderboardFullData,function(data){$scope.leaderboardIndex[data.memid]=data}),$scope.leaderboardScrollFinished=!1}).error(function(error){$scope.leaderboardLoader=!1,$scope.showReload=!0,$scope.leaderboardEmpty=!0}),$scope.getnextleaderboardData=function(){var getnextLeaderboardUrl=$scope.baseUrl+"/activity/leaderboard?checkpoint_id="+chkid,authToken=$cookies.get("Authorization");if($scope.leaderboardLoader=!0,$scope.leaderboardLoadBusy=!0,$scope.showReload=!1,query="leaderboardnext"){var headers={Authorization:authToken},params={page:$scope.leaderboardPageIndex};$http.get(getnextLeaderboardUrl,{headers:headers,params:params}).success(function(response){$scope.newleaderboardFullData=[],$scope.leaderboardLoader=!1,$scope.leaderboardLoadBusy=!1,$scope.newleaderboardData=response.data.leaderboard_data;var items_leaderboard={};items_leaderboard.is_host=response.data.is_host,angular.forEach($scope.newleaderboardData,function(item){if(items_leaderboard.is_qualified=item.is_qualified,items_leaderboard.ckTypeId=item.checkpoint_type_id,items_leaderboard.score=item.score,items_leaderboard.sl_number=item.sl_num,items_leaderboard.result=item.result,items_leaderboard.rank=item.rank,items_leaderboard.memData=[item.member_data],items_leaderboard.picture="",items_leaderboard.phone="",items_leaderboard.location="",items_leaderboard.institution_name="",items_leaderboard.experience="",items_leaderboard.resume_url="",$scope.leaderboardData_with_team){items_leaderboard.name=item.team_name,items_leaderboard.handle=item.team_handle,items_leaderboard.memId=item.team_member_ids,items_leaderboard.all_team_members=item.all_team_members_submissions,items_leaderboard.md5=md5.createHash(items_leaderboard.handle);var new_team_members=[],items_leaderboard_members={};items_leaderboard.is_qualified=$scope.getTeamQualificationStatus(item.all_team_members_submissions),angular.forEach(item.all_team_members_submissions,function(data){items_leaderboard_members.score=data.score,items_leaderboard_members.is_qualified=data.is_qualified,new_team_members.push({score:items_leaderboard_members.score,is_qualified:items_leaderboard_members.is_qualified})}),items_leaderboard.picture=items_leaderboard.picture?items_leaderboard.picture:"https://www.gravatar.com/avatar/"+items_leaderboard.md5+"?s=150?&d=identicon"}else angular.forEach(items_leaderboard.memData,function(i){items_leaderboard.handle=i.handle,items_leaderboard.name="",items_leaderboard.lastName="",items_leaderboard.memId=i.id,items_leaderboard.md5=md5.createHash(items_leaderboard.handle),items_leaderboard.extra=i.extra,angular.forEach(items_leaderboard.extra,function(extra){1==extra.id&&(items_leaderboard.name=extra.value),3==extra.id&&(items_leaderboard.lastName=extra.value),12==extra.id&&(items_leaderboard.resume_url=extra.value),5==extra.id&&(items_leaderboard.picture=extra.value),6==extra.id&&(items_leaderboard.phone=extra.value),9==extra.id&&Object.keys(extra.values).lenght>0&&(items_leaderboard.location=extra.values[0].properties),24==extra.id&&(items_leaderboard.institution_name=extra.values[0].institution_name),28==extra.id&&(items_leaderboard.experience=extra.value)}),items_leaderboard.picture=items_leaderboard.picture?items_leaderboard.picture:"https://www.gravatar.com/avatar/"+items_leaderboard.md5+"?s=150?&d=identicon"});$scope.newleaderboardFullData.push({checkpointType:items_leaderboard.ckTypeId,sl_no:items_leaderboard.sl_number,handle:items_leaderboard.handle,name:items_leaderboard.name,lastName:items_leaderboard.lastName,resume_url:items_leaderboard.resume_url,phone:items_leaderboard.phone,location:items_leaderboard.location,experience:items_leaderboard.experience,picture:items_leaderboard.picture,memid:items_leaderboard.memId,score:items_leaderboard.score,result:items_leaderboard.result,institution_name:items_leaderboard.institution_name,rank:items_leaderboard.rank,all_team_members:new_team_members,is_qualified:items_leaderboard.is_qualified})}),0===$scope.newleaderboardFullData.length?$scope.leaderboardScrollFinished=!0:($scope.leaderboardPageIndex++,$scope.leaderboardFullData=$scope.leaderboardFullData.concat($scope.newleaderboardFullData),angular.forEach($scope.leaderboardFullData,function(data){$scope.leaderboardIndex[data.memid]=data}))}).error(function(res,status){$scope.leaderboardLoader=!1,$scope.showReload=!0})}}},$scope.getTeamQualificationStatus=function(data){for(var i=0;i<Object.keys(data).length;i++)return 1==data[i].is_qualified?1:2==data[i].is_qualified?2:3==data[i].is_qualified?3:0},$scope.getTeamMembers=function(memData,name){$scope.$modalInstance=$modal.open({templateUrl:"views/leaderboard_team_view.ee890f54.html",controller:function($scope,$modalInstance){$scope.leaderboard_team_memdata=memData,$scope.leaderboard_team_name=name,$scope.leaderboardteamMembersModalDeny=function(){$modalInstance.close()}},size:"lg",windowClass:"animated fadeIn",scope:$scope})},$scope.qualifyUsers=function(ckid,memids,status){var statusinStr=status.toString(),member_ids="";member_ids=$scope.leaderboardData_with_team?memids:[memids];var qualifyUsersUrl=$scope.baseUrl+"/activity/checkpoint/qualifier",qualifierData=JSON.stringify({checkpoint_id:ckid,member_ids:member_ids,status:statusinStr}),authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(qualifyUsersUrl,qualifierData,{headers:headers}).success(function(response){$scope.leaderboardIndex[memids].is_qualified=status,snackbar.create("Success",3e3)}).error(function(data){snackbar.create(data.errors,3e3)})},$scope.getNotifications=function(){$scope.showloaderNotifications=!0;var notificationsurl=$scope.baseUrl+"/users/notifications",authToken=$cookies.get("Authorization"),headers={Authorization:authToken},params={page:$scope.notificationsPageIndex};$http.get(notificationsurl,{headers:headers,params:params}).success(function(response){$scope.showloaderNotifications=!1,$scope.notificationData=response.data,angular.forEach($scope.notificationData,function(item,key){if(!item.from.picture_url||-1===$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.from.picture_url))){var getHandle=item.from.member_handle?item.from.member_handle:item.from.gang_handle,handle_md5=md5.createHash(getHandle),from_avatar="https://www.gravatar.com/avatar/"+handle_md5+"?s=150?&d=identicon";$scope.notificationData[key].from.picture_url=from_avatar}}),$scope.notificationsPageIndex++,$scope.notificationsLoadBusy=!1,$scope.notifications=$scope.notifications.concat($scope.notificationData)}),$scope.getNextNotifications=function(){$scope.showloaderNotifications=!0,$scope.notificationsLoadBusy=!0;var notificationsurl=$scope.baseUrl+"/users/notifications",authToken=$cookies.get("Authorization"),params={page:$scope.notificationsPageIndex},headers={Authorization:authToken};$http.get(notificationsurl,{headers:headers,params:params}).success(function(response){$scope.showloaderNotifications=!1,$scope.notificationsLoadBusy=!1,$scope.newNotificationsData=response.data,angular.forEach($scope.newNotificationsData,function(item,key){if(!item.from.picture_url||-1===$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.from.picture_url))){var getHandle=item.from.member_handle?item.from.member_handle:item.from.gang_handle,handle_md5=md5.createHash(getHandle),from_avatar="https://www.gravatar.com/avatar/"+handle_md5+"?s=150?&d=identicon";$scope.newNotificationsData[key].from.picture_url=from_avatar}}),0===$scope.newNotificationsData.length?$scope.notificationsScrollFinished=!0:($scope.notificationsPageIndex++,$scope.notifications=$scope.notifications.concat($scope.newNotificationsData))})}},$scope.forNotifications=function(idx,type){$scope.notifications=[],$scope.stories=[],$scope.chatStorey={};var authoriztionToken=$cookies.get("Authorization"),socket=io.connect($scope.socketBaseUrl,{query:"token="+authoriztionToken});socket.on("connect_error",function(){}),socket.on("reconnect_failed",function(){}),socket.on("connect",function(){socket.emit("join","room",function(x){}),void 0!=idx&&void 0!=type&&socket.emit("join",{route:"discussion",type:type,id:idx},function(x){})}),$scope.socket=socket,socket.on("update",function(payload){function insertInTree(nodeData,index,payload){var ka=index.split(".");if(1===ka.length)return nodeData.nodes||(nodeData.nodes=[]),void(nodeData.nodes[Number(ka[0])]=payload);var current_index=ka.shift(),new_index=ka.join(".");insertInTree(nodeData.nodes[current_index],new_index,payload)}if($scope.selfId=$cookies.get("selfId"),"notification"===payload.type)$scope.notifications.push(payload);else if("story"===payload.type){if(!payload.from.picture_url||-1===$scope.extensionCheck.image.indexOf($scope.getUrlFileType(payload.from.picture_url))){var getHandle=payload.from.member_handle?payload.from.member_handle:payload.from.gang_handle,handle_md5=md5.createHash(getHandle),from_avatar="https://www.gravatar.com/avatar/"+handle_md5+"?s=150?&d=identicon";payload.from.picture_url=from_avatar}$scope.stories=[payload].concat($scope.stories)}else if("online"===payload.type){var member_id=payload.body;$scope.selfId!=member_id&&($scope.chatStorey[member_id]?$scope.chatStorey[member_id].online=1:$scope.chatStorey[member_id]={online:1})}else if("offline"===payload.type){var member_id=payload.body;$scope.selfId!=member_id&&($scope.chatStorey[member_id]?$scope.chatStorey[member_id].online=0:$scope.chatStorey[member_id]={online:0})}else"chat"===payload.type?($scope.selfId!=payload.from.member_id&&$scope.playsound(),$scope.selfId==payload.from.member_id?($scope.chatStorey[payload.to.member_id]&&$scope.chatStorey[payload.to.member_id].chats?$scope.chatStorey[payload.to.member_id].chats.push(payload):$scope.getParticularChat(payload.to.member_id,payload.to.member_handle),$scope.chatStorey[payload.to.member_id.visible]=1):($scope.chatStorey[payload.from.member_id]&&$scope.chatStorey[payload.from.member_id].chats?$scope.chatStorey[payload.from.member_id].chats.push(payload):$scope.getParticularChat(payload.from.member_id,payload.from.member_handle),$scope.chatStorey[payload.from.member_id.visible]=1)):"gang"!==payload.type&&"activity"!==payload.type||insertInTree($scope.discussionTree,payload.data.message.index,payload);$scope.$apply()}),$scope.sendMessage=function(message,id){socket.emit("chat",{body:message,to:{member_id:id},title:"title"})},$scope.emitDiscussion=function(discBody,idx,typeId,type){void 0===idx?socket.emit("discussion",{type:type,id:typeId,body:discBody,index:""}):socket.emit("discussion",{type:type,id:typeId,body:discBody,index:idx})},$scope.playsound=function(){new Audio("/img/zapsplat_cartoon_pop_001_15478.mp3").play()},$scope.getParticularChat=function(memberId,handle){var chatUrl=$scope.socketBaseUrl+"socketapi/chats/sessions?member_id="+memberId,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(chatUrl,{headers:headers}).success(function(response){$scope.chatStorey[memberId]?($scope.chatStorey[memberId].handle=handle,$scope.chatStorey[memberId].chats=response.data,$scope.chatStorey[memberId].visible=1):$scope.chatStorey[memberId]={handle:handle,chats:response.data}})},$scope.IsUserOnline=function(){var onlineUrl=$scope.socketBaseUrl+"socketapi/chats/online",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(onlineUrl,{headers:headers}).success(function(response){$scope.is_online=response.data,angular.forEach($scope.is_online,function(member_id){$scope.selfId!=member_id&&($scope.chatStorey[member_id]?$scope.chatStorey[member_id].online=1:$scope.chatStorey[member_id]={online:1})})})}},$scope.tabvalue=null,$scope.getActivities=function(checktab){if($scope.tabvalue=checktab,$scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.loggedIn)var getActivitiesUrl=$scope.baseUrl+"/activity/all";else var getActivitiesUrl=$scope.baseUrl+"/activity/suggest?public=true";var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.showloader=!0,$scope.dontShow=!1,$http.get(getActivitiesUrl,{headers:headers}).then(function(response){$scope.showloader=!1,$scope.dontShow=!0,$scope.actPageIndex++,$scope.actLoadBusy=!1,$scope.activities=response.data.data,$scope.showSuggestedActivities=0,$scope.showAllActivities=1,$scope.suggestedActivitiesLink={color:"#676a6c","text-decoration":"none"},$scope.allActivitiesLink={color:"#438fcd","text-decoration":"underline"};var item_activities={};$scope.sortedActivities=[],$scope.upcomingActivities=[],$scope.newActivities=[],$scope.previousActivities=[],$scope.featuredActivities=[],angular.forEach($scope.activities,function(item){item_activities.title=item.title;var start_date_tz=moment.tz.guess(),currentDate=moment(),dateDiffStart=moment(item.application_start_time).diff(currentDate,"seconds"),dateDiffEnd=moment(item.application_end_time).diff(currentDate,"seconds");item_activities.dateDiffStart=dateDiffStart,item_activities.dateDiffEnd=dateDiffEnd,item_activities.application_start_time=moment(item.application_start_time).tz(start_date_tz).format("MMM Do YYYY"),item_activities.application_end_time=moment(item.application_end_time).tz(start_date_tz).format("Do MMM YYYY"),item_activities.live_end_time=moment(item.end_time).tz(start_date_tz).format("Do MMM YYYY"),$scope.whereAmI(item.application_start_time,item.application_end_time),item_activities.slug=item.slug,item_activities.gang_name=item.gang_data.name,item_activities.gang_logo=item.gang_data.logo,item_activities.tags=item.tags_data,item_activities.card=item.card,item_activities.isHost=item.is_host,item_activities.status=item.status,item.card&&-1!=$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.card))?item_activities.card=item.card:item_activities.card=makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:263,height:150,n:10,text:item_activities.slug,r:Math.random()}),item_activities.image=item.image,item_activities.is_applied=item.is_applied,$scope.sortedActivities.push({title:item_activities.title,application_start_time:item_activities.application_start_time,application_end_time:item_activities.application_end_time,slug:item_activities.slug,isHost:item_activities.isHost,status:item_activities.status,card:item_activities.card,image:item_activities.image,timeStat:$scope.timeStatus,is_applied:item_activities.is_applied}),0==$scope.timeStatus?$scope.upcomingActivities.push({title:item_activities.title,application_start_time:item_activities.application_start_time,application_end_time:item_activities.application_end_time,slug:item_activities.slug,isHost:item_activities.isHost,status:item_activities.status,gang_logo:item_activities.gang_logo,date_difference_from_start:item_activities.dateDiffStart,date_difference_from_end:item_activities.dateDiffEnd,tags:item_activities.tags,card:item_activities.card,image:item_activities.image,timeStat:$scope.timeStatus,is_applied:item_activities.is_applied}):1==$scope.timeStatus?($scope.newActivities.push({title:item_activities.title,application_start_time:item_activities.application_start_time,application_end_time:item_activities.application_end_time,live_end:item_activities.live_end_time,slug:item_activities.slug,isHost:item_activities.isHost,gang_logo:item_activities.gang_logo,tags:item_activities.tags,status:item_activities.status,card:item_activities.card,image:item_activities.image,timeStat:$scope.timeStatus,is_applied:item_activities.is_applied}),(!0===item.is_featured||item.priority>=3)&&$scope.featuredActivities.push({title:item_activities.title,application_start_time:item_activities.application_start_time,application_end_time:item_activities.application_end_time,community_name:item_activities.gang_name,slug:item_activities.slug,isHost:item_activities.isHost,status:item_activities.status,image:item_activities.image,timeStat:$scope.timeStatus,is_applied:item_activities.is_applied})):2==$scope.timeStatus&&$scope.previousActivities.push({title:item_activities.title,start_time:item_activities.application_start_time,end_time:item_activities.application_end_time,slug:item_activities.slug,gang_logo:item_activities.gang_logo,live_end:item_activities.live_end_time,card:item_activities.card,isHost:item_activities.isHost,status:item_activities.status,image:item_activities.image,timeStat:$scope.timeStatus,is_applied:item_activities.is_applied})}),$scope.actvID=$scope.activities.id,$scope.favoriteAct=$scope.activities.is_favourite,$scope.favoriteData=$scope.activities.is_favourite,$scope.actScrollFinished=!1}),
$scope.getNextActivities=function(query){if(query||(query=""),"hack"==$scope.tabvalue){$scope.actLoadBusy=!0,$scope.showloaderAct=!0;var params={page:$scope.actPageIndex,search:query},loadMoreActUrl=$scope.baseUrl+"/activity/all",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(loadMoreActUrl,{headers:headers,params:params}).success(function(response){$scope.showloaderAct=!1,$scope.actLoadBusy=!1,$scope.newActData=response.data;var item_activities={};$scope.sortedNewActivities=[],$scope.upcomingNewActivities=[],$scope.newNewActivities=[],$scope.previousNewActivities=[],angular.forEach($scope.newActData,function(item){item_activities.title=item.title;var start_date_tz=moment.tz.guess();item_activities.application_start_time=moment(item.application_start_time).tz(start_date_tz).format("MMMM Do YYYY"),item_activities.application_end_time=moment(item.application_end_time).tz(start_date_tz).format("MMMM Do YYYY"),$scope.whereAmI(item.application_start_time,item.application_end_time),item_activities.live_end_time=moment(item.end_time).tz(start_date_tz).format("Do MMM YYYY"),item_activities.slug=item.slug,item_activities.card=item.card,item.card&&-1!=$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.card))?item_activities.card=item.card:item_activities.card=makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:315,height:500,n:20,text:item_activities.slug}),item_activities.image=item.image,item_activities.is_applied=item.is_applied,item_activities.gang_logo=item.gang_data.logo,item_activities.tags=item.tags_data,item_activities.isHost=item.is_host,item_activities.status=item.status,$scope.sortedNewActivities.push({title:item_activities.title,application_start_time:item_activities.application_start_time,application_end_time:item_activities.application_end_time,slug:item_activities.slug,isHost:item_activities.isHost,status:item_activities.status,card:item_activities.card,image:item_activities.image,timeStat:$scope.timeStatus,is_applied:item_activities.is_applied}),0==$scope.timeStatus?$scope.upcomingNewActivities.push({title:item_activities.title,application_start_time:item_activities.application_start_time,application_end_time:item_activities.application_end_time,slug:item_activities.slug,isHost:item_activities.isHost,status:item_activities.status,card:item_activities.card,image:item_activities.image,timeStat:$scope.timeStatus,is_applied:item_activities.is_applied}):1==$scope.timeStatus?$scope.newNewActivities.push({title:item_activities.title,application_start_time:item_activities.application_start_time,application_end_time:item_activities.application_end_time,live_end:item_activities.live_end_time,slug:item_activities.slug,isHost:item_activities.isHost,gang_logo:item_activities.gang_logo,tags:item_activities.tags,status:item_activities.status,card:item_activities.card,image:item_activities.image,timeStat:$scope.timeStatus,is_applied:item_activities.is_applied}):2==$scope.timeStatus&&$scope.previousNewActivities.push({title:item_activities.title,application_start_time:item_activities.application_start_time,application_end_time:item_activities.application_end_time,gang_logo:item_activities.gang_logo,slug:item_activities.slug,isHost:item_activities.isHost,status:item_activities.status,card:item_activities.card,image:item_activities.image,live_end:item_activities.live_end_time,timeStat:$scope.timeStatus,is_applied:item_activities.is_applied})}),0===$scope.newActData.length?$scope.actScrollFinished=!0:($scope.actPageIndex++,$scope.sortedActivities=$scope.sortedActivities.concat($scope.sortedNewActivities),$scope.upcomingActivities=$scope.upcomingActivities.concat($scope.upcomingNewActivities),$scope.newActivities=$scope.newActivities.concat($scope.newNewActivities),$scope.previousActivities=$scope.previousActivities.concat($scope.previousNewActivities))})}}},$scope.suggestedActivities=function(){$scope.suggestedActShowLoader=!0;var suggestedActivitiesUrl=$scope.baseUrl+"/activity/suggest",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(suggestedActivitiesUrl,{headers:headers}).success(function(response){$scope.suggestedActShowLoader=!1,$scope.suggestedActivities=response.data,$scope.showSuggestedActivities=1,$scope.showAllActivities=0,$scope.suggestedActivitiesLink={color:"#438fcd","text-decoration":"underline"},$scope.allActivitiesLink={color:"#676a6c","text-decoration":"none"};var item_activities={};$scope.sortedSuggestedActivities=[],angular.forEach($scope.suggestedActivities,function(item){item_activities.title=item.title;var start_date_tz=moment.tz.guess();item_activities.application_start_time=moment(item.application_start_time).tz(start_date_tz).format("MMMM Do YYYY"),item_activities.application_end_time=moment(item.application_end_time).tz(start_date_tz).format("MMMM Do YYYY"),$scope.whereAmI(item.application_start_time,item.application_end_time),item_activities.slug=item.slug,item_activities.card=item.card,item.card&&-1!=$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.card))?item_activities.card=item.card:item_activities.card=makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:315,height:500,n:20,text:item_activities.slug}),item_activities.image=item.image,$scope.sortedSuggestedActivities.push({title:item_activities.title,start_time:item_activities.application_start_time,end_time:item_activities.application_end_time,slug:item_activities.slug,card:item_activities.card,image:item_activities.image,timeStat:$scope.timeStatus})})})},$scope.activitySearch=function(query){var seachActivitiesUrl=$scope.baseUrl+"/activity/all?search="+query,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(seachActivitiesUrl,{headers:headers}).success(function(response){$scope.activities=response.data,$scope.searcing="true";var item_activities={};$scope.searchedActivities=[],angular.forEach($scope.activities,function(item){item_activities.title=item.title;var start_date_tz=moment.tz.guess();item_activities.live_end_time=moment(item.end_time).tz(start_date_tz).format("Do MMM YYYY"),item_activities.application_start_time=moment(item.application_start_time).tz(start_date_tz).format("MMMM Do YYYY"),item_activities.application_end_time=moment(item.application_end_time).tz(start_date_tz).format("Do MMM YYYY"),$scope.whereAmI(item_activities.application_start_time,item_activities.application_end_time),item_activities.slug=item.slug,item_activities.card=item.card,item.card&&-1!=$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.card))?item_activities.card=item.card:item_activities.card=makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:315,height:500,n:20,text:item_activities.slug}),item_activities.gang_logo=item.gang_data.logo,item_activities.tags=item.tags_data,item_activities.image=item.image,item_activities.is_applied=item.is_applied,$scope.searchedActivities.push({title:item_activities.title,application_start_time:item_activities.application_start_time,application_end_time:item_activities.application_end_time,live_end:item_activities.live_end_time,slug:item_activities.slug,gang_logo:item_activities.gang_logo,tags:item_activities.tags,card:item_activities.card,image:item_activities.image,timeStat:$scope.timeStatus,is_applied:item_activities.is_applied})}),0==query.length&&($scope.searcing="false")})},$scope.getMyActivities=function(){var getMyActivitiesUrl=$scope.baseUrl+"/activity/",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getMyActivitiesUrl,{headers:headers}).then(function(response){$scope.myActivityData=response.data.data})},$scope.amIjudge=function(callback){var getJudgeUrl=$scope.baseUrl+"/judge/activity",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getJudgeUrl,{headers:headers}).success(function(response){$scope.myJudgingData=response.data,$scope.challengeClass="col-lg-8",$scope.judgeClass="col-lg-4",callback&&callback(response.data)}).error(function(data){$scope.notAjudge=!0})},$scope.startJudging=function(){$scope.checkAmIHostofChallenge(function(host,judge,id){var amIHost=host,amIjudge=judge;if(1===amIHost&&0===amIjudge)$scope.is_host=!0,$scope.is_judge=!1,$scope.getActivityById();else if(1===amIHost&&1===amIjudge||0===amIHost&&1===amIjudge){var getStartJudgingUrl=null;$scope.is_host=!1,$scope.is_judge=!0,getStartJudgingUrl=$scope.baseUrl+"/judge/activity?activity_id="+id;var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getStartJudgingUrl,{headers:headers}).success(function(response){$scope.actitvityAllCheckpoints=response.data.checkpoints}).error(function(data){snackbar.create(data.data,5e3)})}})},$scope.checkAmIHostofChallenge=function(callback){getStartJudgingUrl=$scope.baseUrl+"/activity/?activity_slug="+$stateParams.actvSlug;var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getStartJudgingUrl,{headers:headers}).success(function(response){$scope.challenge_host=response.data.is_host,$scope.challenge_judge=response.data.is_judge,callback&&callback(response.data.is_host,response.data.is_judge,response.data.id)})},$scope.setScoreData=function(score_data,criteria){for(var new_score_data={},criteria_keys=Object.keys(criteria),x=0;x<criteria_keys.length;x++){var key=criteria_keys[x];new_score_data[key]=score_data[key]||0}return new_score_data},$scope.allProblemsForJudges=[],$scope.allProblemsForJudgesIndex={},$scope.submissionsForJudge=[],$scope.getJudgeProblems=function(){$scope.checkAmIHostofChallenge(function(host,judge,id){var amIHost=host,amIjudge=judge,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};if($location.search().filter_by)var filter_by=$location.search().filter_by;else filter_by="none";if(1===amIHost&&0===amIjudge||$state.is("index.submissions_for_hosts")){if("problem"==filter_by||"none"==filter_by){var getJudgeProblemsUrl=$scope.baseUrl+"/activity/submission?checkpoint_id="+$stateParams.chckpointID;$http.get(getJudgeProblemsUrl,{headers:headers}).success(function(response){$scope.dataForJudge=response.data,angular.forEach($scope.dataForJudge,function(items){var item_problems={};item_problems.checkpointType=items.checkpoint_type_id,item_problems.submissions=items.submission_data,item_problems.team_submission=!1,item_problems.judge_data=items.judge_data,item_problems.team_submission?angular.forEach(item_problems.submissions,function(item){item_problems.score_data=item.score_data}):angular.forEach(item_problems.submissions,function(item,key){item_problems.score_data=item.score_data}),item_problems.problemid=items.problem_id,angular.forEach(items.problem_data,function(data){27==data.problem_setup_field_id||9==data.problem_setup_field_id||18==data.problem_setup_field_id?item_problems.manualTitle=data.value:28==data.problem_setup_field_id||10==data.problem_setup_field_id||19==data.problem_setup_field_id?item_problems.manualBody=data.value:29==data.problem_setup_field_id?item_problems.manualEvalCriteria=data.values:30==data.problem_setup_field_id&&(item_problems.manualForm=data.values)}),$scope.allProblemsForJudges.push({title:item_problems.manualTitle,body:item_problems.manualBody,form:item_problems.manualForm,problemid:item_problems.problemid,checkpoint_type_id:item_problems.checkpointType,submissions:item_problems.submissions,scoredata:item_problems.score_data,judge_data:item_problems.judge_data,criteria:item_problems.manualEvalCriteria}),$scope.allProblemsForJudges.is_team=item_problems.team_submission}),$scope.allProblemsForJudges.length>0?($scope.submissions_present=!0,$scope.selectedProblem=$scope.allProblemsForJudges[0],$scope.getProblemSubmission($scope.allProblemsForJudges[0].problemid)):$scope.submissions_present=!1})}}else if(1===amIHost&&1===amIjudge||0===amIHost&&1===amIjudge){var getJudgeProblemsUrl=$scope.baseUrl+"/judge/activity?checkpoint_id="+$stateParams.ckid;$http.get(getJudgeProblemsUrl,{headers:headers}).success(function(response){$scope.dataForJudge=response.data,angular.forEach($scope.dataForJudge,function(items){var item_problems={};item_problems.checkpointType=items.checkpoint_type_id,item_problems.submissions=items.submission_data,item_problems.team_submission=items.team_submission,item_problems.problemid=items.problem_id,angular.forEach(items.problem_data,function(data){27==data.problem_setup_field_id?item_problems.manualTitle=data.value:28==data.problem_setup_field_id?item_problems.manualBody=data.value:29==data.problem_setup_field_id?item_problems.manualEvalCriteria=data.values:30==data.problem_setup_field_id?item_problems.manualForm=data.values:49==data.problem_setup_field_id&&(item_problems.judgeExtras=data.values)}),item_problems.team_submission?angular.forEach(item_problems.submissions,function(beta,key){void 0!==beta.submission_data.score_data&&("object"==typeof beta.submission_data.score_data&&null!=beta.submission_data.score_data?(item_problems.submissions[key].submission_data.flag=1,item_problems.submissions[key].submission_data.score_data=$scope.setScoreData(beta.submission_data.score_data,item_problems.manualEvalCriteria)):(item_problems.submissions[key].submission_data.flag=0,item_problems.submissions[key].submission_data.score_data=$scope.setScoreData({},item_problems.manualEvalCriteria)))}):angular.forEach(item_problems.submissions,function(alpha,key){"object"==typeof alpha.score_data&&null!=alpha.score_data?alpha.score_data.length?item_problems.submissions[key].score_data=$scope.to_json(alpha.score_data):(item_problems.submissions[key].score_data=alpha.score_data,item_problems.submissions[key].flag=1):(item_problems.submissions[key].flag=0,item_problems.submissions[key].score_data=$scope.setScoreData({},item_problems.manualEvalCriteria))}),$scope.allProblemsForJudges.push({title:item_problems.manualTitle,body:item_problems.manualBody,form:item_problems.manualForm,judgeExtras:item_problems.judgeExtras,problemid:item_problems.problemid,checkpoint_type_id:item_problems.checkpointType,submissions:item_problems.submissions,criteria:item_problems.manualEvalCriteria}),$scope.allProblemsForJudges.is_team=item_problems.team_submission}),$scope.allProblemsForJudges.length>0?($scope.submissions_present=!0,$scope.selectedProblem=$scope.allProblemsForJudges[0],$scope.getProblemSubmission($scope.allProblemsForJudges[0].problemid)):$scope.submissions_present=!1})}})},$scope.getProblemSubmission=function(id){angular.forEach($scope.allProblemsForJudges,function(item){id==item.problemid&&($scope.forSubmissionSorting=[item])})},$scope.fullDynamicDataForJudge=[],$scope.getProblemSubmissions=function(mem_id,checkpointIndex,name){(checkpointIndex||0==checkpointIndex)&&($scope.submission_clicked="",$scope.submission_clicked=checkpointIndex);var item_dynamic_submissions={};item_dynamic_submissions.name=name,angular.forEach($scope.forSubmissionSorting,function(item){item_dynamic_submissions.problemTitle=item.title,item_dynamic_submissions.problemBody=item.body,item_dynamic_submissions.judgeData=item.judge_data,angular.forEach(item.submissions,function(data,key){if($scope.allProblemsForJudges.is_team||key!=checkpointIndex)mem_id==data.team_handle&&(item_dynamic_submissions.dynamicSubmissionData=data.submission_data.values,item_dynamic_submissions.dynamicScoreData=data.submission_data.score_data,item_dynamic_submissions.subId=data.submission_data.id,data.submission_data.comments&&""!==data.submission_data.comments?item_dynamic_submissions.comments=data.submission_data.comments:item_dynamic_submissions.comments=[]);else{if(item_dynamic_submissions.dynamicSubmissionData=data.values,item.judge_data){angular.forEach(item.judge_data,function(alpha,key){angular.forEach(data.score_data,function(i,key){alpha.member_data.id==i.judge_id&&(item_dynamic_submissions.dynamicScoreData=data.score_data,item_dynamic_submissions.dynamicScoreData[key].judge_handle=alpha.member_data.handle,angular.forEach(alpha.member_data.extra,function(ex){1==ex.id&&(item_dynamic_submissions.dynamicScoreData[key].judge_name=ex.value)}))})})}else item_dynamic_submissions.dynamicScoreData=data.score_data;item_dynamic_submissions.subId=data.id,data.comments&&""!==data.comments?item_dynamic_submissions.comments=data.comments:item_dynamic_submissions.comments=[]}}),item_dynamic_submissions.dynamicProblemsForJudgeCkid=item.checkpoint_type_id,item_dynamic_submissions.dynamicProblemsForJudgeIds=item.problemid,item_dynamic_submissions.dynamicProblemsForJudgeExtras=item.judgeExtras,item_dynamic_submissions.dynamicProblemsForJudge=item.form,item_dynamic_submissions.dynamicCriteriasForJudge=item.criteria}),$scope.fullDynamicDataForJudge=[{problemTitle:item_dynamic_submissions.problemTitle,problemBody:item_dynamic_submissions.problemBody,form:item_dynamic_submissions.dynamicProblemsForJudge,critera:item_dynamic_submissions.dynamicCriteriasForJudge,submissions:item_dynamic_submissions.dynamicSubmissionData,judgedata:item_dynamic_submissions.judgeData,judgeExtras:item_dynamic_submissions.judgeExtras,scoredata:item_dynamic_submissions.dynamicScoreData,checkpoint_type_id:item_dynamic_submissions.dynamicProblemsForJudgeCkid,submission_name:item_dynamic_submissions.name,comments:item_dynamic_submissions.comments,subid:item_dynamic_submissions.subId}]},$scope.singleMemeberQuestions=[],$scope.getSubmittedProblems=function(memid,is_team){var member_ids=$stateParams.member_id,member_ids_str=member_ids.toString(),params={};params=$stateParams.team?{checkpoint_id:$stateParams.chckpointID,member_id:member_ids_str,team:!0}:{checkpoint_id:$stateParams.chckpointID,member_id:member_ids_str},getSubmittedProblemsUrl=$scope.baseUrl+"/activity/submission/problem";var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getSubmittedProblemsUrl,{headers:headers,params:params}).success(function(response){$scope.singleMemberResponse=response.data,angular.forEach(response.data,function(items){var item_problems={};item_problems.checkpointType=items.checkpoint_type_id,item_problems.problemid=items.problem_id,angular.forEach(items.problem_data,function(data){27==data.problem_setup_field_id||9==data.problem_setup_field_id||18==data.problem_setup_field_id?item_problems.manualTitle=data.value:28==data.problem_setup_field_id||10==data.problem_setup_field_id||19==data.problem_setup_field_id?item_problems.manualBody=data.value:29==data.problem_setup_field_id?item_problems.manualEvalCriteria=data.values:30==data.problem_setup_field_id&&(item_problems.manualForm=data.values)}),$scope.singleMemeberQuestions.push({title:item_problems.manualTitle,body:item_problems.manualBody,form:item_problems.manualForm,problemid:item_problems.problemid,checkpoint_type_id:item_problems.checkpointType})})})},$scope.singleMemeberSubmissions=[],$scope.getSumittedSubmissions=function(pid){$scope.showloaderSubmissions=!0;var getSubmittedSubmissionUrl=$scope.baseUrl+"/activity/submission",member_ids=$stateParams.member_id,member_ids_str=member_ids.toString(),params={};params=$stateParams.team?{checkpoint_id:$stateParams.chckpointID,problem_id:pid,member_id:member_ids_str,team:!0}:{checkpoint_id:$stateParams.chckpointID,problem_id:pid,member_id:member_ids_str};var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getSubmittedSubmissionUrl,{headers:headers,params:params}).success(function(response){$scope.singleMemeberSubmissions.length>0&&($scope.singleMemeberSubmissions=[]),$scope.submissionsPageIndex++,$scope.submissionsLoadBusy=!1,$scope.showloaderSubmissions=!1;var sorted_data={};angular.forEach($scope.singleMemeberQuestions,function(val){val.problemid==pid&&(sorted_data.problem_data=val)}),sorted_data.submission_data=response.data,$scope.singleMemeberSubmissions.push({problem_data:sorted_data.problem_data,submission_data:sorted_data.submission_data}),$scope.submissionsScrollFinished=!1}),$scope.getNextSubmissions=function(){$scope.submissionsLoadBusy=!0,$scope.showloaderSubmissions=!0;var params={checkpoint_id:$stateParams.chckpointID,problem_id:pid,member_id:$stateParams.member_id,page:$scope.submissionsPageIndex};$http.get(getSubmittedSubmissionUrl,{headers:headers,params:params}).success(function(response){$scope.newSingleMemeberSubmissions=[],$scope.newSingleMemeberSubmissions.push({submission_data:response.data}),$scope.submissionsLoadBusy=!1,$scope.showloaderSubmissions=!1,0===response.data.length?$scope.submissionsScrollFinished=!0:($scope.submissionsPageIndex++,$scope.singleMemeberSubmissions[0].submission_data=$scope.singleMemeberSubmissions[0].submission_data.concat($scope.newSingleMemeberSubmissions[0].submission_data))})}},$scope.getfilename=function(filename){var filename=filename;if(filename){var file_split=filename.split("/");return file_split[file_split.length-1]}},$scope.addjudgecomment=function(){$scope.fullDynamicDataForJudge[0].comments.push({text:null,created_at:moment().toISOString(),updated_at:moment().toISOString()})},$scope.removejudgecomment=function(index){$scope.fullDynamicDataForJudge[0].comments=$scope.fullDynamicDataForJudge[0].comments.slice(0,index).concat($scope.fullDynamicDataForJudge[0].comments.slice(index+1))},$scope.submitScore=function(subid,rate,index,type){type?$scope.forSubmissionSorting[0].submissions[index].submission_data.result=0:$scope.forSubmissionSorting[0].submissions[index].result=0;var submitScoreFromJudgeUrl=$scope.baseUrl+"/judge/activity/submission",judgedData=JSON.stringify({submission_id:subid,score_data:rate,comments:$scope.fullDynamicDataForJudge[0].comments}),authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(submitScoreFromJudgeUrl,judgedData,{headers:headers}).success(function(response){snackbar.create(response.message,3e3),$timeout(function(){var getsuburl=$scope.baseUrl+"/activity/submission?checkpoint_id="+$stateParams.ckid+"&submission_id="+subid;$http.get(getsuburl,{headers:headers}).success(function(data){type?($scope.forSubmissionSorting[0].submissions[index].submission_data.score=data.data.score,$scope.forSubmissionSorting[0].submissions[index].submission_data.score_data=data.data.score_data,$scope.forSubmissionSorting[0].submissions[index].submission_data.result=data.data.result,0==$scope.forSubmissionSorting[0].submissions[index].submission_data.flag&&($scope.forSubmissionSorting[0].submissions[index].submission_data.flag=1)):($scope.forSubmissionSorting[0].submissions[index].score=data.data.score,$scope.forSubmissionSorting[0].submissions[index].score_data=data.data.score_data,$scope.forSubmissionSorting[0].submissions[index].result=data.data.result,0==$scope.forSubmissionSorting[0].submissions[index].flag&&($scope.forSubmissionSorting[0].submissions[index].flag=1))})},2e3)}).error(function(data){snackbar.create(response.message,3e3)})},$scope.followMember=function(userid,index,from){if($scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.loggedIn){var followMemberUrl=$scope.baseUrl+"/users/follow",followMemberData={member_id:userid},authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(followMemberUrl,followMemberData,{headers:headers}).success(function(response){"number"!=typeof index||$state.is("index.profile")?"number"==typeof index&&$state.is("index.profile")&&"follower"==from?$scope.userFollowerData[index].is_following=1:"number"==typeof index&&$state.is("index.profile")&&"followee"==from?$scope.userFolloweeData[index].is_following=1:$state.is("index.profile")&&"profilelanding"==from&&($scope.memberIsFollowing=1):$scope.sortedAllUserData[index].is_following=1,snackbar.create(response.data,5e3)}).error(function(data){snackbar.create(data.error,5e3)})}else $scope.signupModal("",userid,""),$scope.specKeyword="to follow",$state.go("index.profile",{userH:$stateParams.userH})},$scope.UnfollowProfileText="Following",$scope.UnfollowText="Following",$scope.modalUnfollowText="Following",$scope.unfollowMember=function(userid,index,from){var unfollowMemberUrl=$scope.baseUrl+"/users/unfollow",unfollowMemberData={member_id:userid},authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(unfollowMemberUrl,unfollowMemberData,{headers:headers}).success(function(response){"number"!=typeof index||$state.is("index.profile")?"number"==typeof index&&$state.is("index.profile")&&"follower"==from?$scope.userFollowerData[index].is_following=0:"number"==typeof index&&$state.is("index.profile")&&"followee"==from?$scope.userFolloweeData[index].is_following=0:$state.is("index.profile")&&"profilelanding"==from&&($scope.memberIsFollowing=0):$scope.sortedAllUserData[index].is_following=0,snackbar.create(response.data,5e3)}).error(function(data){snackbar.create(data.error,5e3)})},$scope.getAllUsers=function(checktab){$scope.tabvalue=checktab;var getAllUsersUrl=$scope.baseUrl+"/users/all",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.showloaderUsers=!0,$http.get(getAllUsersUrl,{headers:headers}).success(function(response){$scope.showloaderUsers=!1,$scope.userPageIndex++,$scope.userLoadBusy=!1,$scope.allUsersData=response.data.member_data;for(var user_objs=[],x=0;x<$scope.allUsersData.length;x++){var user_obj={first_name:"User"},unclean_user_obj=$scope.allUsersData[x],pick_extra_ids=[1,5,10,14];user_obj.handle=unclean_user_obj.handle,user_obj.bio=unclean_user_obj.bio;var user_handle_md5=md5.createHash(user_obj.handle);user_obj.picture_url="https://www.gravatar.com/avatar/"+user_handle_md5+"?s=150?&d=identicon",user_obj.email=unclean_user_obj.email,user_obj.id=unclean_user_obj.id,user_obj.is_following=unclean_user_obj.is_following;for(var y=0;y<unclean_user_obj.extra.length;y++){var extra_item=unclean_user_obj.extra[y];pick_extra_ids.indexOf(extra_item.id)>-1&&(3==pick_extra_ids.indexOf(extra_item.id)?user_obj[extra_item.label]=extra_item.tag_data:user_obj[extra_item.label]=extra_item.value)}user_objs.push(user_obj)}$scope.sortedAllUserData=user_objs,$scope.userScrollFinished=!1}),$scope.loadMoreUsers=function(query){if(query||(query=""),"member"==$scope.tabvalue){$scope.userLoadBusy=!0,$scope.showloaderUsers=!0;var params={page:$scope.userPageIndex,search:query},loadMoreUsersUrl=$scope.baseUrl+"/users/all",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(loadMoreUsersUrl,{headers:headers,params:params}).success(function(response){if($scope.userLoadBusy=!1,$scope.showloaderUsers=!1,$scope.nextPageData=response.data.member_data,0===$scope.nextPageData.length)$scope.userScrollFinished=!0;else{$scope.userPageIndex++;for(var user_objs=[],x=0;x<$scope.nextPageData.length;x++){var user_obj={first_name:"User"},unclean_user_obj=$scope.nextPageData[x],pick_extra_ids=[1,5,10,14];user_obj.handle=unclean_user_obj.handle,user_obj.bio=unclean_user_obj.bio;var user_handle_md5=md5.createHash(user_obj.handle);user_obj.picture_url="https://www.gravatar.com/avatar/"+user_handle_md5+"?s=150?&d=identicon",user_obj.email=unclean_user_obj.email,user_obj.id=unclean_user_obj.id,user_obj.is_following=unclean_user_obj.is_following;for(var y=0;y<unclean_user_obj.extra.length;y++){var extra_item=unclean_user_obj.extra[y];pick_extra_ids.indexOf(extra_item.id)>-1&&(3==pick_extra_ids.indexOf(extra_item.id)?user_obj[extra_item.label]=extra_item.tag_data:user_obj[extra_item.label]=extra_item.value)}user_objs.push(user_obj)}$scope.sortedAllUserData=$scope.sortedAllUserData.concat(user_objs)}})}}},$scope.searchUsers=function(query){$scope.showloaderUsers=!0;var searchUrl=$scope.baseUrl+"/users/search?any="+query,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(searchUrl,{headers:headers}).success(function(response){if($scope.sortedAllUserData=[],$scope.userSearchResults=response.data.member_data,$scope.userSearchResults.length>0){for(var user_objs=[],x=0;x<$scope.userSearchResults.length;x++){var user_obj={first_name:"User"},unclean_user_obj=$scope.userSearchResults[x],pick_extra_ids=[1,5,10,14];user_obj.handle=unclean_user_obj.handle;var user_handle_md5=md5.createHash(user_obj.handle);user_obj.picture_url="https://www.gravatar.com/avatar/"+user_handle_md5+"?s=150?&d=identicon",user_obj.email=unclean_user_obj.email,user_obj.id=unclean_user_obj.id,user_obj.is_following=unclean_user_obj.is_following;for(var y=0;y<unclean_user_obj.extra.length;y++){var extra_item=unclean_user_obj.extra[y];pick_extra_ids.indexOf(extra_item.id)>-1&&(3==pick_extra_ids.indexOf(extra_item.id)?user_obj[extra_item.label]=extra_item.tag_data:user_obj[extra_item.label]=extra_item.value)}user_objs.push(user_obj)}$scope.sortedAllUserData=$scope.sortedAllUserData.concat(user_objs),$scope.userScrollFinished=!1,$scope.showloaderUsers=!1}else $scope.sortedAllUserData=[],$scope.showloaderUsers=!1,$scope.usersSearchResultsText="No Results found"}).error(function(data){$scope.sortedAllUserData=[],$scope.showloaderUsers=!1,$scope.usersSearchResultsText="No Results found"})},$scope.getAllCommunities=function(checktab){$scope.tabvalue=checktab,$scope.showloaderComm=!0;var getAllCommunitiesUrl=$scope.baseUrl+"/users/gangs/all",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getAllCommunitiesUrl,{headers:headers}).success(function(response){$scope.showloaderComm=!1,$scope.commLoadBusy=!1,$scope.commPageIndex++,$scope.allCommunities=[];var allCommunitiesData={};angular.forEach(response.data,function(item){$scope.specCommunityhandle=item.handle,allCommunitiesData.is_following=item.is_following,allCommunitiesData.status=item.status,allCommunitiesData.description=item.description,allCommunitiesData.handle=item.handle,allCommunitiesData.handle_md5=md5.createHash(allCommunitiesData.handle),allCommunitiesData.name=item.name,allCommunitiesData.id=item.id,allCommunitiesData.is_manager=item.is_manager,allCommunitiesData.banner=item.banner,allCommunitiesData.upcoming_activities=item.upcoming_activities_count,allCommunitiesData.community_followers=item.member_strength,allCommunitiesData.total_activities=item.all_activities_count;var a=item.logo,b=a.split("."),fileType=b[b.length-1];item.logo&&-1!=$scope.extensionCheck.image.indexOf(fileType)?allCommunitiesData.logo=item.logo:allCommunitiesData.logo="https://www.gravatar.com/avatar/"+allCommunitiesData.handle_md5+"?s=150?&d=identicon",$scope.allCommunities.push({name:allCommunitiesData.name,id:allCommunitiesData.id,logo:allCommunitiesData.logo,is_manager:allCommunitiesData.is_manager,handle:allCommunitiesData.handle,description:allCommunitiesData.description,is_following:allCommunitiesData.is_following,banner:allCommunitiesData.banner,status:allCommunitiesData.status,total_activities_count:allCommunitiesData.total_activities,followers:allCommunitiesData.community_followers,upcoming_activities_count:allCommunitiesData.upcoming_activities})}),$scope.commScrollFinished=!1}),$scope.getNextCommunities=function(query){if(query||(query=""),"community"==$scope.tabvalue){$scope.commLoadBusy=!0,$scope.showloaderComm=!0;var params={page:$scope.commPageIndex,search:query},loadMoreCommUrl=$scope.baseUrl+"/users/gangs/all",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(loadMoreCommUrl,{headers:headers,params:params}).success(function(response){$scope.showloaderComm=!1,$scope.commLoadBusy=!1,$scope.newCommData=[];var allCommunitiesData={};angular.forEach(response.data,function(item){$scope.specCommunityhandle=item.handle,allCommunitiesData.is_following=item.is_following,allCommunitiesData.status=item.status,allCommunitiesData.description=item.description,allCommunitiesData.handle=item.handle,allCommunitiesData.handle_md5=md5.createHash(allCommunitiesData.handle),allCommunitiesData.name=item.name,allCommunitiesData.id=item.id,allCommunitiesData.is_manager=item.is_manager,allCommunitiesData.banner=item.banner,allCommunitiesData.upcoming_activities=item.upcoming_activities_count,allCommunitiesData.community_followers=item.member_strength,allCommunitiesData.total_activities=item.all_activities_count
;var a=item.logo,b=a.split("."),fileType=b[b.length-1];item.logo&&-1!=$scope.extensionCheck.image.indexOf(fileType)?allCommunitiesData.logo=item.logo:allCommunitiesData.logo="https://www.gravatar.com/avatar/"+allCommunitiesData.handle_md5+"?s=150?&d=identicon",$scope.newCommData.push({name:allCommunitiesData.name,id:allCommunitiesData.id,logo:allCommunitiesData.logo,is_manager:allCommunitiesData.is_manager,handle:allCommunitiesData.handle,description:allCommunitiesData.description,is_following:allCommunitiesData.is_following,banner:allCommunitiesData.banner,status:allCommunitiesData.status,total_activities_count:allCommunitiesData.total_activities,followers:allCommunitiesData.community_followers,upcoming_activities_count:allCommunitiesData.upcoming_activities})}),0===$scope.newCommData.length?$scope.commScrollFinished=!0:($scope.commPageIndex++,$scope.allCommunities=$scope.allCommunities.concat($scope.newCommData))})}}},$scope.whereAmI=function(start,end){var timeStatus,current_timezone=moment.tz.guess(),start_current_timezone=moment(start).tz(current_timezone),end_current_timezone=moment(end).tz(current_timezone),now_timezone=moment(moment().toISOString()).tz(current_timezone),distance_from_start=moment.duration(now_timezone.diff(start_current_timezone)),distance_from_end=moment.duration(now_timezone.diff(end_current_timezone));timeStatus=distance_from_start<0?0:distance_from_end<0?1:2,$scope.timeStatus=timeStatus},$scope.whereAmI2=function(start,end){var timeStatus,current_timezone=moment.tz.guess(),start_current_timezone=moment(start).tz(current_timezone),end_current_timezone=moment(end).tz(current_timezone),now_timezone=moment(moment().toISOString()).tz(current_timezone),distance_from_start=moment.duration(now_timezone.diff(start_current_timezone)),distance_from_end=moment.duration(now_timezone.diff(end_current_timezone));timeStatus=distance_from_start<0?0:distance_from_end<0?1:2,$scope.timeStatus2=timeStatus},$scope.communitiesSearchResultMsg="",$scope.searchCommunities=function(query){$scope.showloaderComm=!0;var searchCommunitiesUrl=$scope.baseUrl+"/users/gangs/search?any="+query,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(searchCommunitiesUrl,{headers:headers}).success(function(response){$scope.showloaderComm=!1,$scope.allCommunities=[];var allCommunitiesData={};angular.forEach(response.data,function(item){$scope.specCommunityhandle=item.handle,allCommunitiesData.is_following=item.is_following,allCommunitiesData.status=item.status,allCommunitiesData.description=item.description,allCommunitiesData.handle=item.handle,allCommunitiesData.handle_md5=md5.createHash(allCommunitiesData.handle),allCommunitiesData.name=item.name,allCommunitiesData.id=item.id,allCommunitiesData.before=item.logo,allCommunitiesData.is_manager=item.is_manager,allCommunitiesData.banner=item.banner,allCommunitiesData.upcoming_activities=item.upcoming_activities_count,allCommunitiesData.community_followers=item.member_strength,allCommunitiesData.total_activities=item.all_activities_count;var a=item.logo,b=a.split("."),fileType=b[b.length-1];item.logo&&-1!=$scope.extensionCheck.image.indexOf(fileType)?allCommunitiesData.logo=item.logo:allCommunitiesData.logo="https://www.gravatar.com/avatar/"+allCommunitiesData.handle_md5+"?s=150?&d=identicon",$scope.allCommunities.push({name:allCommunitiesData.name,id:allCommunitiesData.id,logo:allCommunitiesData.logo,is_manager:allCommunitiesData.is_manager,before:allCommunitiesData.before,handle:allCommunitiesData.handle,description:allCommunitiesData.description,is_following:allCommunitiesData.is_following,status:allCommunitiesData.status,banner:allCommunitiesData.banner,total_activities_count:allCommunitiesData.total_activities,followers:allCommunitiesData.community_followers,upcoming_activities_count:allCommunitiesData.upcoming_activities})})}).error(function(data){$scope.showloaderComm=!1,$scope.allCommunities=[]})},$scope.enabledFullscreen=!1,$scope.videoFullscreen=function(){var elem=document.getElementById("challengevideo");elem.muted&&(elem.muted=!1,$scope.muted=!0),elem.requestFullscreen?(elem.requestFullscreen(),$scope.enabledFullscreen=!0):elem.mozRequestFullScreen?(elem.mozRequestFullScreen(),$scope.enabledFullscreen=!0):elem.webkitRequestFullscreen?(elem.webkitRequestFullscreen(),$scope.enabledFullscreen=!0):elem.msRequestFullscreen&&(elem.msRequestFullscreen(),$scope.enabledFullscreen=!0)};document.getElementById("challengevideo");document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),$scope.videoMute=function(){var elem=document.getElementById("challengevideo");elem.muted?(elem.muted=!1,$scope.muted=!0):(elem.muted=!0,$scope.muted=!1)},$scope.getAppliedActivities=function(memid){if(!memid)var memid=$cookies.get("selfId");var getActivitiesUrl=$scope.baseUrl+"/activity/apply",authToken=$cookies.get("Authorization"),headers={Authorization:authToken},params={member_id:memid};$http.get(getActivitiesUrl,{headers:headers,params:params}).success(function(response){$scope.allAppliedActivities=[];var applied_activities={},start_date_tz=moment.tz.guess();angular.forEach(response.data,function(item){applied_activities.gang_logo=item.gang_data.logo,applied_activities.application_end_time=moment(item.application_end_time).tz(start_date_tz).format("MMMM Do YYYY"),applied_activities.title=item.title,applied_activities.slug=item.slug,applied_activities.status=item.status,applied_activities.challenge_end_time=moment(item.end_time),applied_activities.timestatus=$scope.whereAmI2(item.start_time,item.end_time);var currentDate=moment();applied_activities.challenge_date_diff=moment(item.start_time).diff(currentDate,"seconds"),item.card&&$scope.isUrlValid(item.card)&&-1!=$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.card))?applied_activities.card=item.card:applied_activities.card=makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:315,height:500,n:20,text:applied_activities.slug,r:Math.random()}),$scope.allAppliedActivities.push({title:applied_activities.title,slug:applied_activities.slug,gang_logo:applied_activities.gang_logo,status:applied_activities.status,timestatus:$scope.timeStatus2,challenge_date_diff:applied_activities.challenge_date_diff,card:applied_activities.card,challenge_end_time:applied_activities.challenge_end_time,end_time:applied_activities.application_end_time})})})},$scope.initialActivitiesLimit=4,$scope.initialCommunitiesLimit=4,$scope.expandAppliedActivities=function(len){$scope.initialActivitiesLimit=len},$scope.expandFollowedCommunities=function(len){$scope.initialCommunitiesLimit=len},$scope.getActivityById=function(){$scope.allCheckpointsData=[];var getSpecActivitiesUrl=null;$scope.actvSlug=$stateParams.actvSlug,$scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.activityShareUrl=location.href,$scope.loggedIn?getSpecActivitiesUrl=$scope.baseUrl+"/activity/?activity_slug="+$scope.actvSlug:($scope.specKeyword="to apply",getSpecActivitiesUrl=$scope.baseUrl+"/activity/?public=true&activity_slug="+$scope.actvSlug),$scope.checkpoints_loader=!0;var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getSpecActivitiesUrl,{headers:headers}).then(function(response){$scope.getSpecActivityData=response.data.data,$scope.actitvityAllCheckpoints=response.data.data.checkpoint_data,$scope.template_id=$scope.getSpecActivityData.template_id;var a=$scope.getSpecActivityData.checkpoint_data;$scope.specActivityTitle=$scope.getSpecActivityData.title,$scope.loggedIn&&($rootScope.pageTitle=$scope.specActivityTitle),$scope.specActivityTags=$scope.getSpecActivityData.tags_data;var start_date_tz=moment.tz.guess();if($scope.specActivityStartDate=moment($scope.getSpecActivityData.start_time).tz(start_date_tz).format("MMMM Do YYYY, h:mm A, z"),$scope.getSpecActivityData.gang_data){$scope.specActivityHost=$scope.getSpecActivityData.gang_data.name,$scope.specActivityHostSlug=$scope.getSpecActivityData.gang_data.handle;var specHandleMd5=md5.createHash($scope.getSpecActivityData.gang_data.handle);$scope.getSpecActivityData.gang_data.logo&&-1!=$scope.extensionCheck.image.indexOf($scope.getUrlFileType($scope.getSpecActivityData.gang_data.logo))?$scope.specActivityHostLogo=$scope.getSpecActivityData.gang_data.logo:$scope.specActivityHostLogo="https://www.gravatar.com/avatar/"+specHandleMd5+"?s=150?&d=identicon"}var start_date=moment($scope.getSpecActivityData.start_time),end_date=moment($scope.getSpecActivityData.end_time),currentDate=moment();$scope.activityDateDiffCurrent=end_date.diff(currentDate,"seconds"),$scope.date_difference_activity=end_date.diff(start_date,"seconds"),$scope.specActivityDisplayStartDate=moment($scope.getSpecActivityData.start_time).tz(start_date_tz).format("Do MMM YYYY, h:mm a, z"),$scope.specActivityDisplayEndDate=moment($scope.getSpecActivityData.end_time).tz(start_date_tz).format("Do MMM YYYY, h:mm a, z"),$scope.whereAmI2($scope.getSpecActivityData.start_time,$scope.getSpecActivityData.end_time);var currentDate=moment();$scope.challenge_date_diff=moment($scope.getSpecActivityData.start_time).diff(currentDate,"seconds"),$scope.specActivityApplicationStartDate=$scope.getSpecActivityData.application_start_time,$scope.specActivityApplicationEndDate=$scope.getSpecActivityData.application_end_time,$scope.specActivityDescription=$scope.getSpecActivityData.description,$scope.specActivityIsCreator=$scope.getSpecActivityData.is_creator,$scope.specActivityIsHost=$scope.getSpecActivityData.is_host,$scope.getSpecActivityGangLogo=$scope.getSpecActivityData.gang_data.logo,1==$scope.getSpecActivityData.is_creator&&($scope.specActivityGangName=$scope.getSpecActivityData.gang_data.handle),$scope.specActivityIsApplied=$scope.getSpecActivityData.is_applied,$scope.specActivityIsHost=$scope.getSpecActivityData.is_host,$scope.specActivityIsJudge=$scope.getSpecActivityData.is_judge,$scope.specActivityStatus=$scope.getSpecActivityData.status,$scope.specActivityIsFavorite=$scope.getSpecActivityData.is_favourite,$scope.specActivityId=$scope.getSpecActivityData.id,$rootScope.rootActId=$scope.specActivityId,$scope.specActivitySlug=$scope.getSpecActivityData.slug,$scope.specActivityBanner=$scope.getSpecActivityData.banner,$scope.specActivityBanner&&-1!=$scope.extensionCheck.video.indexOf($scope.getUrlFileType($scope.specActivityBanner))?$scope.specActivityBannerType=2:$scope.specActivityBannerType=1,$scope.specActivityOgImage=$scope.getSpecActivityData.image,$scope.specActivityTotalApplied=$scope.getSpecActivityData.total_applied,$scope.specActivityFaqs=$scope.getSpecActivityData.faq,$scope.specActivityHowItWorks=$scope.getSpecActivityData.how_it_works,$scope.specActivitySections=$scope.getSpecActivityData.additional_sections,$scope.whereAmI($scope.specActivityApplicationStartDate,$scope.specActivityApplicationEndDate),$scope.specActivityCheckpointIds=$scope.getSpecActivityData.checkpoint_ids,$scope.specActivityCheckpointData=$scope.getSpecActivityData.checkpoint_data;var item_checkpoints={};$scope.specActivityOgImage&&($scope.specActivityOgImage=$scope.specActivityOgImage.replace(/ /g,"%20"));var og_url=window.location.href;if(ngMeta.setTag("description",removeMd($scope.specActivityDescription)),ngMeta.setTag("url",og_url),ngMeta.setTag("image",$scope.specActivityOgImage?$scope.specActivityOgImage:makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:1200,height:630,n:24,type:"png",text:$scope.specActivityTags.map(function(u){return u.name})})),ngMeta.setTitle($scope.specActivityTitle),angular.forEach(a,function(item){var start_date_tz=moment.tz.guess();item_checkpoints.raw_start_date=item.submission_start_time,item_checkpoints.raw_end_date=item.submission_end_time,item_checkpoints.sub_start_time=moment(item.submission_start_time).tz(start_date_tz).format("Do MMM YYYY, h:mm a, z"),item_checkpoints.sub_end_time=moment(item.submission_end_time).tz(start_date_tz).format("Do MMM YYYY, h:mm a, z"),item_checkpoints.label=item.label,item_checkpoints.checkpoint_state=item.checkpoint_state,0===item_checkpoints.checkpoint_state||1===item_checkpoints.checkpoint_state?item_checkpoints.enable=!0:item_checkpoints.enable=!1;var currentDate=moment(),ck_start_date=moment(item.submission_start_time),ck_end_date=moment(item.submission_end_time);item_checkpoints.date_difference=ck_start_date.diff(currentDate,"seconds"),item_checkpoints.date_difference_end=ck_end_date.diff(currentDate,"seconds"),item_checkpoints.ck_start_date=moment(item.submission_start_time),item_checkpoints.date_difference<0?item_checkpoints.checkpoint_state_text="Started ago":item_checkpoints.checkpoint_state_text="Starts in",item_checkpoints.description=item.description,item_checkpoints.leaderboard_visibility=item.leaderboard_visibility,item.visibility=!1,0==item_checkpoints.leaderboard_visibility?item.visibility=!0:1==item_checkpoints.leaderboard_visibility&&1==$scope.specActivityIsHost&&(item.visibility=!0),item_checkpoints.duration=item.duration/60,item_checkpoints.id=item.id,item_checkpoints.location=item.physical_locations,item_checkpoints.qual_dependencies=item.qualification_dependencies,item_checkpoints.ck_type_id=item.checkpoint_type_id,item_checkpoints.ck_type_name=$scope.checkpoint_type[item_checkpoints.ck_type_id-1].name,item_checkpoints.timezone=item.timezone,$scope.allCheckpointsData.push({ck_start_date:item_checkpoints.ck_start_date,checkpoint_date_difference:item_checkpoints.date_difference,checkpoint_date_difference_end:item_checkpoints.date_difference_end,checkpoint_state_text:item_checkpoints.checkpoint_state_text,start_date:item_checkpoints.sub_start_time,end_date:item_checkpoints.sub_end_time,label:item_checkpoints.label,description:item_checkpoints.description,location:item_checkpoints.location,show:item.visibility,dependency:item_checkpoints.qual_dependencies,leaderboard_visibility:item_checkpoints.leaderboard_visibility,duration:item_checkpoints.duration,timezone:item_checkpoints.timezone,ck_id:item_checkpoints.id,ck_type_id:item_checkpoints.ck_type_id,ck_type_name:item_checkpoints.ck_type_name,state:item_checkpoints.checkpoint_state,enable:item_checkpoints.enable})}),$scope.specActivityCheckpointData&&($scope.specActivityCheckpointDataLen=Object.keys($scope.specActivityCheckpointData).length),$scope.specActivityBanner?($scope.getString=$scope.specActivityBanner.substring(0,4),$scope.getString):null==$scope.specActivityBanner&&($scope.specActivityBanner=makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:1300,height:300,n:20,text:$scope.specActivityTags.map(function(u){return u.name})})),$scope.checkpoints_loader=!1,$state.is("index.specChallenge_insights")&&$scope.getActivityAnalytics($scope.specActivityId),$scope.loggedIn&&$location.search()){if(1!=response.data.data.is_applied&&1==response.data.data.access_type)var refrenceRoute=$location.search().r;var refrenceVal=$location.search().rv;if($location.search().reftg){var refrenceTogo=$location.search().reftg;"activity"==refrenceRoute&&refrenceVal==response.data.data.id&&"checkpoint"==refrenceTogo&&$scope.activityRegister("",response.data.data.id)}}})},$rootScope.Utils={keys:Object.keys},$scope.getCheckpointNameById=function(dependency,ck_id){var andResult;if(dependency.and&&dependency.and.length>0){var DependancyMessage,dependencyAndJson=dependency.and;return angular.forEach($scope.allCheckpointsData,function(ck){return angular.forEach(dependencyAndJson,function(ex,key){if(ex==ck.ck_id){var result=ck.label;return DependancyMessage=2==ck.state?2:"This stage is dependant on "+result+" stage"}}),andResult=DependancyMessage}),andResult}},$scope.changecheckpointStatus=function(index){$scope.allCheckpointsData[index].enable=!0,0!==$scope.allCheckpointsData[index].state&&($scope.allCheckpointsData[index].state=0)},$scope.getActivityAnalytics=function(specActivityId,end_date){function getDates(startDate,stopDate){for(var dateArray=new Array,currentDate=startDate;currentDate>=stopDate;)dateArray.push(currentDate),currentDate=currentDate.substractDays(1);return dateArray}function change_date_moment(date_str){var y_dd=date_str.split("%2");y_dd[1]=y_dd[1].substring(1),y_dd[2]=y_dd[2].substring(1);var dd=new Date(y_dd[0]+" "+y_dd[1]);moment.tz.guess();return dd}function get_date_moment(date_str){var y_dd=date_str.split("%2");y_dd[1]=y_dd[1].substring(1),y_dd[2]=y_dd[2].substring(1);var dd=new Date(y_dd[0]+" "+y_dd[1]),date_tz=moment.tz.guess();return moment(dd).tz(date_tz).format("MMMM Do YYYY, h:mm a, z")}function gd(year,month,day){return new Date(year,month-1,day).getTime()}function useUpdatedValue(){function Comparator(a,b){return a[1]==b[1]?0:a[1]<b[1]?1:-1}angular.forEach(month_dates,function(item,key){$scope.data[key]=[item,0]});var today=month_dates[0];angular.forEach($scope.data,function(item,index){angular.forEach($scope.getMemberActivityDayData,function(value,key){item[0]==key&&(item[1]=value)}),item[0]==today&&($scope.todayRegistrations=item[1]);var newdt=item[0].split("-");newdt[2]=parseInt(newdt[2])+1,$scope.data1.push([gd(newdt[0],newdt[1],newdt[2]),item[1]])}),$scope.genderData=[{label:"Male",data:$scope.getMemberActivityAllData.gender[0],color:"#e74c3c"},{label:"Female",data:$scope.getMemberActivityAllData.gender[1],color:"#27ae60"},{label:"Others",data:$scope.getMemberActivityAllData.gender[2],color:"#3498db"},{label:"N/A",data:$scope.getMemberActivityAllData.gender[-1],color:"#f1c40f"}],$scope.genderOptions={series:{pie:{show:!0}},grid:{hoverable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!1}},$scope.profData=[{label:"Student",data:$scope.getMemberActivityAllData.profession[0],color:"#e74c3c"},{label:"Professional",data:$scope.getMemberActivityAllData.profession[1],color:"#27ae60"},{label:"N/A",data:$scope.getMemberActivityAllData.profession[-1],color:"#3498db"}],$scope.profOptions={series:{pie:{show:!0}},grid:{hoverable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!1}},angular.forEach($scope.getMemberActivityAllData.tags,function(value,key){$scope.skilltag.push([key,value])}),$scope.skill_result=$scope.skilltag.sort(Comparator),$scope.finalSkill=[],$scope.skillCount=[];for(var i=0;i<5;i++)$scope.finalSkill.push($scope.skill_result[i]);angular.forEach($scope.finalSkill,function(val,key){angular.forEach($scope.tags,function(item){val[0]==item.id&&$scope.skillCount.push([item.name,val[1]])})}),$scope.skillData=[{label:$scope.skillCount[0][0],data:$scope.skillCount[0][1],color:"#e74c3c"},{label:$scope.skillCount[1][0],data:$scope.skillCount[1][1],color:"#27ae60"},{label:$scope.skillCount[2][0],data:$scope.skillCount[2][1],color:"#3498db"},{label:$scope.skillCount[3][0],data:$scope.skillCount[3][1],color:"#f1c40f"},{label:$scope.skillCount[4][0],data:$scope.skillCount[4][1],color:"#bababa"}],$scope.skillOptions={series:{pie:{show:!0,innerRadius:.5}},grid:{hoverable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!1}}}Date.prototype.substractDays=function(days){var dat=new Date(this.valueOf());return dat.setDate(dat.getDate()-days),dat};var month_dates=[],rec_date=new Date;if(end_date)var rec_date=moment(end_date).toDate();var dateArray=getDates(rec_date,rec_date.substractDays(30));for(i=0;i<dateArray.length;i++){var dayi=dateArray[i].getDate();dayi<10&&(dayi="0"+dayi);var moni=dateArray[i].getMonth()+1;moni<10&&(moni="0"+moni);var yeari=dateArray[i].getFullYear(),datei=yeari+"-"+moni+"-"+dayi;month_dates.push(datei)}if(start_date=month_dates[month_dates.length-1]+"%2020:20:19%2B00:00",$scope.appStartDateInsights=get_date_moment(start_date),end_date){var x_rec=moment(end_date).toDate().getDate();x_rec<10&&(x_rec="0"+x_rec);var y_rec=moment(end_date).toDate().getMonth()+1;y_rec<10&&(y_rec="0"+y_rec);var z_rec=moment(end_date).toDate().getFullYear();end_date=z_rec+"-"+y_rec+"-"+x_rec+"%2020:20:19%2B00:00",$scope.appEndDate=change_date_moment(end_date),$scope.appEndDate2=get_date_moment(end_date)}else end_date=month_dates[0]+"%2020:20:19%2B00:00",$scope.appEndDate=change_date_moment(end_date),$scope.appEndDate2=get_date_moment(end_date);$scope.todayRegistrations="0";var activityMemberDataUrl=$scope.baseUrl+"/activity/member?activity_id="+specActivityId+"&start_date="+start_date+"&end_date="+end_date+"&data_filter=day",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.getMemberActivityDayData={},$scope.getMemberActivityAllData="",$scope.activityApplicants=[],$scope.tags=[],$scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.loggedIn&&$http.get(activityMemberDataUrl,{headers:headers}).success(function(response){if(response.data){$scope.getMemberActivityAllData=response.data,$scope.getMemberActivityDayData=response.data.day_data,$scope.allyearsexp={};var val0=0,val12=0,val23=0,val34=0,val45=0,val56=0,val67=0,val78=0,val8=0;angular.forEach($scope.getMemberActivityAllData.years_of_experience,function(value,key){-1==key&&($scope.allyearsexp["N/A"]=value),key<1&&-1!=key&&(val0+=value,$scope.allyearsexp[0]=val0),key>=1&&key<2&&(val12+=value,$scope.allyearsexp["1-2"]=val12),key>=2&&key<3&&(val23+=value,$scope.allyearsexp["2-3"]=val23),key>=3&&key<4&&(val34+=value,$scope.allyearsexp["3-4"]=val34),key>=4&&key<5&&(val45+=value,$scope.allyearsexp["4-5"]=val45),key>=5&&key<6&&(val56+=value,$scope.allyearsexp["5-6"]=val56),key>=6&&key<7&&(val67+=value,$scope.allyearsexp["6-7"]=val67),key>=7&&key<8&&(val78+=value,$scope.allyearsexp["7-8"]=val78),key>=8&&(val8+=value,$scope.allyearsexp["8+"]=val8)}),angular.forEach(response.data.applicant_data,function(item){var handle=item.handle,picture_url="",first_name="",last_name="",location="",resume_url="",years_of_experience="",profession="",current_ctc="",gender="";angular.forEach(item.extra,function(index){1==index.field_type_id&&1==index.id&&(first_name=index.value),1==index.field_type_id&&3==index.id&&(last_name=index.value),1==index.field_type_id&&9==index.id&&(location=index.values[0].properties),4==index.field_type_id&&("1"==index.value?gender="Female":"0"==index.value&&(gender="Male")),13==index.field_type_id&&28==index.id&&(years_of_experience=index.value),9==index.field_type_id&&5==index.id&&(picture_url=index.value),9==index.field_type_id&&12==index.id&&(resume_url=index.value),30==index.id&&(current_ctc=index.values[0]),16==index.field_type_id&&25==index.id&&("true"==index.value?profession="Student":"false"==index.value&&(profession="Professional"))});var pic_x=picture_url.split("."),pic_y=pic_x[pic_x.length-1].toString().toLowerCase();""!=picture_url&&pic_y.includes("jpg")||(picture_url="https://www.gravatar.com/avatar/"+handle.md5+"?s=150?&d=identicon"),$scope.activityApplicants.push({handle:handle,picture_url:picture_url,first_name:first_name,last_name:last_name,location:location,yrs_of_experience:years_of_experience,resume_url:resume_url,profession:profession,job_search:current_ctc,gender:gender})});var getTagsUrl=$scope.baseUrl+"/tags";$http.get(getTagsUrl,{headers:headers}).success(function(response){$scope.tags=response.data,useUpdatedValue()})}else SweetAlert.swal("No data available!","Please set a different end date!","error")}),$scope.data=[],$scope.data1=[],$scope.skilltag=[],$scope.genderData=[],$scope.genderOptions={},$scope.profData=[],$scope.profOptions={},$scope.chartData=[],$scope.barOptions={},$scope.skillData=[],$scope.skillOptions={},$scope.data2=$scope.data1,$scope.dataset=[{label:"Checkpoints Applied",grow:{stepMode:"linear"},data:$scope.data2,color:"#1ab394",bars:{show:!0,align:"center",barWidth:5184e4,lineWidth:0}},{label:"Registrations",grow:{stepMode:"linear"},data:$scope.data1,yaxis:2,color:"#1C84C6",lines:{lineWidth:1,show:!0,fill:!0,fillColor:{colors:[{opacity:.2},{opacity:.2}]}}}],$scope.options={grid:{hoverable:!0,clickable:!0,tickColor:"#d5d5d5",borderWidth:0,color:"#d5d5d5"},colors:["#1ab394","#464f88"],tooltip:!0,xaxis:{mode:"time",tickSize:[3,"day"],tickLength:0,axisLabel:"Date",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:10,color:"#d5d5d5"},yaxes:[{position:"left",color:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:3},{position:"right",color:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:" Arial",axisLabelPadding:67}],legend:{noColumns:1,labelBoxBorderColor:"#d5d5d5",position:"nw"}}},$scope.data_comm=[],$scope.data1_comm=[],$scope.skilltag_comm=[],$scope.skilltags=[],$scope.genderData2_comm=[],$scope.genderOptions2_comm={},$scope.profData_comm=[],$scope.profOptions_comm={},$scope.chartData_comm=[],$scope.barOptions_comm={},$scope.dataset_comm=[],$scope.options_comm={},$scope.skillCount_comm=[],$scope.skillData_comm=[],$scope.skillOptions_comm={},$scope.handleTestCasesFormat=function(t){for(var x=0;x<t.length;x++){var item=t[x];item.sample_stdin_url&&(item.stdin_url=item.sample_stdin_url,delete item.sample_stdin_url),item.sample_stdout_url&&(item.stdout_url=item.sample_stdout_url,delete item.sample_stdout_url)}},$scope.getCommunityAnalytics=function(gangId,start_date,end_date){function getDates(startDate,stopDate){for(var dateArray=new Array,currentDate=startDate;currentDate>=stopDate;)dateArray.push(currentDate),currentDate=currentDate.substractDays(1);return dateArray}function gd(year,month,day){return new Date(year,month-1,day).getTime()}function useUpdatedValue2(){function Comparator(a,b){return a[1]==b[1]?0:a[1]<b[1]?1:-1}angular.forEach(month_dates,function(item,key){$scope.data_comm[key]=[item,0]});var today=month_dates[0];angular.forEach($scope.data_comm,function(item,index){angular.forEach($scope.getMemberActivityDayData,function(value,key){item[0]==key&&(item[1]=value)}),item[0]==today&&($scope.todayRegistrations=item[1]);var newdt=item[0].split("-");newdt[2]=parseInt(newdt[2])+1,$scope.data1_comm.push([gd(newdt[0],newdt[1],newdt[2]),item[1]])}),angular.forEach($scope.getMemberActivityAllData.tags,function(value,key){$scope.skilltags.push([key,value])}),$scope.skill_result=$scope.skilltags.sort(Comparator),$scope.skilltag_comm=[];for(var i=0;i<5;i++)$scope.skilltag_comm.push($scope.skill_result[i]);angular.forEach($scope.skilltag_comm,function(val,key){angular.forEach($scope.tags_comm,function(item){val[0]==item.id&&$scope.skillCount_comm.push([item.name,val[1]])})}),$scope.genderData2_comm=[{label:"Male",data:$scope.getMemberActivityAllData.gender[0],color:"#e74c3c"},{label:"Female",data:$scope.getMemberActivityAllData.gender[1],color:"#27ae60"},{label:"Others",data:$scope.getMemberActivityAllData.gender[2],color:"#3498db"},{label:"N/A",data:$scope.getMemberActivityAllData.gender[-1],color:"#f1c40f"}],$scope.genderOptions2_comm={series:{pie:{show:!0}},grid:{hoverable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!1}},$scope.profData_comm=[{label:"Student",data:$scope.getMemberActivityAllData.profession[0],color:"#e74c3c"},{label:"Professional",data:$scope.getMemberActivityAllData.profession[1],color:"#27ae60"},{label:"N/A",data:$scope.getMemberActivityAllData.profession[-1],color:"#3498db"}],$scope.profOptions_comm={series:{pie:{show:!0}},grid:{hoverable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!1}},$scope.skillData_comm=[{label:$scope.skillCount_comm[0][0],data:$scope.skillCount_comm[0][1],color:"#e74c3c"},{label:$scope.skillCount_comm[1][0],data:$scope.skillCount_comm[1][1],color:"#27ae60"},{label:$scope.skillCount_comm[2][0],data:$scope.skillCount_comm[2][1],color:"#3498db"},{label:$scope.skillCount_comm[3][0],data:$scope.skillCount_comm[3][1],color:"#f1c40f"},{label:$scope.skillCount_comm[4][0],data:$scope.skillCount_comm[4][1],color:"#bababa"}],$scope.skillOptions_comm={series:{pie:{show:!0,innerRadius:.5}},grid:{hoverable:!0},tooltip:!0,tooltipOpts:{content:"%p.0%, %s",shifts:{x:20,y:0},defaultTheme:!1}}}Date.prototype.substractDays=function(days){var dat=new Date(this.valueOf());return dat.setDate(dat.getDate()-days),dat};var month_dates=[],dateArray=getDates(new Date,(new Date).substractDays(30));for(i=0;i<dateArray.length;i++){var dayi=dateArray[i].getDate();dayi<10&&(dayi="0"+dayi);var moni=dateArray[i].getMonth()+1;moni<10&&(moni="0"+moni);var yeari=dateArray[i].getFullYear(),datei=yeari+"-"+moni+"-"+dayi;month_dates.push(datei)}start_date||(start_date=month_dates[month_dates.length-1]+"%2020:20:19%2B00:00"),end_date||(end_date=month_dates[0]+"%2020:20:19%2B00:00"),$scope.todayRegistrations="0";var activityMemberDataUrl=$scope.baseUrl+"/users/gang/member_details?gang_id="+gangId+"&start_date="+start_date+"&end_date="+end_date+"&data_filter=day",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.getMemberActivityDayData={},$scope.getMemberActivityAllData="",$scope.tags_comm=[],$scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.loggedIn&&$http.get(activityMemberDataUrl,{headers:headers}).success(function(response){$scope.getMemberActivityAllData=response.data,$scope.getMemberActivityDayData=response.data.day_data,$scope.allyearsexp={};var val0=0,val12=0,val23=0,val34=0,val45=0,val56=0,val67=0,val78=0,val8=0;angular.forEach($scope.getMemberActivityAllData.years_of_experience,function(value,key){-1==key&&($scope.allyearsexp["N/A"]=value),key<1&&-1!=key&&(val0+=value,$scope.allyearsexp[0]=val0),key>=1&&key<2&&(val12+=value,$scope.allyearsexp["1-2"]=val12),key>=2&&key<3&&(val23+=value,$scope.allyearsexp["2-3"]=val23),key>=3&&key<4&&(val34+=value,$scope.allyearsexp["3-4"]=val34),key>=4&&key<5&&(val45+=value,$scope.allyearsexp["4-5"]=val45),key>=5&&key<6&&(val56+=value,$scope.allyearsexp["5-6"]=val56),key>=6&&key<7&&(val67+=value,$scope.allyearsexp["6-7"]=val67),key>=7&&key<8&&(val78+=value,$scope.allyearsexp["7-8"]=val78),key>=8&&(val8+=value,$scope.allyearsexp["8+"]=val8)});var getTagsUrl=$scope.baseUrl+"/tags";$http.get(getTagsUrl,{headers:headers}).success(function(response){$scope.tags_comm=response.data,useUpdatedValue2()})}),$scope.data2_comm=$scope.data1_comm,$scope.dataset_comm=[{label:"Followers Active",grow:{stepMode:"linear"},data:$scope.data2_comm,color:"#1ab394",bars:{show:!0,align:"center",barWidth:5184e4,lineWidth:0}},{label:"Followers",grow:{stepMode:"linear"},data:$scope.data1_comm,yaxis:2,color:"#1C84C6",lines:{lineWidth:1,show:!0,fill:!0,fillColor:{colors:[{opacity:.2},{opacity:.2}]}}}],$scope.options_comm={grid:{hoverable:!0,clickable:!0,tickColor:"#d5d5d5",borderWidth:0,color:"#d5d5d5"},colors:["#1ab394","#464f88"],tooltip:!0,xaxis:{mode:"time",tickSize:[3,"day"],tickLength:0,axisLabel:"Date",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:10,color:"#d5d5d5"},yaxes:[{position:"left",color:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:3},{position:"right",color:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:" Arial",axisLabelPadding:67}],legend:{noColumns:1,labelBoxBorderColor:"#d5d5d5",position:"nw"}}},$scope.raiseLowCreditError=function(){SweetAlert.swal("Insufficient credits","Please reach us support@skillenza.com to continue","error")},$scope.activityRegister=function(change,id,title){var activityRegisterUrl=$scope.baseUrl+"/activity/apply",authToken=$cookies.get("Authorization"),headers={Authorization:authToken},registerData=JSON.stringify({activity_id:id});$http.post(activityRegisterUrl,registerData,{headers:headers}).success(function(response){if($scope.activityApplicationErr="",$scope.activitySlug=response.data.activity_data.slug,$scope.activityRegisterMessage=response.message,$scope.specActivityIsApplied=change,snackbar.create("Successfully applied",5e3),$scope.activityBtnChange=!0,$location.search()){var refrenceRoute=$location.search().r,refrenceVal=$location.search().rv,refrenceTogo=$location.search().reftg
;"activity"==refrenceRoute&&refrenceVal==response.data.activity_data.id&&"checkpoint"==refrenceTogo&&$timeout(function(){$state.go("index.checkpoints",{actvSlug:$scope.activitySlug})},500)}if($state.is("resetpassword")){try{$scope.secondaryDataDeny()}catch(e){}$state.go("index.checkpoints",{actvSlug:$scope.activitySlug})}if($state.is("index.specChallenge")){try{$scope.secondaryDataDeny()}catch(e){}$timeout(function(){$state.go("index.checkpoints",{actvSlug:$scope.activitySlug})},2e3)}else{try{$scope.secondaryDataDeny()}catch(e){}$state.go("index.checkpoints",{actvSlug:$scope.activitySlug})}}).error(function(data,status,headers,config){data.data?($scope.sortedSecondaryUserDataReq=[],angular.forEach(data.data,function(item){2!=item.type&&3!=item.type||($scope.sortedSecondaryUserDataReq.push(item),$scope.activityIdForModel=item.activity_id)}),$scope.secondaryDataModal($scope.sortedSecondaryUserDataReq,$scope.activityIdForModel)):($scope.activityApplicationErr=data.errors,$timeout(function(){$state.is("user.secondary")&&$state.go("index.challenges",{reload:!0})},3e3))})},$scope.secondaryDataModal=function(data,id,title){$scope.$modalInstance=$modal.open({templateUrl:"views/secondary_data_activity.68517bcf.html",resolve:{loadPlugin:function($ocLazyLoad){return $ocLazyLoad.load([{files:["/node_modules/@bower_components/jasny-bootstrap/dist/js/jasny-bootstrap.min.js","/node_modules/@bower_components/jasny-bootstrap/dist/css/jasny-bootstrap.min.css"]},{insertBefore:"#loadBefore",name:"localytics.directives",files:["/node_modules/@bower_components/chosen/chosen.min.css","/node_modules/@bower_components/chosen/chosen.jquery.min.js","/node_modules/@bower_components/chosen/chosen.proto.min.js"]},{name:"ui.switchery",files:["/node_modules/@bower_components/switchery/dist/switchery.min.css","/node_modules/@bower_components/switchery/dist/switchery.min.js","/node_modules/@bower_components/ng-switchery/src/ng-switchery.js"]}])}},controller:function($scope,$modalInstance){$scope.secondaryDataUser=data,$scope.secondaryDataApplicationId=id,$scope.getTagsSorted(),$scope.secondaryFilterFieldIds=$scope.secondaryDataUser.map(function(u){var result={};u.member_detail_field_id;return 15==u.member_detail_field_id||24==u.member_detail_field_id||30==u.member_detail_field_id?(result.id=u.member_detail_field_id,result.value=JSON.parse(u.value)):(result.id=u.member_detail_field_id,result.value=u.value),result}),$scope.secondaryDataDeny=function(){$modalInstance.close()}},size:"md",windowClass:"animated fadeIn",scope:$scope})},$scope.getTagsSorted=function(){$timeout(function(){var typing_timer2=null;$(".input-group .chosen-container.chosen-container-multi .search-field input").keypress(function(e){$(this).unbind("keyup").bind("keyup",function(e){var searchStr=$(this).val();typing_timer2&&clearTimeout(typing_timer2),typing_timer=setTimeout(function(){searchStr.length>0&&$scope.searchTagUser(searchStr)},1e3)})})},2e3)},$scope.blah=function(){},$scope.favoriteActivity=function(actID){var favoriteActivityUrl=$scope.baseUrl+"/activity/favourite",authToken=$cookies.get("Authorization"),headers={Authorization:authToken},favData=JSON.stringify({activity_id:actID});$http.post(favoriteActivityUrl,favData,{headers:headers}).success(function(response){snackbar.create("Favorite Marked",5e3)}).error(function(data,status,headers,config){snackbar.create(data.error,5e3)})},$scope.Manualinput={},$scope.Manualdate={},$scope.Manualradios={},$scope.Manualcheckboxes={},$scope.Manualselect={},$scope.Manualrating={},$scope.Manualmultiple={},$scope.Manualdate={},$scope.Manualtextarea={},$scope.manual_file_url={},$scope.ManualUrl={},$scope.uneInput={},$scope.uneDate={},$scope.uneRadios={},$scope.uneCheckboxes={},$scope.uneSelect={},$scope.uneRating={},$scope.uneMultiple={},$scope.uneTextarea={},$scope.une_file_url={},$scope.uneUrl={},$scope.dsSubmissionFile=null,$scope.cp_file=null,$rootScope.allLanguages=null,$scope.selectedLang=null,$scope.ProblemFull=[],$scope.checkinCode=null,$scope.particularLanguages=[],$scope.allLanguages={data:[{id:1,name:"Python2",visibility:!0,ext:"py",ace_mode:"python"},{id:2,name:"Python3",visibility:!0,ext:"py",ace_mode:"python"},{id:3,name:"Ruby",visibility:!0,ext:"rb",ace_mode:"ruby"},{id:4,name:"Clojure",visibility:!0,ext:"clj",ace_mode:"clojure"},{id:5,name:"PHP5",visibility:!0,ext:"php",ace_mode:"php"},{id:6,name:"JavaScript",visibility:!0,ext:"js",ace_mode:"javascript"},{id:7,name:"Scala",visibility:!0,ext:"scala",ace_mode:"scala"},{id:8,name:"Go",visibility:!0,ext:"go",ace_mode:"golang"},{id:12,name:"C",visibility:!0,ext:"c",ace_mode:"c_cpp"},{id:13,name:"Bash",visibility:!0,ext:"sh",ace_mode:"bash"},{id:16,name:"PERL",visibility:!0,ext:"pl",ace_mode:"perl"},{id:17,name:"R",visibility:!0,ext:"r",ace_mode:"r"},{id:19,name:"Erlang",visibility:!0,ext:"erl",ace_mode:"erlang"},{id:20,name:"Haskell",visibility:!0,ext:"hs",ace_mode:"haskell"},{id:29,name:"Fortran",visibility:!0,ext:"f",ace_mode:"fortran"},{id:34,name:"Rust",visibility:!0,ext:"rs",ace_mode:"rust"},{id:38,name:"Java8",visibility:!0,ext:"java",ace_mode:"java"},{id:39,name:"C++",visibility:!0,ext:"cpp",ace_mode:"c_cpp"},{id:44,name:"PHP7",visibility:!0,ext:"php",ace_mode:"php"},{id:45,name:"C#",visibility:!0,ext:"cs",ace_mode:"csharp"},{id:46,name:"Swift",visibility:!0,ext:"swift",ace_mode:"swift"},{id:47,name:"Java9",visibility:!0,ext:"java",ace_mode:"java"},{id:48,name:"Kotlin",visibility:!0,ext:"kt",ace_mode:"kotlin"},{id:49,name:"Postgres",visibility:!0,ext:"sql",ace_mode:"sql"},{id:50,name:"Python2-extra",visibility:!0,ext:"py",ace_mode:"python"},{id:51,name:"Python3-extra",visibility:!0,ext:"py",ace_mode:"python"}]};var allLanguagesMap={};angular.forEach($scope.allLanguages.data,function(item){allLanguagesMap[item.id]={name:item.name,ace_mode:item.ace_mode}}),$scope.getFileFromText=function(content,langid){var ext=$scope.allLanguagesMap[langid].ext,content=content,blob=new Blob([content],{type:ext});$scope.urltobeDownloaded=(window.URL||window.webkitURL).createObjectURL(blob)},$scope.allLanguagesMap=allLanguagesMap,$scope.getContent=function(conurl){return new Promise(function(resolve,reject){try{$http.get(conurl,{headers:headers}).then(function(response){resolve(response)})}catch(e){reject(e)}})},$scope.timerRunning=!1,$scope.startTimer=function(){$scope.$broadcast("timer-start"),$scope.timerRunning=!0},$scope.$on("timer-tick",function(event,args){$scope.pollingTime=args.millis/1e3}),$scope.getProblems=function(){var getCheckPointUrl=null;$scope.timerRunning=!1,$scope.chckpointID=$stateParams.chckpointID;var specProblemID=$stateParams.q,getCheckPointUrl=$scope.baseUrl+"/activity/problem/values?checkpoint_id="+$scope.chckpointID+"&serve=true";specProblemID&&(getCheckPointUrl=$scope.baseUrl+"/activity/problem/values?checkpoint_id="+$scope.chckpointID+"&serve=true&problem_id="+specProblemID);var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getCheckPointUrl,{headers:headers}).success(function(response){$scope.problem=response.data,$scope.problem_general=response.data.general,$scope.problems_stack=$scope.problem_general.all_problem_data,specProblemID?$scope.problems_stack.map(function(u){u.problem_id==specProblemID&&($scope.objectiveProblemNumber=$scope.problems_stack.indexOf(u))}):$scope.objectiveProblemNumber=0,$scope.problems_attempted=$scope.problem_general.total_attempted,$scope.time_remaining=$scope.problem_general.time_remaining,$scope.time_remaining>0?($scope.time_remaining=60*Number($scope.problem_general.time_remaining),$scope.startTimer(),$scope.problemCTADisabled=!1):($scope.time_remaining=0,$scope.problemCTADisabled=!0),$scope.total_problems=$scope.problem_general.total_questions,$scope.problem_d=response.data.problem_data,$scope.multipleChoiceQuestion=$scope.problem_d.multiple_choice;var problemId=$scope.problem_d.problem_id,problemData=$scope.problem_d.problem_data;$scope.problemLabel=$scope.problem_d.checkpoint_label,$scope.chkpointTypeId=$scope.problem_d.checkpoint_type_id,6===$scope.problem_d.checkpoint_type_id&&($scope.checkinCode=btoa(JSON.stringify({member_id:$scope.selfId,problem_id:problemId})),$scope.checkinURL="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+$scope.checkinCode);var objective_problem_data={};if(angular.forEach(problemData,function(setupField){if($scope.problemDetailValues=setupField,1==setupField.problem_setup_field_id)objective_problem_data.problemTitle=setupField.value;else if(2==setupField.problem_setup_field_id)objective_problem_data.problemBody=setupField.value;else if(3==setupField.problem_setup_field_id)objective_problem_data.problemOptions=setupField.values;else if(4==setupField.problem_setup_field_id)objective_problem_data.problemAnswer=setupField.values;else if(5==setupField.problem_setup_field_id)objective_problem_data.problemExplaination=setupField.value;else if(6==setupField.problem_setup_field_id)objective_problem_data.problemPenalty=setupField.value;else if(7==setupField.problem_setup_field_id)objective_problem_data.problemWeight=setupField.value;else if(8==setupField.problem_setup_field_id)objective_problem_data.problemTags=setupField.values;else if(9==setupField.problem_setup_field_id)$scope.cpTitle=setupField.value;else if(10==setupField.problem_setup_field_id)$scope.cpBody=setupField.value;else if(11==setupField.problem_setup_field_id){var cpSampleTestCases;cpSampleTestCases=setupField.values.sample_stdin_url?[{stdin_url:setupField.values.sample_stdin_url||setupField.values.stdin_url,stdout_url:setupField.values.sample_stdout_url||setupField.values.stdin_url,extra_url:setupField.values.extra_url||setupField.values.extra_url,stdin:"",stdout:""}]:$scope.to_array(setupField.values),$scope.handleTestCasesFormat(cpSampleTestCases),angular.forEach(cpSampleTestCases,function(value,key){$http.get(value.stdin_url).success(function(response){cpSampleTestCases[key].stdin=response}),$http.get(value.stdout_url).success(function(response){cpSampleTestCases[key].stdout=response})}),$scope.cpSampleTestCases=cpSampleTestCases}else if(13==setupField.problem_setup_field_id)$scope.cpLIds=setupField.values;else if(36==setupField.problem_setup_field_id)$scope.teamTitle=setupField.value;else if(37==setupField.problem_setup_field_id)$scope.teamBody=setupField.value;else if(38==setupField.problem_setup_field_id)$scope.minimumTeamSize=setupField.value;else if(47==setupField.problem_setup_field_id)$scope.maxTeamSize=setupField.value;else if(27==setupField.problem_setup_field_id)$scope.manualTitle=setupField.value;else if(28==setupField.problem_setup_field_id)$scope.manualBody=setupField.value;else if(30==setupField.problem_setup_field_id){$scope.manualForm=setupField.values;$scope.manualForm.map(function(u){u.required||(u.required=!1)})}else 34==setupField.problem_setup_field_id?$scope.checkinTitle=setupField.value:35==setupField.problem_setup_field_id?$scope.checkinBody=setupField.value:18==setupField.problem_setup_field_id?$scope.dsTitle=setupField.value:19==setupField.problem_setup_field_id?$scope.dsBody=setupField.value:20==setupField.problem_setup_field_id?$scope.dsEvaluationAlgorithmId=setupField.value:21==setupField.problem_setup_field_id?$scope.dsTrain=setupField.value:22==setupField.problem_setup_field_id?$scope.dsTest=setupField.value:23==setupField.problem_setup_field_id?$scope.dsSample=setupField.value:25==setupField.problem_setup_field_id?$scope.dsWeightFactor=setupField.value:26==setupField.problem_setup_field_id?$scope.dsTagIds=setupField.value:46==setupField.problem_setup_field_id?Object.keys(setupField.values).length>0&&($scope.dsEvalAlgorithmExtra=setupField.values):48==setupField.problem_setup_field_id?$scope.dsSubmissionLimit=setupField.value:31==setupField.problem_setup_field_id?$scope.uneTitle=setupField.value:32==setupField.problem_setup_field_id?$scope.uneBody=setupField.value:33==setupField.problem_setup_field_id&&($scope.uneForm=setupField.values)}),$scope.objectiveProblem=[{title:objective_problem_data.problemTitle,body:objective_problem_data.problemBody,options:objective_problem_data.problemOptions,answer:objective_problem_data.problemAnswer,weightage:objective_problem_data.problemWeight,tags:objective_problem_data.problemTags,penalty:objective_problem_data.problemPenalty,explaination:objective_problem_data.problemExplaination,problemId:problemId}],$scope.ProblemFull.push({title:$scope.problemTitle,body:$scope.problemBody,options:$scope.problemOptions,answer:$scope.problemAnswer,weightage:$scope.problemWeight,tags:$scope.problemTags,penalty:$scope.problemPenalty,explaination:$scope.problemExplaination,problemId:problemId,cptitle:$scope.cpTitle,cpbody:$scope.cpBody,cplangids:$scope.cpLIds,cp_sample_testcases:$scope.cpSampleTestCases,teamtitle:$scope.teamTitle,teambody:$scope.teamBody,minTeamSize:$scope.minimumTeamSize,maxTeamSize:$scope.maxTeamSize,manual:[{manualTitle:$scope.manualTitle,manualBody:$scope.manualBody,manualForm:$scope.manualForm}],datascience:[{dsTitle:$scope.dsTitle,dsBody:$scope.dsBody,dsEvaluationAlgorithmId:$scope.dsEvaluationAlgorithmId,dsTrain:$scope.dsTrain,dsTest:$scope.dsTest,dsSample:$scope.dsSample,dsWeightFactor:$scope.dsWeightFactor,dsTagIds:$scope.dsTagIds,dsSubmissionLimit:$scope.dsSubmissionLimit,dsEvalAlgorithmExtra:$scope.dsEvalAlgorithmExtra}],unevaluated:[{uneTitle:$scope.uneTitle,uneBody:$scope.uneBody,uneForm:$scope.uneForm}],checkinTitle:$scope.checkinTitle,checkinBody:$scope.checkinBody,checkinUrl:$scope.checkinURL,checkinCode:$scope.checkinCode}),$scope.problem_d.submission_data&&(1==$scope.problem_d.checkpoint_type_id&&($scope.selected={result:{}},$scope.submitted={submissions:{values:[]}},angular.forEach($scope.problem_d.submission_data.values,function(item){$scope.submitted.submissions.values.push(item)}),$scope.selected[response.data.problem_data.problem_id]=$scope.submitted,$scope.selected[response.data.problem_data.problem_id].submissions.values,Object.keys($scope.selected[response.data.problem_data.problem_id].submissions.values).length>0&&angular.forEach($scope.selected[response.data.problem_data.problem_id].submissions.values,function(item,key){-1==$scope.objectiveMulitpleSelectedHolder.indexOf(key)&&$scope.objectiveMulitpleSelectedHolder.push(key)})),4==$scope.problem_d.checkpoint_type_id&&angular.forEach($scope.problem_d.submission_data.values,function(item,key){angular.forEach(problemData,function(temp_single){if(30==temp_single.problem_setup_field_id){var ans_type=temp_single.values[key].type;"url"==ans_type?$scope.ManualUrl[key]=item:"text"==ans_type?$scope.Manualinput[key]=item:"date"==ans_type?$scope.Manualdate[key]=item:"rating"==ans_type?$scope.Manualrating[key]=item:"radio"==ans_type?$scope.Manualradios[key]=item:"select"==ans_type?$scope.Manualselect[key]=item[0]:"multiple"==ans_type?$scope.Manualmultiple[key]=item:"textarea"==ans_type?$scope.Manualtextarea[key]=item:"checkboxes"==ans_type?$scope.Manualcheckboxes[key]=item:"file"==ans_type?$scope.manual_file_url[key]=item:"phone"==ans_type&&($scope.Manualinput[key]=item)}})}),5==$scope.problem_d.checkpoint_type_id&&angular.forEach($scope.problem_d.submission_data.values,function(item,key){angular.forEach(problemData,function(temp_single){if(33==temp_single.problem_setup_field_id){var ans_type=temp_single.values[key].type;"date"==ans_type?$scope.uneDate[key]=item:"rating"==ans_type?$scope.uneRating[key]=item:"radio"==ans_type?$scope.uneRadios[key]=item:"select"==ans_type?$scope.uneSelect[key]=item[0]:"multiple"==ans_type?$scope.uneMultiple[key]=item:"checkboxes"==ans_type?$scope.uneCheckboxes[key]=item:"file"==ans_type?$scope.une_file_url[key]=item:"phone"==ans_type?$scope.uneInput[key]=item:"url"==ans_type?$scope.uneUrl[key]=item:"text"==ans_type?$scope.uneInput[key]=item:"textarea"==ans_type&&($scope.uneTextarea[key]=item)}})}),3==$scope.problem_d.checkpoint_type_id&&$scope.problem_d.submission_data.length>0&&(angular.forEach($scope.problem_d.submission_data,function(item){$scope.dsSubmissionSet.push(item),$scope.dssubmissions_index[item.id]=item}),"object"==typeof $scope.problem_d.submission_data[0].score_data&&($scope.dsScore_data={},$scope.dsScore_data=$scope.problem_d.submission_data[0].score_data,Object.keys($scope.dsScore_data).length>0&&($scope.showDsResults=!0)),"object"==typeof $scope.problem_d.submission_data[0].values?($scope.dssubmission_clicked=$scope.problem_d.submission_data[0].id,$scope.dsSubmissionFile=$scope.problem_d.submission_data[0].values.submission_file):$scope.dssubmission_clicked=""),2==$scope.problem_d.checkpoint_type_id)){if($scope.problem_d.submission_data.length>0)if(angular.forEach($scope.problem_d.submission_data,function(item){0==item.mode&&$scope.submission_runs.push(item),1==item.mode&&$scope.submission_submits.push(item),$scope.submissions_index[item.id]=item}),"object"==typeof $scope.problem_d.submission_data[0].score_data&&($scope.problem_testcases=[],$scope.weightage_factors={},$scope.max_limits={},$scope.max_limits=$scope.problem_d.submission_data[0].score_data.evaluation_constants.max_limits,$scope.weightage_factors=$scope.problem_d.submission_data[0].score_data.evaluation_constants.weightage_factors,angular.forEach($scope.problem_d.submission_data[0].score_data.test_cases,function(beta){$scope.problem_testcases.push(beta)})),"object"==typeof $scope.problem_d.submission_data[0].values){$scope._clicked=$scope.problem_d.submission_data[0].id;var latest_submission=$scope.problem_d.submission_data[0].values;$scope.aceModel=latest_submission?latest_submission.code:""}else $scope.cpsubmission_clicked="";angular.forEach($scope.allLanguages.data,function(item){angular.forEach($scope.cpLIds,function(data){item.id==data&&$scope.particularLanguages.push(item)})}),$scope.problem_d.submission_data.length>0&&angular.forEach($scope.allLanguages.data,function(data){"object"==typeof $scope.problem_d.submission_data[0].values&&data.id==latest_submission.language&&($scope.selectedLang=data,$scope.modeChanged(data.ace_mode))})}}).error(function(data){$scope.noQuestions=data})};var result={};result={submissions:[]},$scope.manualSubmission=function(urls,input,date,rating,multiple,textarea,manualfile,radios,chkboxs,select,pid){var result={};$scope.showloader=!0;var submission_values={};angular.forEach(input,function(value,key){submission_values[key]=value}),angular.forEach(urls,function(value,key){submission_values[key]=value}),angular.forEach($scope.Manualdate,function(value,key){submission_values[key]=[moment(value).format()]}),angular.forEach(rating,function(value,key){submission_values[key]=value}),angular.forEach(multiple,function(value,key){submission_values[key]=value}),angular.forEach(textarea,function(value,key){submission_values[key]=value}),"string"==typeof manualfile?submission_values[0]=manualfile:angular.forEach($scope.manual_file_url,function(value,key){submission_values[key]=value}),angular.forEach(radios,function(value,key){submission_values[key]=value}),angular.forEach(chkboxs,function(value,key){submission_values[key]=value}),angular.forEach(select,function(value,key){submission_values[key]=[value]}),result={submissions:[]},submissionsPush={problem_id:pid,values:submission_values},result.submissions=[submissionsPush],$scope.chckpointID=$stateParams.chckpointID;var submissionUrl=$scope.baseUrl+"/activity/submission?checkpoint_id="+$scope.chckpointID,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};0==$scope.problemCTADisabled?$http.post(submissionUrl,result,{headers:headers}).success(function(response){$scope.showloader=!1,$scope.submitted=!0,angular.forEach($scope.problems_stack,function(item){item.problem_id==pid&&(item.has_attempted=1)}),snackbar.create("Success",3e3),$timeout(function(){$state.reload()},3e3),result={submissions:[]}}).error(function(data){$scope.showloader=!1,snackbar.create(data.error,3e3)}):snackbar.create("Take another challenge rather",5e3)},$scope.uneSubmission=function(uneinput,unetextarea,unefile,uneurl,unedate,uneradios,unerating,unecheckboxes,uneselect,unemultiple,pid){$scope.showloader=!0;var submission_values={};"string"==typeof unefile?submission_values[0]=unefile:angular.forEach($scope.une_file_url,function(value,key){submission_values[key]=value}),angular.forEach(uneinput,function(value,key){submission_values[key]=value}),angular.forEach(uneurl,function(value,key){submission_values[key]=value}),angular.forEach($scope.uneDate,function(value,key){submission_values[key]=[moment(value).format()]}),angular.forEach(unerating,function(value,key){submission_values[key]=value}),angular.forEach(unemultiple,function(value,key){submission_values[key]=value}),angular.forEach(uneradios,function(value,key){submission_values[key]=value}),angular.forEach(unecheckboxes,function(value,key){submission_values[key]=value}),angular.forEach(uneselect,function(value,key){submission_values[key]=[value]}),submissionsPush={problem_id:pid,values:submission_values},result.submissions=[submissionsPush],$scope.chckpointID=$stateParams.chckpointID;var submissionUrl=$scope.baseUrl+"/activity/submission?checkpoint_id="+$scope.chckpointID,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};0==$scope.problemCTADisabled?$http.post(submissionUrl,result,{headers:headers}).success(function(response){$scope.showloader=!1,$scope.submitted=!0,snackbar.create("Thanks for your Response",3e3),result={submissions:[]}}).error(function(data){$scope.showloader=!1}):snackbar.create("Take another challenge rather",3e3)},$scope.putProblems=function(questn,opt,chckpointID){var result={submissions:[]},questionData=$scope.selected[opt].submissions.values;$scope.assign="string"==typeof questionData?[questionData]:questionData;var stack=$scope.objectiveProblem[questn];angular.forEach(stack,function(questionData){submissionsPush={problem_id:opt,values:$scope.assign}}),result.submissions.push(submissionsPush),$scope.chckpointID=$stateParams.chckpointID;var submissionUrl=$scope.baseUrl+"/activity/submission?checkpoint_id="+chckpointID,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};0==$scope.problemCTADisabled?$http.post(submissionUrl,result,{headers:headers}).success(function(response){$scope.problems_stack.map(function(u,key){u.problem_id==opt&&(u.has_attempted=1)}),$scope.submissionResponse=response,snackbar.create("Your answer has been submitted",3e3),$scope.nextProblems(opt,chckpointID)}).error(function(data){snackbar.create(data.error,3e3)}):snackbar.create("take another challenge rather",5e3)},$scope.specProblem=function(pid,ckid,type){var jumpindex,jump_obj,rotation_problem_id;return"nav"==type?angular.forEach($scope.problems_stack,function(item){item.problem_id==pid&&(jumpindex=$scope.problems_stack.indexOf(item),jump_obj=$scope.problems_stack[jumpindex],rotation_problem_id=jump_obj.problem_id,$scope.objectiveProblemNumber=jumpindex,$state.go(".",{q:pid},{notify:!1}))}):angular.forEach($scope.problems_stack,function(item){if(item.problem_id==pid){var index=$scope.problems_stack.indexOf(item),arraylen=$scope.problems_stack.length;"prev"==type?jumpindex=(arraylen+index-1)%arraylen:(jumpindex=(index+1)%arraylen,item.has_skipped=1),jump_obj=$scope.problems_stack[jumpindex],rotation_problem_id=jump_obj.problem_id,$scope.objectiveProblemNumber=$scope.problems_stack.indexOf(jump_obj),$state.go(".",{q:jump_obj.problem_id},{notify:!1})}}),rotation_problem_id},$scope.nextProblems=function(pr_id,ckId,cktype,prev){$scope.Manualinput={},$scope.Manualdate={},$scope.Manualradios={},$scope.Manualcheckboxes={},$scope.Manualselect={},$scope.Manualrating={},$scope.Manualmultiple={},$scope.Manualtextarea={},$scope.manual_file_url={},$scope.ManualUrl={},$scope.uneInput={},$scope.uneDate={},$scope.uneRadios={},$scope.uneCheckboxes={},$scope.uneSelect={},$scope.uneRating={},$scope.uneMultiple={},$scope.uneTextarea={},$scope.une_file_url={},$scope.uneUrl={},$scope.particularLanguages=[],$scope.submission_submits=[],$scope.submission_runs=[],$scope.aceModel="",$scope.selectedLang=null,$scope.problem_testcases=[],$scope.weightage_factors={},$scope.max_limits={},$scope.dsSubmissionFile=null,$scope.cp_file=null,$scope.showloader=!0;var rotation_problem_id;angular.forEach($scope.problems_stack,function(item){rotation_problem_id=4==cktype||5==cktype||3==cktype||2==cktype?pr_id:$scope.specProblem(pr_id,ckId,prev)});var next_question_url=$scope.baseUrl+"/activity/problem/values?checkpoint_id="+ckId+"&serve=true&problem_id="+rotation_problem_id,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(next_question_url,{headers:headers}).success(function(response){$scope.theFile=null,$scope.manualForm&&$timeout(function(){$scope.manualForm.$setPristine()}),$scope.problems_attempted=response.data.general.total_attempted,$scope.multipleChoiceQuestion=response.data.problem_data.multiple_choice;var problemData=response.data.problem_data.problem_data,objective_problem_data={};if(angular.forEach(problemData,function(setupField){if($scope.problemDetailValues=setupField,1==setupField.problem_setup_field_id)objective_problem_data.problemTitle=setupField.value;else if(2==setupField.problem_setup_field_id)objective_problem_data.problemBody=setupField.value;else if(3==setupField.problem_setup_field_id)objective_problem_data.problemOptions=setupField.values;else if(4==setupField.problem_setup_field_id)objective_problem_data.problemAnswer=setupField.values;else if(5==setupField.problem_setup_field_id)objective_problem_data.problemExplaination=setupField.value;else if(6==setupField.problem_setup_field_id)objective_problem_data.problemPenalty=setupField.value;else if(7==setupField.problem_setup_field_id)objective_problem_data.problemWeight=setupField.value;else if(8==setupField.problem_setup_field_id)objective_problem_data.problemTags=setupField.values;else if(27==setupField.problem_setup_field_id)$scope.manualTitle=setupField.value;else if(28==setupField.problem_setup_field_id)$scope.manualBody=setupField.value;else if(30==setupField.problem_setup_field_id){$scope.manualForm=setupField.values;$scope.manualForm.map(function(u){u.required||(u.required=!1)})}else if(31==setupField.problem_setup_field_id)$scope.uneTitle=setupField.value;else if(32==setupField.problem_setup_field_id)$scope.uneBody=setupField.value;else if(33==setupField.problem_setup_field_id)$scope.uneForm=setupField.values;else if(18==setupField.problem_setup_field_id)$scope.dsTitle=setupField.value;else if(19==setupField.problem_setup_field_id)$scope.dsBody=setupField.value;else if(20==setupField.problem_setup_field_id)$scope.dsEvaluationAlgorithmId=setupField.value;else if(21==setupField.problem_setup_field_id)$scope.dsTrain=setupField.value;else if(22==setupField.problem_setup_field_id)$scope.dsTest=setupField.value;else if(23==setupField.problem_setup_field_id)$scope.dsSample=setupField.value;else if(25==setupField.problem_setup_field_id)$scope.dsWeightFactor=setupField.value;else if(26==setupField.problem_setup_field_id)$scope.dsTagIds=setupField.value;else if(46==setupField.problem_setup_field_id)Object.keys(setupField.values).length>0&&($scope.dsEvalAlgorithmExtra=setupField.values);else if(48==setupField.problem_setup_field_id)$scope.dsSubmissionLimit=setupField.value;else if(9==setupField.problem_setup_field_id)$scope.cpTitle=setupField.value;else if(10==setupField.problem_setup_field_id)$scope.cpBody=setupField.value;else if(11==setupField.problem_setup_field_id){var cpSampleTestCases;cpSampleTestCases=setupField.values.sample_stdin_url?[{stdin_url:setupField.values.sample_stdin_url||setupField.values.stdin_url,stdout_url:setupField.values.sample_stdout_url||setupField.values.stdin_url,extra_url:setupField.values.extra_url||setupField.values.extra_url,stdin:"",stdout:""}]:$scope.to_array(setupField.values),$scope.handleTestCasesFormat(cpSampleTestCases),angular.forEach(cpSampleTestCases,function(value,key){$http.get(value.stdin_url).success(function(response){cpSampleTestCases[key].stdin=response}),$http.get(value.stdout_url).success(function(response){cpSampleTestCases[key].stdout=response})}),$scope.cpSampleTestCases=cpSampleTestCases}else 1==setupField.problem_setup_field_id?$scope.cpBody=setupField.value:13==setupField.problem_setup_field_id&&($scope.cpLIds=setupField.values)}),$scope.objectiveProblem=[{title:objective_problem_data.problemTitle,body:objective_problem_data.problemBody,options:objective_problem_data.problemOptions,answer:objective_problem_data.problemAnswer,weightage:objective_problem_data.problemWeight,tags:objective_problem_data.problemTags,penalty:objective_problem_data.problemPenalty,explaination:objective_problem_data.problemExplaination,problemId:rotation_problem_id}],$scope.ProblemFull=[{title:$scope.problemTitle,body:$scope.problemBody,options:$scope.problemOptions,answer:$scope.problemAnswer,weightage:$scope.problemWeight,tags:$scope.problemTags,penalty:$scope.problemPenalty,explaination:$scope.problemExplaination,problemId:rotation_problem_id,cptitle:$scope.cpTitle,cpbody:$scope.cpBody,cp_sample_testcases:$scope.cpSampleTestCases,cplangids:$scope.cpLIds,manual:[{manualTitle:$scope.manualTitle,manualBody:$scope.manualBody,manualForm:$scope.manualForm}],datascience:[{dsTitle:$scope.dsTitle,dsBody:$scope.dsBody,dsEvaluationAlgorithmId:$scope.dsEvaluationAlgorithmId,dsTrain:$scope.dsTrain,dsTest:$scope.dsTest,dsSample:$scope.dsSample,dsWeightFactor:$scope.dsWeightFactor,dsTagIds:$scope.dsTagIds,dsSubmissionLimit:$scope.dsSubmissionLimit,dsEvalAlgorithmExtra:$scope.dsEvalAlgorithmExtra}],unevaluated:[{uneTitle:$scope.uneTitle,uneBody:$scope.uneBody,uneForm:$scope.uneForm}]}],response.data.problem_data.submission_data&&(1==response.data.problem_data.checkpoint_type_id&&($scope.submitted={submissions:{values:[]}},angular.forEach(response.data.problem_data.submission_data.values,function(data){$scope.submitted.submissions.values.push(data)}),$scope.selected[response.data.problem_data.problem_id]=$scope.submitted,$scope.objectiveMulitpleSelectedHolder=[],Object.keys($scope.selected[response.data.problem_data.problem_id]).length>0&&angular.forEach($scope.selected[response.data.problem_data.problem_id].submissions.values,function(item,key){-1==$scope.objectiveMulitpleSelectedHolder.indexOf(key)&&$scope.objectiveMulitpleSelectedHolder.push(key)})),4==response.data.problem_data.checkpoint_type_id&&angular.forEach(response.data.problem_data.submission_data.values,function(data,key){angular.forEach(response.data.problem_data.problem_data,function(temp_single){if(30==temp_single.problem_setup_field_id&&void 0!==temp_single.values[key]){var ans_type=temp_single.values[key].type;"url"==ans_type&&($scope.ManualUrl[key]=data),"text"!=ans_type&&"phone"!=ans_type&&"email"!=ans_type||($scope.Manualinput[key]=data),"number"==ans_type&&($scope.Manualinput[key]=Number(data)),"date"==ans_type&&($scope.Manualdate[key]=data),"rating"==ans_type&&($scope.Manualrating[key]=data),"radio"==ans_type&&($scope.Manualradios[key]=data),"select"==ans_type&&($scope.Manualselect[key]=data[0]),"multiple"==ans_type&&($scope.Manualmultiple[key]=data[0]),"textarea"==ans_type&&($scope.Manualtextarea[key]=data),"checkboxes"==ans_type&&($scope.Manualcheckboxes[key]=data),"file"==ans_type&&($scope.manual_file_url[key]=data[0])}})}),5==response.data.problem_data.checkpoint_type_id&&angular.forEach(response.data.problem_data.submission_data.values,function(data,key){angular.forEach(response.data.problem_data.problem_data,function(temp_single){if(33==temp_single.problem_setup_field_id&&void 0!==temp_single.values[key]){var ans_type=temp_single.values[key].type;"date"==ans_type&&($scope.uneDate[key]=data),"rating"==ans_type&&($scope.uneRating[key]=data),"radio"==ans_type&&($scope.uneRadios[key]=data),"select"==ans_type&&($scope.uneSelect[key]=data[0]),"multiple"==ans_type&&($scope.uneMultiple[key]=data[0]),"checkboxes"==ans_type&&($scope.uneCheckboxes[key]=data),"file"==ans_type&&($scope.une_file_url[key]=data[0]),"textarea"==ans_type&&($scope.uneTextarea[key]=data),
"url"==ans_type&&($scope.ManualUrl[key]=data),"text"!=ans_type&&"phone"!=ans_type&&"email"!=ans_type||($scope.uneInput[key]=data),"text"!=ans_type&&"phone"!=ans_type&&"email"!=ans_type||($scope.uneInput[key]=data),"number"==ans_type&&($scope.uneInput[key]=Number(data))}})}),3==response.data.problem_data.checkpoint_type_id&&response.data.problem_data.submission_data.length>0&&($scope.dsSubmissionSet=[],angular.forEach(response.data.problem_data.submission_data,function(item){$scope.dsSubmissionSet.push(item),$scope.dssubmissions_index[item.id]=item}),"object"==typeof response.data.problem_data.submission_data[0].score_data&&($scope.dsScore_data={},$scope.dsScore_data=response.data.problem_data.submission_data[0].score_data,Object.keys($scope.dsScore_data).length>0&&($scope.showDsResults=!0)),"object"==typeof response.data.problem_data.submission_data[0].values?($scope.dssubmission_clicked=response.data.problem_data.submission_data[0].id,$scope.dsSubmissionFile=response.data.problem_data.submission_data[0].values.submission_file):$scope.dssubmission_clicked=""),2==response.data.problem_data.checkpoint_type_id)){if(response.data.problem_data.submission_data.length>0)if(angular.forEach(response.data.problem_data.submission_data,function(item){0==item.mode&&$scope.submission_runs.push(item),1==item.mode&&$scope.submission_submits.push(item),$scope.submissions_index[item.id]=item}),"object"==typeof response.data.problem_data.submission_data[0].score_data&&($scope.problem_testcases=[],$scope.weightage_factors={},$scope.max_limits={},$scope.max_limits=response.data.problem_data.submission_data[0].score_data.evaluation_constants.max_limits,$scope.weightage_factors=response.data.problem_data.submission_data[0].score_data.evaluation_constants.weightage_factors,angular.forEach(response.data.problem_data.submission_data[0].score_data.test_cases,function(beta){$scope.problem_testcases.push(beta)})),"object"==typeof response.data.problem_data.submission_data[0].values){$scope.cpsubmission_clicked=response.data.problem_data.submission_data[0].id;var latest_submission=response.data.problem_data.submission_data[0].values;$scope.aceModel=latest_submission?latest_submission.code:""}else $scope.cpsubmission_clicked="";angular.forEach($scope.allLanguages.data,function(item){angular.forEach($scope.cpLIds,function(data){item.id==data&&$scope.particularLanguages.push(item)})}),response.data.problem_data.submission_data.length>0&&angular.forEach($scope.allLanguages.data,function(data){"object"==typeof response.data.problem_data.submission_data[0].values&&data.id==latest_submission.language&&($scope.selectedLang=data,$scope.modeChanged(data.ace_mode))})}$scope.showloader=!1})},$scope.aceLoaded=function(_editor){$scope.aceSession=_editor.getSession(),$scope.oPositionObject=_editor.getSession().selection.getCursor(),_editor.on("changeSession",function(){}),_editor.setReadOnly(!1)},$scope.modeChanged=function(item){$rootScope.selectedVal=item},$scope.aceOption={selectedVal:angular.lowercase($rootScope.selectedVal),onLoad:function(editor){editor.setTheme("ace/theme/twilight"),editor.setOptions({showGutter:!0,showPrintMargin:!1}),$scope.modeChanged=function(){editor.getSession().setMode("ace/mode/"+$scope.selectedVal)}}},$scope.aceChanged=function(_editor){$scope.oPositionObject=$scope.aceSession.selection.getCursor(),$rootScope.aceDocumentValue=$scope.aceSession.getDocument().getValue()},$scope.showContent=function($fileContent){$scope.aceModel=$fileContent},$scope.dsSubmission=function(pid,ckid,file){var result={submissions:[]};submissionsPush={problem_id:pid,value:"",values:{submission_file:file}},result.submissions.push(submissionsPush);var submissionUrl=$scope.baseUrl+"/activity/submission?checkpoint_id="+ckid,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};0==$scope.problemCTADisabled?$http.post(submissionUrl,result,{headers:headers}).success(function(response){file&&angular.forEach($scope.problems_stack,function(item){item.problem_id==pid&&(item.has_attempted=1)}),snackbar.create("Success",3e3);var empty_submission={id:response.data.submission_id,mode:0,score:0,score_data:!1,value:"",values:{}};$scope.dsSubmissionSet=$scope.dsSubmissionSet.concat(empty_submission),$scope.dssubmissions_index[response.data.submission_id]=empty_submission;var count=5;$scope.show_ds_loader=!0;var getsuburl=$scope.baseUrl+"/activity/submission?checkpoint_id="+$scope.chckpointID+"&submission_id="+response.data.submission_id,submission_interval=$interval(function(){$http.get(getsuburl,{headers:headers}).success(function(response){!1!==response.data.score_data?($scope.dssubmissions_index[response.data.id].score=response.data.score,$scope.dssubmissions_index[response.data.id].score_data=response.data.score_data,$scope.getolddsSubmissions(response.data.id,response.data),$scope.show_ds_loader=!1,$(setTimeout(function(){$("html, body").animate({scrollTop:$("#dsResults").position().top},"slow")},1e3)),$interval.cancel(submission_interval)):$scope.show_ds_loader=!0})},5e3,count)}).error(function(data){snackbar.create(data.error,3e3)}):snackbar.create("Take another challenge rather",3e3)},$scope.isValidEmail=function(email){var re=/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/i;return re.test(email)};var findMailRegex=/[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})/gi;$scope.getEmails=function(re,s){try{s=s.toLowerCase();for(var match=null,matches=[];match=re.exec(s);)matches.push(match[0]);return matches}catch(e){return[]}},$scope.removeDuplicatesFromArray=function(array){var uniqueArray=[];return angular.forEach(array,function(item,key){-1===uniqueArray.indexOf(item)&&uniqueArray.push(item)}),uniqueArray},$scope.ArraySort=function(arr){return arr.sort()},$scope.sendEmailInvites=function(activity_id,invites){var processed_emails=$scope.getEmails(findMailRegex,invites),uniqueArray=$scope.removeDuplicatesFromArray(processed_emails),sortedArray=$scope.ArraySort(uniqueArray),invite_arr={activity_id:activity_id,member_emails:sortedArray},inviteUrl=$scope.baseUrl+"/activity/invite",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(inviteUrl,invite_arr,{headers:headers}).success(function(response){snackbar.create("Success",3e3)}).error(function(data){snackbar.create(data.error,3e3)})},$scope.inviteByEmail=function(tid,emails){var processed_emails=$scope.getEmails(findMailRegex,emails),uniqueArray=$scope.removeDuplicatesFromArray(processed_emails),sortedArray=$scope.ArraySort(uniqueArray),inviteData=JSON.stringify({team_id:tid,member_emails:sortedArray}),inviteUrl=$scope.baseUrl+"/activity/team/invite/email",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(inviteUrl,inviteData,{headers:headers}).success(function(response){snackbar.create("Thanks, Invites Sent",3e3)}).error(function(data){snackbar.create(data.error,5e3)})},$scope.getolddsSubmissions=function(subid,sub){$scope.dssubmission_clicked="",$scope.dsScore_data={},"object"==typeof sub.values&&($scope.dssubmission_clicked=subid,$scope.dsSubmissionFile=sub.values.submission_file),"object"==typeof sub.score_data&&($scope.dsScore_data=sub.score_data),Object.keys($scope.dsScore_data).length>0&&($scope.showDsResults=!0)},$scope.getoldcpSubmissions=function(subid,sub){$scope.cpsubmission_clicked="","object"==typeof sub.values&&($scope.cpsubmission_clicked=subid,$scope.aceModel=sub.values.code,$scope.particularLanguages=[],angular.forEach($scope.allLanguages.data,function(item){angular.forEach($scope.cpLIds,function(data){item.id==data&&$scope.particularLanguages.push(item)})}),angular.forEach($scope.allLanguages.data,function(data){data.id===sub.values.language&&($scope.selectedLang=data,$scope.modeChanged(data.ace_mode))})),"object"==typeof sub.score_data&&Object.keys(sub.score_data).length>0&&($scope.problem_testcases=[],$scope.weightage_factors={},$scope.max_limits={},$scope.max_limits=sub.score_data.evaluation_constants.max_limits,$scope.weightage_factors=sub.score_data.evaluation_constants.weightage_factors,angular.forEach(sub.score_data.test_cases,function(beta){$scope.problem_testcases.push(beta)}))},$scope.cpSubmission=function(pid,ckid,code,langid,mode){var result={submissions:[]};submissionsPush={problem_id:ckid,values:{language:langid,code:pid},mode:mode},result.submissions.push(submissionsPush),$scope.chckpointID=$stateParams.chckpointID;var submissionUrl=$scope.baseUrl+"/activity/submission?checkpoint_id="+$scope.chckpointID,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};0==$scope.problemCTADisabled?langid?$http.post(submissionUrl,result,{headers:headers}).success(function(response){code&&langid&&($scope.problems_attempted<=$scope.problem_general.total_questions&&($scope.problems_attempted=$scope.problem_general.total_attempted+1),angular.forEach($scope.problems_stack,function(item){item.problem_id==ckid&&(item.has_attempted=1)}));var empty_submission={id:response.data.submission_id,mode:0,score:!1,score_data:!1,value:"",values:{}};0==mode?$scope.submission_runs=$scope.submission_runs.concat(empty_submission):$scope.submission_submits=$scope.submission_submits.concat(empty_submission),$scope.submissions_index[response.data.submission_id]=empty_submission,snackbar.create("Successfully submitted",3e3);var count=35;$scope.show_testcase_loader=!0;var getsuburl=$scope.baseUrl+"/activity/submission?checkpoint_id="+$scope.chckpointID+"&submission_id="+response.data.submission_id,submission_interval=$interval(function(){$http.get(getsuburl,{headers:headers}).success(function(response){!1!==response.data.score_data&&Object.keys(response.data.score_data).length>0?($scope.submissions_index[response.data.id].score=response.data.score,$scope.submissions_index[response.data.id].score_data=response.data.score_data,$scope.submissions_index[response.data.id].values=response.data.values,$scope.show_testcase_loader=!1,$(setTimeout(function(){$("html, body").animate({scrollTop:$("#testcasesSection").position().top},"slow")},1e3)),$scope.getoldcpSubmissions(response.data.id,response.data),$interval.cancel(submission_interval)):$scope.show_testcase_loader=!0})},5e3,count)}).error(function(data){snackbar.create(data.error,5e3)}):$scope.langNotSelected=!0:snackbar.create("Take another challenge rather",5e3)},$scope.startCheckpoint=function(ckId){var finishSubmissionUrl=$scope.baseUrl+"/activity/start?checkpoint_id="+ckId,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(finishSubmissionUrl,{},{headers:headers}).success(function(response){$state.go("index.problems",{actvSlug:$stateParams.actvSlug,chckpointID:ckId},{reload:!0})}).error(function(data){$scope.checkpointDeny(),snackbar.create(data,3e3)})},$scope.quitCheckpoint=function(ckId){var finishSubmissionUrl=$scope.baseUrl+"/activity/finish?checkpoint_id="+ckId,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(finishSubmissionUrl,{},{headers:headers}).success(function(response){$state.go("index.checkpoints",{actvSlug:$stateParams.actvSlug},{reload:!0}),snackbar.create(response.message,3e3)})},$scope.createTeam=function(ckid,handle){if(handle)var name=handle;var createData=JSON.stringify({checkpoint_id:ckid,name:name,handle:handle}),createTeamUrl=$scope.baseUrl+"/activity/team",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.teamName=name,$scope.teamHandle=handle,$http.post(createTeamUrl,createData,{headers:headers}).success(function(response){$scope.createdTeam=1,$scope.getTeams(ckid),$scope.is_part_of_team=1,snackbar.create("Success",5e3)}),$scope.createdTeam=1},$scope.makeTeamSlug=function(modelName,s){if(!(s&&"string"==typeof s&&s.length>0))return s;var trim=s.replace(/[ ]+/g," ").trim().replace(/ /g,"_").toLowerCase();$scope.modelName=trim},$scope.getTeams=function(ckID){$scope.approved=0,$scope.showloaderteam=!0;var getTeamUrl=$scope.baseUrl+"/activity/team?checkpoint_id="+ckID,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.reqTeamData=[],$http.get(getTeamUrl,{headers:headers}).success(function(response){if($scope.allTeamsData=response.data,null!=$scope.allTeamsData&&(angular.forEach($scope.allTeamsData.all_teams,function(item){$scope.specTeamName=item.name,$scope.specTeamHandle=item.handle,$scope.specTeamId=item.id,$scope.is_member=item.is_member,1===$scope.is_member&&($scope.is_part_of_team=1),$scope.specTeamIsApplied=item.is_applied,$scope.specTeamCreator=item.is_creator,$scope.specTeamCreator&&($scope.createdTeam=1,$scope.this_team_creator=1);var invited_all_members=[];angular.forEach(item.team_members,function(te){var invited_data={};invited_data.created=te.created,invited_data.member_handle=te.member_data.handle,invited_data.member_handleMD5=md5.createHash(invited_data.member_handle),invited_data.member_pic=te.member_data.extra[5]?te.member_data.extra[5]:"https://www.gravatar.com/avatar/"+invited_data.member_handleMD5+"?s=150?&d=identicon",invited_data.member_headline=te.member_data.extra[10],invited_data.member_firstname=te.member_data.extra[1],invited_all_members.push({name:invited_data.member_firstname,handle:invited_data.member_handle,creator:invited_data.created,headline:invited_data.member_headline,pic:invited_data.member_pic})}),$scope.reqTeamData.push({teamname:$scope.specTeamName,teamhandle:$scope.specTeamHandle,teamid:$scope.specTeamId,is_creator:$scope.specTeamCreator,is_applied:$scope.specTeamIsApplied,is_member:$scope.is_member,teammates:invited_all_members})}),$scope.team_invites=[],$scope.all_team_members=[],$scope.invited_teams=[],$scope.myTeamName=$scope.allTeamsData.my_team.name,Object.keys($scope.allTeamsData.my_team).length>0&&($scope.forTeamId($scope.allTeamsData.my_team.id),$scope.qualifiedUsers(ckID)),$scope.myTeamhandle=$scope.allTeamsData.my_team.handle,$scope.allTeamsData.my_team.team_invitations?($scope.specTeamInvites=$scope.allTeamsData.my_team.team_invitations,angular.forEach($scope.specTeamInvites,function(invitedsort){var item_team_invities={};item_team_invities.invite_team_id=invitedsort.activity_team_id,item_team_invities.invitieHandle=invitedsort.member_data.handle,item_team_invities.invitieMd5=md5.createHash(item_team_invities.invitieHandle),item_team_invities.invitieEmail=invitedsort.member_data.email,item_team_invities.invitieId=invitedsort.member_id,item_team_invities.invitePic=invitedsort.member_data.extra[5]?invitedsort.member_data.extra[5]:"https://www.gravatar.com/avatar/"+item_team_invities.invitieMd5+"?s=150?&d=identicon",item_team_invities.inviteeHandle=invitedsort.member_data.extra[10],item_team_invities.inviteeName=invitedsort.member_data.extra[1],$scope.team_invites.push({handle:item_team_invities.invitieHandle,name:item_team_invities.inviteeName,headline:item_team_invities.inviteeHandle,teamid:item_team_invities.invite_team_id,id:item_team_invities.invitieId,pic:item_team_invities.invitePic})})):$scope.team_invites=[],$scope.allTeamsData.my_team.team_members?($scope.myHandle=$cookies.get("cHandle"),$scope.teamMembers=$scope.allTeamsData.my_team.team_members,angular.forEach($scope.teamMembers,function(tmSort){var item_my_team={};$scope.teamMemberHandle=tmSort.member_data.handle,item_my_team.teamMemberHandleMd5=md5.createHash($scope.teamMemberHandle),item_my_team.team_id=tmSort.activity_team_id,$scope.teamMemberId=tmSort.member_id,$scope.teamCreator=tmSort.created,$scope.teamCreator&&($scope.teamCreatorHandle=$scope.teamMemberHandle),item_my_team.teamMemberPic=tmSort.member_data.extra[5]?tmSort.member_data.extra[5]:"https://www.gravatar.com/avatar/"+item_my_team.teamMemberHandleMd5+"?s=150?&d=identicon",item_my_team.teamMemeberHeadline=tmSort.member_data.extra[10],item_my_team.teamMemeberName=tmSort.member_data.extra[1],$scope.all_team_members.push({handle:$scope.teamMemberHandle,name:item_my_team.teamMemeberName,headline:item_my_team.teamMemeberHeadline,teamid:item_my_team.team_id,id:$scope.teamMemberId,pic:item_my_team.teamMemberPic,creator:$scope.teamCreator})}),$scope.isMyTeam=$scope.myHandle===$scope.teamCreatorHandle):$scope.all_team_members=[],$scope.allTeamsData.invited_teams)){var invited_data={};angular.forEach($scope.allTeamsData.invited_teams,function(data){var invited_all_members=[];invited_data.handle=data.handle,invited_data.name=data.name,invited_data.is_member=data.is_member,invited_data.id=data.id,angular.forEach(data.team_members,function(te){invited_data.created=te.created,invited_data.member_handle=te.member_data.handle,invited_data.member_handleMD5=md5.createHash(invited_data.member_handle),invited_data.member_pic=te.member_data.extra[5]?te.member_data.extra[5]:"https://www.gravatar.com/avatar/"+invited_data.member_handleMD5+"?s=150?&d=identicon",invited_data.teamMemeberHeadline=te.member_data.extra[10],invited_data.teamMemeberName=te.member_data.extra[1],invited_all_members.push({handle:invited_data.member_handle,creator:invited_data.created,name:invited_data.teamMemeberName,headline:invited_data.teamMemeberHeadline,pic:invited_data.member_pic})}),$scope.invited_teams.push({teamhandle:invited_data.handle,teamname:invited_data.name,is_member:invited_data.is_member,teamid:invited_data.id,teammates:invited_all_members})})}$scope.showloaderteam=!1}),$scope.sendTeamId=function(tid){$scope.MyTeamId=tid},$scope.sendMemData=function(h,minsize){$scope.checkHandle=h,$rootScope.minimumTeamSize=minsize}},$scope.qualifiedUsers=function(chkid){$scope.showEligibleMemeberLoader=!0;var qualifiersUrl=$scope.baseUrl+"/users/all/eligible?checkpoint_id="+chkid,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(qualifiersUrl,{headers:headers}).success(function(response){$scope.showEligibleMemeberLoader=!1,$scope.qualifiedCandidates=response.data.eligible_members,$scope.alreadyInvitedCandidates=response.data.already_invited_member_ids,$scope.qualifiedMembers=[],angular.forEach($scope.qualifiedCandidates,function(item){var item_qualifiers={};angular.forEach(response.data.individual_member_id_pool,function(data){item.id==data?(item_qualifiers.handle=item.handle,item_qualifiers.handleMD5=md5.createHash(item.handle),item_qualifiers.id=item.id,$scope.alreadyInvitedCandidates.indexOf(item.id)>-1?item_qualifiers.status=1:item_qualifiers.status=0,angular.forEach(item.extra,function(alpha){5==alpha.id&&(item_qualifiers.pic=alpha.value),item_qualifiers.pic=item_qualifiers.pic?item_qualifiers.pic:"https://www.gravatar.com/avatar/"+item_qualifiers.handleMD5+"?s=150?&d=identicon",1==alpha.id&&(item_qualifiers.name=alpha.value),10==alpha.id&&(item_qualifiers.headline=alpha.value)}),$scope.qualifiedMembers.push({handle:item_qualifiers.handle,name:item_qualifiers.name,headline:item_qualifiers.headline,id:item_qualifiers.id,status:item_qualifiers.status,pic:item_qualifiers.pic})):$scope.showEligibleMemeberLoader=!1})})})},$scope.searchEligibleMembers=function(query,chkid){$scope.showEligibleMemeberLoader=!0;var qualifiersUrl=$scope.baseUrl+"/users/all/eligible?checkpoint_id="+chkid,authToken=$cookies.get("Authorization"),headers={Authorization:authToken},params={search:query};$http.get(qualifiersUrl,{headers:headers,params:params}).success(function(response){$scope.showEligibleMemeberLoader=!1;var qualifiedCandidates=response.data.eligible_members;response.data.already_invited_member_ids;$scope.qualifiedMembers=[],angular.forEach(qualifiedCandidates,function(item){var item_qualifiers={};angular.forEach(response.data.individual_member_id_pool,function(data){item.id==data?(item_qualifiers.handle=item.handle,item_qualifiers.handleMD5=md5.createHash(item.handle),item_qualifiers.id=item.id,$scope.alreadyInvitedCandidates.indexOf(item.id)>-1?item_qualifiers.status=1:item_qualifiers.status=0,angular.forEach(item.extra,function(alpha){5==alpha.id&&(item_qualifiers.pic=alpha.value),item_qualifiers.pic=item_qualifiers.pic?item_qualifiers.pic:"https://www.gravatar.com/avatar/"+item_qualifiers.handleMD5+"?s=150?&d=identicon",1==alpha.id&&(item_qualifiers.name=alpha.value),10==alpha.id&&(item_qualifiers.headline=alpha.value)}),$scope.qualifiedMembers.push({handle:item_qualifiers.handle,name:item_qualifiers.name,headline:item_qualifiers.headline,id:item_qualifiers.id,status:item_qualifiers.status,pic:item_qualifiers.pic})):$scope.showEligibleMemeberLoader=!1})})})},$scope.inviteToggle=!0,$scope.invitationsToBeSent=[],$scope.allInvitees=[],$scope.addInvitee=function(memid){$scope.allInvitees.push(memid)},$scope.removeInvitee=function(memid){$scope.allInvitees.splice($scope.allInvitees.indexOf(memid))},$scope.forTeamId=function(tid){$scope.teamID=tid},$scope.sendInvite=function(invites){var inviteData=JSON.stringify({team_id:$scope.teamID,member_ids:invites}),inviteUrl=$scope.baseUrl+"/activity/team/invite",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(inviteUrl,inviteData,{headers:headers}).success(function(response){snackbar.create("Successfully Invited",3e3)}).error(function(data){snackbar.create(data.data,3e3)})},$scope.acceptTeamInvite=function(tid,ckid){var acceptData=JSON.stringify({team_id:tid}),acceptUrl=$scope.baseUrl+"/activity/team/invite/accept",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(acceptUrl,acceptData,{headers:headers}).success(function(response){$scope.createdTeam=1,$scope.getTeams(ckid),$scope.is_part_of_team=1,snackbar.create("success",3e3)}).error(function(data){snackbar.create(data.error,3e3)})},$scope.declineTeamInvite=function(tid){var declineData=JSON.stringify({team_id:tid}),declineUrl=$scope.baseUrl+"/activity/team/invite/decline",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(declineUrl,declineData,{headers:headers}).success(function(response){snackbar.create("Declined",3e3)}).error(function(data){snackbar.create(response.error,3e3)})},$scope.teamMembersModal=function(members){$scope.$modalInstance=$modal.open({templateUrl:"views/teamMembers_view.7fc76674.html",controller:function($scope,$modalInstance){$scope.specMembersOfTeam=members,$scope.teamMembersModalDeny=function(){$modalInstance.close()}},size:"md",windowClass:"animated fadeIn",scope:$scope})},$scope.joinTeam=function(teamID,change){var joinTeamData=JSON.stringify({team_id:teamID}),joinTeamUrl=$scope.baseUrl+"/activity/team/join",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(joinTeamUrl,joinTeamData,{headers:headers}).success(function(response){snackbar.create("Join Request Sent",5e3)}).error(function(data){snackbar.create(data.error,3e3)})},$scope.approveInvite=function(memID,teamID,ckid){var approveData=JSON.stringify({team_id:teamID,member_id:memID}),approveUrl=$scope.baseUrl+"/activity/team/join/accept",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(approveUrl,approveData,{headers:headers}).success(function(response){$state.reload(),snackbar.create(response.data.data,3e3)}).error(function(data){snackbar.create(data.error,3e3)})},$scope.declineInvite=function(memID,teamID,ckid){var declineData=JSON.stringify({team_id:teamID,member_id:memID}),declineUrl=$scope.baseUrl+"/activity/team/join/decline",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.declined=1,$http.post(declineUrl,declineData,{headers:headers}).success(function(response){$state.reload(),snackbar.create(response.data.data,3e3)}).error(function(data){snackbar.create(data.data.error,3e3)})},$scope.leaveTeam=function(ckid,tid){var leaveData=JSON.stringify({checkpoint_id:ckid,team_id:tid}),leaveUrl=$scope.baseUrl+"/activity/team",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http({url:leaveUrl,method:"DELETE",data:leaveData,headers:headers}).then(function(res){$scope.is_part_of_team=!1,$scope.getTeams(ckid),snackbar.create("You Just left your team",3e3)},function(error){snackbar.create(data.data.error,3e3)})},$scope.removeTeamMembers=function(ckid,tid,memID,handle){var removeData=JSON.stringify({checkpoint_id:ckid,team_id:tid,member_id:memID}),removeUrl=$scope.baseUrl+"/activity/team",authToken=$cookies.get("Authorization");$http({url:removeUrl,method:"DELETE",data:removeData,headers:{Authorization:authToken}}).then(function(res){$scope.getTeams(ckid),snackbar.create(res.data.data,3e3)},function(error){snackbar.create(error.data,3e3)})},$scope.limit=5,$scope.followerLimit=12,$scope.sawMore=!0,$scope.commFollowersMore=!0,$scope.hideall=!1,$scope.loadMore=function(){$scope.limit=$scope.allGangActivities.length};$scope.location=[{coordinates:[12.9709688,77.6396274],properties:{address:""}}],$scope.profileHovering=!1,$scope.getForm=function(callback){$scope.showloader=!0,$scope.isLoggedin_User=!1;var getProfileUrl=null;$scope.userH=$stateParams.userH,$scope.userH?$scope.loggedIn?(getProfileUrl=$scope.baseUrl+"/users/?user_handle="+$scope.userH,$rootScope.pageTitle=$scope.userH):(getProfileUrl=$scope.baseUrl+"/users/?user_handle="+$scope.userH+"&public=true",$rootScope.pageTitle="skillenza"):getProfileUrl=$scope.baseUrl+"/users/";var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.loggedIn=$cookieStore.get("isLoggedInUser"),$http.get(getProfileUrl,{headers:headers}).then(function(response){$scope.showloader=!1,$scope.memberData=response.data.data.member_data,$scope.profile_higlights={},$scope.social_profiles={},$scope.memberHandle=$scope.memberData.handle,$scope.userActivityCount=$scope.memberData.activity_apply_count,$scope.memberEmail=$scope.memberData.email,$scope.memberCreatedAt=moment($scope.memberData.created_at).format("MMM YYYY"),$scope.memberEmailIsVerified=$scope.memberData.email_verified,$scope.memberId=$scope.memberData.id,$rootScope.rootMemId=$scope.memberId,$scope.memberIsFollowing=$scope.memberData.following,$scope.memberDataExtras=$scope.memberData.extra,angular.forEach($scope.memberDataExtras,function(extra){if($scope.profileExtra=extra,1==$scope.profileExtra.id&&($scope.profileFirstName=$scope.profileExtra.value),2==$scope.profileExtra.id&&($scope.middleName=$scope.profileExtra.value),3==$scope.profileExtra.id&&($scope.lastName=$scope.profileExtra.value),4==$scope.profileExtra.id&&($scope.gender=$scope.profileExtra.value,0==$scope.gender?$scope.selectedGender="male":1==$scope.gender?$scope.selectedGender="female":$scope.selectedGender="other"),5==$scope.profileExtra.id&&($scope.profilePict=$scope.profileExtra.value),$scope.userHandle===$scope.memberHandle){$scope.selfHandle=$scope.memberHandle;$scope.isLoggedin_User=!0,$cookies.get("profilePicture")||($cookies.put("profilePicture",$scope.profilePict,{expires:exp}),$rootScope.profilePicture=$cookies.get("profilePicture"))}if(6==$scope.profileExtra.id&&($scope.primaryPhone=$scope.profileExtra.value,$scope.primaryPhone_isVerified=$scope.profileExtra.is_verified),7==$scope.profileExtra.id&&($scope.secondaryPhone=$scope.profileExtra.value),8==$scope.profileExtra.id&&($scope.address=$scope.profileExtra.value),9==$scope.profileExtra.id&&($scope.location=$scope.profileExtra.values,$scope.profile_higlights.city=$scope.location[0].properties.city),10==$scope.profileExtra.id&&($scope.headline=$scope.profileExtra.value),11==$scope.profileExtra.id&&($scope.bio=$scope.profileExtra.value),12==$scope.profileExtra.id&&($scope.resume_url=$scope.profileExtra.value),13==$scope.profileExtra.id&&($scope.skillsInterested=$scope.profileExtra.values,$scope.skillsInts=$scope.profileExtra.tag_data),14==$scope.profileExtra.id&&($scope.skillsExperienced=$scope.profileExtra.values,$scope.profileSkillsExp=$scope.profileExtra.tag_data,$scope.skillsExps=$scope.profileExtra.tag_data,$scope.searchTagUserArr=$scope.skillsExperienced),15==$scope.profileExtra.id&&($scope.userExperienceArray=$scope.profileExtra.values,$scope.userExperienceArray.map(function(u){u.from=moment(u.joined_on).format("MMM YYYY"),u.to=moment(u.left_on).format("MMM YYYY");var currentDate=moment(),months=currentDate.diff(moment(u.joined_on),"months");u.months=months%12,u.years>12&&(u.years=parseInt(months/12)),1===u.current&&($scope.profile_higlights.current_position=u.job_title,$scope.profile_higlights.current_company=u.company_name)})),16==$scope.profileExtra.id&&($scope.personalWebsite=$scope.convertToUrl($scope.profileExtra.value)),17==$scope.profileExtra.id&&($scope.facebook=$scope.convertToUrl($scope.profileExtra.value),$scope.social_profiles.facebook_slug=$scope.getSocialHandle($scope.facebook)),18==$scope.profileExtra.id&&($scope.behance=$scope.convertToUrl($scope.profileExtra.value),$scope.social_profiles.behance_slug=$scope.getSocialHandle($scope.behance)),19==$scope.profileExtra.id&&($scope.dribbble=$scope.convertToUrl($scope.profileExtra.value),$scope.social_profiles.dribbble_slug=$scope.getSocialHandle($scope.dribbble)),20==$scope.profileExtra.id&&($scope.instagram=$scope.convertToUrl($scope.profileExtra.value),$scope.social_profiles.instagram_slug=$scope.getSocialHandle($scope.instagram)),21==$scope.profileExtra.id&&($scope.githandle=$scope.convertToUrl($scope.profileExtra.value),$scope.social_profiles.github_slug=$scope.getSocialHandle($scope.githandle)),22==$scope.profileExtra.id&&($scope.bitBucket=$scope.convertToUrl($scope.profileExtra.value),$scope.social_profiles.bibucket_slug=$scope.getSocialHandle($scope.bitBucket)),23==$scope.profileExtra.id&&($scope.twitterhandle=$scope.convertToUrl($scope.profileExtra.value),$scope.social_profiles.twitter_slug=$scope.getSocialHandle($scope.twitterhandle)),24==$scope.profileExtra.id){$scope.profile_higlights.education=$scope.profileExtra.values[0].institution_name;angular.forEach($scope.profileExtra.values,function(data){data.graduation_year=moment(data.graduation_year,"MMM-DD-YYYY"),data.from=moment(data.started_on).format("MMM YYYY"),data.to=moment(data.left_on).format("MMM YYYY")}),$scope.userEducationArray=$scope.profileExtra.values}25==$scope.profileExtra.id&&($scope.student=$scope.profileExtra.value),26==$scope.profileExtra.id&&($scope.userAchievementsArray=$scope.profileExtra.values),27==$scope.profileExtra.id&&($scope.userCreativeWorksArray=$scope.profileExtra.values),28==$scope.profileExtra.id&&($scope.yearsOfExperience=Number($scope.profileExtra.value),$scope.profile_higlights.experience=$scope.yearsOfExperience),29==$scope.profileExtra.id&&($scope.userProjectsArray=$scope.profileExtra.values),30==$scope.profileExtra.id&&($scope.userJobSearch=$scope.profileExtra.values),31==$scope.profileExtra.id&&($scope.linkedIn=$scope.profileExtra.value,$scope.social_profiles.linkedin_slug=$scope.getSocialHandle($scope.linkedIn))});var user_full_name=(md5.createHash($scope.memberHandle),$scope.profileFirstName+" "+$scope.lastName+" on Skillenza"),user_og_description=$scope.headline,og_url=window.location.href,user_og_picture=$scope.profilePict?$scope.profilePict:makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:200,height:200,n:10,type:"png",text:[$scope.profileFirstName,$scope.lastName,"Skillenza"]});ngMeta.setTag("description",removeMd(user_og_description)),ngMeta.setTag("url",og_url),ngMeta.setTag("image",user_og_picture),ngMeta.setTitle(user_full_name),$scope.memberIsFollowing=$scope.memberData.is_following,$scope.memberId=$scope.memberData.id,$scope.followerData=$scope.memberData.following.follower_member,$scope.followeeData=$scope.memberData.following.following_member,$scope.followingGangData=$scope.memberData.following.following_gang,$scope.userFollowerData=[],$scope.userFolloweeData=[],$scope.userFollwingGangData=[],$scope.userChatDataList=[];var matchedList=[];if(angular.forEach($scope.followingGangData,function(item){var gang_following_data={};gang_following_data.name=item.gang_data.name,gang_following_data.handle=item.gang_data.handle,gang_following_data.description=item.gang_data.description,gang_following_data.id=item.gang_data.id,gang_following_data.is_following=item.gang_data.is_following,gang_following_data.member_strength=item.gang_data.total_followers,
gang_following_data.all_activities_count=item.gang_data.all_activities_count,gang_following_data.upcoming_activities=item.gang_data.upcoming_activities_count,gang_following_data.banner=item.gang_data.banner,gang_following_data.is_manager=item.gang_data.is_manager,gang_following_data.handle_md5=md5.createHash(gang_following_data.handle),item.gang_data.logo&&-1!=$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.gang_data.logo))?gang_following_data.logo=item.gang_data.logo:gang_following_data.logo="https://www.gravatar.com/avatar/"+gang_following_data.handle_md5+"?s=150?&d=identicon",$scope.userFollwingGangData.push({name:gang_following_data.name,id:gang_following_data.id,description:gang_following_data.description,is_following:gang_following_data.is_following,followers:gang_following_data.member_strength,total_activities_count:gang_following_data.all_activities_count,upcoming_activities_count:gang_following_data.upcoming_activities,logo:gang_following_data.logo,banner:gang_following_data.banner,handle:gang_following_data.handle})}),angular.forEach($scope.followerData,function(item){var follower_data={};follower_data.is_following=item.is_following,follower_data.member_data=item.member_data,follower_data.member_data_extra=item.member_data.extra,follower_data.handle=follower_data.member_data.handle,follower_data.md5=md5.createHash(follower_data.handle),follower_data.id=follower_data.member_data.id,follower_data.member_follower_id=item.member_follower_id,follower_data.follower_extra_pic="",angular.forEach(item.member_data.extra,function(extra){1==extra.id&&(follower_data.name=extra.value);var follower_extra=extra;5==follower_extra.id&&(follower_data.follower_extra_pic=follower_extra.value),14==follower_extra.id&&(follower_data.skills=follower_extra.tag_data)}),follower_data.follower_extra_pic||(follower_data.follower_extra_pic="https://www.gravatar.com/avatar/"+follower_data.md5+"?s=150?&d=identicon"),$scope.selfId!=follower_data.member_follower_id&&$scope.userFollowerData.push({name:follower_data.name,follower_handle:follower_data.handle,is_following:follower_data.is_following,follower_id:follower_data.id,follower_pic:follower_data.follower_extra_pic,skills_experienced_in:follower_data.skills}),angular.forEach($scope.followeeData,function(a){if(follower_data.member_follower_id==a.member_followee_id){var followee_data={};matchedList.push(a),followee_data.id=a.member_followee_id,followee_data.handle=a.member_data.handle,followee_data.md5=md5.createHash(followee_data.handle),angular.forEach(a.member_data.extra,function(alpha){1==alpha.id&&(followee_data.name=alpha.value),5==alpha.id&&(followee_data.pic=alpha.value)}),followee_data.pic||(followee_data.pic="https://www.gravatar.com/avatar/"+followee_data.md5+"?s=150?&d=identicon");var toBePushed={f_name:followee_data.name,f_pic:followee_data.pic,f_handle:followee_data.handle,f_id:followee_data.id};$scope.userChatDataList.push(toBePushed)}})}),angular.forEach($scope.followeeData,function(item){var followee_data={};followee_data.id=item.member_followee_id,followee_data.handle=item.member_data.handle,followee_data.is_following=item.is_following,followee_data.md5=md5.createHash(followee_data.handle),angular.forEach(item.member_data.extra,function(alpha){1==alpha.id&&(followee_data.name=alpha.value),5==alpha.id&&(followee_data.pic=alpha.value),14==alpha.id&&(followee_data.skills=alpha.tag_data)}),followee_data.pic||(followee_data.pic="https://www.gravatar.com/avatar/"+followee_data.md5+"?s=150?&d=identicon");var toBePushed={first_name:followee_data.name,is_following:followee_data.is_following,picture_url:followee_data.pic,handle:followee_data.handle,id:followee_data.id,skills_experienced_in:followee_data.skills};$scope.selfId!=followee_data.id&&$scope.userFolloweeData.push(toBePushed)}),0==$scope.memberDataExtras.length?$scope.profileEmpty=!0:$scope.memberDataExtras.length>20&&($scope.profileEmpty=!1),$scope.profileTags=$scope.memberData.tags,$scope.savedSkillsData.push("formDetails"),$scope.profileTags.length>0&&$scope.fullTagsData.all){$scope.fullTagsData.your=$scope.profileTags;var your_tag_ids=$scope.fullTagsData.your.map(function(x){return x.id});$scope.fullTagsData.all=$scope.fullTagsData.all.map(function(x){return your_tag_ids.indexOf(x.id)>-1?x.is_your_tag=!0:x.is_your_tag=!1,x});$scope.fullTagsData.your.filter(function(x){return $scope.fullTagsData.all.indexOf(x)<0})}}),callback&&callback()},$scope.showAllUsers=!0,$scope.showFollowers=function(){$scope.showAllUsers=!1,$scope.showFollowingUsers=!0,$scope.userLoadBusy=!0},$scope.showAllPeople=function(){$scope.showAllUsers=!0,$scope.showFollowingUsers=!1,$scope.userLoadBusy=!1},$scope.communitiesSwitchObj={},$scope.communitiesSwitchObj.all=!0,$scope.communitySwitch=function(param){"all"===param?($scope.communitiesSwitchObj.all=!0,$scope.communitiesSwitchObj.your=!1,$scope.communitiesSwitchObj.following=!1,$scope.commLoadBusy=!1):"following"==param?($scope.communitiesSwitchObj.all=!1,$scope.communitiesSwitchObj.your=!1,$scope.communitiesSwitchObj.following=!0,$scope.commLoadBusy=!0):($scope.communitiesSwitchObj.all=!1,$scope.communitiesSwitchObj.your=!0,$scope.communitiesSwitchObj.following=!1,$scope.commLoadBusy=!0)},$scope.okModal=function(){$scope.$modalInstance.close()},$scope.cancelModal=function(){$scope.$modalInstance.dismiss("cancel")},$scope.showToast=function(){snackbar.create("Add this tag to interest to solve",3e3)},$scope.showTagsLoader=!0,$scope.getTags=function(callback){var getTagsUrl=$scope.baseUrl+"/tags",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.loggedIn&&($scope.loaderClass="sk-loading",$http.get(getTagsUrl,{headers:headers}).then(function(response){$scope.tags=response.data.data,$scope.fullTagsData.all=$scope.tags,$scope.selectedTagId=$scope.tags.id,$scope.selectedTagName=$scope.tags.name,$scope.savedSkillsData.push("saveTag");if($scope.tagLookup={},angular.forEach($scope.tags,function(item){$scope.tagLookup[item.name]=item.id}),2==$scope.savedSkillsData.length){for(var tag_map={},x=0;x<$scope.tags.length;x++)tag_map[$scope.tags[x].id]=$scope.tags[x].name;$scope.skillsInts=$scope.skillsInterested.map(function(x){return tag_map[x]}),$scope.skillsExps=$scope.skillsExperienced.map(function(x){return tag_map[x]})}$scope.loaderClass="",callback&&callback(),$scope.showTagsLoader=!1}))},$scope.searchTagUserArr=[{}],$scope.searchTagUser=function(tagName){var getTagsUrl=$scope.baseUrl+"/tags?search="+tagName.split(" ")[0]+"&page=1",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.loggedIn&&($scope.loaderClass="sk-loading",$http.get(getTagsUrl,{headers:headers}).then(function(response){angular.forEach(response.data.data,function(val,key){-1==$scope.searchTagUserArr.map(function(u){return u.name}).indexOf(val.name)&&$scope.searchTagUserArr.unshift({id:val.id,name:val.name})})}))},$scope.checkForTagId=function(){var statep=$stateParams.tagName,look=$scope.tagLookup[statep];$scope.getPracticeQuestions(look)},$scope.checkForLBTagId=function(){var statep=$stateParams.tagName,look=$scope.tagLookup[statep];$scope.getPractiseLeaderboard(look)},$scope.showEx=!1,$scope.practiseTimedout=function(){$modal.open({templateUrl:"views/practise_timedout_modal.5867ee5a.html",controller:ModalInstanceCtrl,backdrop:"static",keyboard:!1,windowClass:"animated fadeIn",scope:$scope});$scope.elementsDisabled=!0},$scope.startActivity=function(){$modal.open({templateUrl:"views/create_activity_modal.cc2a27e2.html",controller:ModalInstanceCtrl,backdrop:"static",keyboard:!1,windowClass:"animated fadeIn",scope:$scope})},$scope.getPracticeQuestions=function(id){var getPracticeQuestionsUrl=$scope.baseUrl+"/practice/objective/?tag_id="+id,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.$broadcast("timer-reset"),$scope.problemData=[],$http.get(getPracticeQuestionsUrl,{headers:headers}).success(function(response){$scope.allPracticeData=response.data,$scope.problemData=$scope.allPracticeData.problem_data,$scope.problemData.timeout&&($scope.problemTimer=$scope.problemData.timeout),$scope.$broadcast("timer-resume"),$scope.showEx=!1,$scope.hideSubmit=!1,$scope.showNext=!1,$scope.selected.submission=[],$scope.selector_color="primary",$scope.elementsDisabled=!1}).error(function(data){snackbar.create(data,3e3)})},$scope.getMetrics=function(id){if(id)var getMetricsUrl=$scope.baseUrl+"/metrics?metric_id="+id;else var getMetricsUrl=$scope.baseUrl+"/metrics";var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getMetricsUrl,{headers:headers}).then(function(response){$scope.metrics=response.data.data})},$scope.selector_color="primary",$scope.submitPractise=function(id,submission){var id_str=id.toString();"string"==typeof submission&&(submission=[submission]);var postPracticeSubmissionUrl=$scope.baseUrl+"/practice/objective/submission",authToken=$cookies.get("Authorization"),headers={Authorization:authToken},submission_data={problem_id:id_str,values:submission};$scope.elementsDisabled?snackbar.create("We conduct challenges for Hackers!"):$http.post(postPracticeSubmissionUrl,submission_data,{headers:headers}).success(function(response){$scope.showEx=!0,$scope.showNext=!0,$scope.hideSubmit=!0,$scope.elementsDisabled=!0;var submissionResponse=response.data;$scope.submitResult=submissionResponse.result,0==$scope.submitResult&&($scope.selected.submission=submissionResponse.keys,$scope.selector_color="danger",snackbar.create("Incorrect")),1==$scope.submitResult&&($scope.selected.submission=submissionResponse.keys,$scope.selector_color="primary",snackbar.create("Correct")),$scope.showExplaination=submissionResponse.explanation})},$scope.sortedPracLeaderboardData=[],$scope.getPractiseLeaderboard=function(id){var getPractiseLeaderboardUrl=$scope.baseUrl+"/practice/objective/leaderboard?tag_id="+id,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getPractiseLeaderboardUrl,{headers:headers}).success(function(response){$scope.fullPractiseLbData=response.data.leaderboard;var item_leaderboard={};angular.forEach($scope.fullPractiseLbData,function(item){item_leaderboard.member_data=[item.member_data],item_leaderboard.rank=item.rank,item_leaderboard.rating=item.rating,angular.forEach(item_leaderboard.member_data,function(data){item_leaderboard.handle=data.handle,item_leaderboard.md5=md5.createHash(item_leaderboard.handle),item_leaderboard.id=data.id,item_leaderboard.email=data.email,item_leaderboard.extra=data.extra,item_leaderboard.user_picture="",angular.forEach(item_leaderboard.extra,function(e){5==e.id&&(item_leaderboard.user_picture=e.value),item_leaderboard.user_picture=item_leaderboard.user_picture?item_leaderboard.user_picture:"https://www.gravatar.com/avatar/"+item_leaderboard.md5+"?s=150?&d=identicon"})}),$scope.sortedPracLeaderboardData.push({handle:item_leaderboard.handle,pic:item_leaderboard.user_picture,userid:item_leaderboard.id,email:item_leaderboard.email,rank:item_leaderboard.rank,rating:item_leaderboard.rating})})})},$scope.saveTagData=function(){var arrayList=$scope.skillsInterested,object=$scope.tags,temp=[];for(i=1;i<arrayList.length;i++)object[arrayList[i]]&&temp.push(object[arrayList[i]]);$scope.tagName=temp},$scope.appendInterests=function(tagid,name){$scope.skillsInterested.push(tagid),$scope.submitForm("13")},$scope.userCreativeWork={title:null,description:null,license:null,patent_info:null,copyright:null,copyright_validity:null,created_on:null},$scope.userExperienceArray=[],$scope.userEducationArray=[],$scope.userAchievementsArray=[],$scope.userCreativeWorksArray=[],$scope.userProjectsArray=[],$scope.userExperienceArray.push({company_name:null,job_title:null,work_location:null,joined_on:null,left_on:null,current:null,summary:null}),$scope.addPosition=function(){$scope.userExperienceArray.push({company_name:null,job_title:null,work_location:null,joined_on:null,left_on:null,current:null,summary:null})},$scope.userJobSearch=[{expected_ctc:null,preferred_cities:[],willing_to_relocate:null,current_ctc:null,looking_for_job:null}],$scope.userEducationArray=[{institution_name:null,institution_state:null,degree:null,branch:null,started_on:null,left_on:null,graduation_year:null,current_year:null,current:null}],$scope.userCreativeWorksArray=[{title:null,description:null,license:null,patent_info:null,copyright:null,copyright_validity:null,created_on:null}],$scope.$watch("$scope.userCreativeWorksObj",function(n,p){}),$scope.preferred_cities=["Bangalore","Delhi","Hyderabad","Mumbai"],$scope.addEducation=function(){$scope.userEducationArray.push({institution_name:null,institution_state:null,degree:null,branch:null,started_on:null,left_on:null,current:null})},$scope.addAchievements=function(){$scope.userAchievementsArray.push({title:null,description:null,given_on:null})},$scope.random_flag=function(){return Math.random()>.5},$scope.addCreativeWorks=function(){$scope.userCreativeWorksArray.push({title:null,description:null,license:null,patent_info:null,copyright:null,copyright_validity:null,created_on:null})},$scope.addProjects=function(){$scope.userProjectsArray.push({name:null,pitch:null,tools_used:[],team_members:[],description:null,image:null,banner:null,demo_link:null,video_link:null})},$scope.getphysicallocation=function(event){var coordinates=(event.latLng.lat(),event.latLng.lng(),[event.latLng.lat(),event.latLng.lng()]);$scope.location[0].coordinates=coordinates;var myLatlng=new google.maps.LatLng(parseFloat(event.latLng.lat()),parseFloat(event.latLng.lng()));geocoder.geocode({location:myLatlng},function(results,status){$scope.location[0].properties.address="";var excludeLocaleList=["administrative_area_level_1","locality","country","postal_code"];angular.forEach(results[0].address_components,function(item){var presentLocale=!1;angular.forEach(excludeLocaleList,function(localeItem){localeItem==item.types[0]&&(presentLocale=!0)}),presentLocale||($scope.location[0].properties.address=$scope.location[0].properties.address+","+item.long_name),"locality"==item.types[0]&&($scope.location[0].properties.city=item.long_name),"administrative_area_level_1"==item.types[0]&&($scope.location[0].properties.state=item.long_name),"country"==item.types[0]&&($scope.location[0].properties.country=item.long_name),"postal_code"==item.types[0]&&($scope.location[0].properties.zipcode=item.long_name)}),$scope.location[0].properties.address=$scope.location[0].properties.address.replace(/(^[,\s]+)|([,\s]+$)/g,"").trim(),$scope.location[0].properties.formatted_address=results[0].formatted_address})},$scope.placeMarker2=function(){var loc=this.getPlace().geometry.location,coordinates=[loc.lat(),loc.lng()];$scope.location[0].coordinates=coordinates,$scope.displayLocation=this.getPlace().formatted_address;var geocoder=new google.maps.Geocoder,myLatlng=new google.maps.LatLng(parseFloat(loc.lat()),parseFloat(loc.lng()));geocoder.geocode({latLng:myLatlng},function(results,status){$scope.location[0].properties.address="";var excludeLocaleList=["administrative_area_level_1","locality","country","postal_code"];angular.forEach(results[0].address_components,function(item){var presentLocale=!1;angular.forEach(excludeLocaleList,function(localeItem){localeItem==item.types[0]&&(presentLocale=!0)}),presentLocale||($scope.location[0].properties.address=$scope.location[0].properties.address+","+item.long_name),"locality"==item.types[0]&&($scope.location[0].properties.city=item.long_name),"administrative_area_level_1"==item.types[0]&&($scope.location[0].properties.state=item.long_name),"country"==item.types[0]&&($scope.location[0].properties.country=item.long_name),"postal_code"==item.types[0]&&($scope.location[0].properties.zipcode=item.long_name)}),$scope.location[0].properties.address=$scope.location[0].properties.address,$scope.location[0].properties.formatted_address=results[0].formatted_address})},$scope.removePosition=function(index){$scope.userExperienceArray.splice($scope.userExperienceArray.indexOf(index),1)},$scope.removeEducation=function(index){$scope.userEducationArray.splice($scope.userEducationArray.indexOf(index),1)},$scope.removeAchievements=function(index){$scope.userAchievementsArray.splice($scope.userAchievementsArray.indexOf(index),1)},$scope.removeCreativeWorks=function(index){$scope.userCreativeWorksArray.splice($scope.userCreativeWorksArray.indexOf(index),1)},$scope.removeProjects=function(index){$scope.userProjectsArray.splice($scope.userProjectsArray.indexOf(index),1)},$scope.submitForm=function(ids,stud,type){$scope.showloader=!0,$scope.primaryFormLoader=!0,$scope.isDisabled=!0;var result=[];if(ids){var field_json="";if("1,3,14,10,25"==(ids=ids.split(",").map(function(x){return Number(x)})))for(var map_json={1:"profileFirstName",3:"lastName",14:"skillsExperienced",10:"headline",25:"student"},field_json="",x=0;x<ids.length;x++)14!=ids[x]&&(field_json={member_detail_field_id:ids[x],value:$scope[map_json[ids[x]]],values:{}}),14==ids[x]&&(field_json={member_detail_field_id:ids[x],value:"",values:$scope[map_json[ids[x]]]}),result.push(field_json);if("13"==ids){ids=ids.split(",").map(function(x){return Number(x)});for(var map_json={13:"skillsInterested"},x=0;x<ids.length;x++){var field_json={member_detail_field_id:ids[x],value:"",values:$scope[map_json[ids[x]]]};result.push(field_json)}}}else{var map_json={1:"profileFirstName",2:"middleName",3:"lastName",4:"gender",5:"profilePict",6:"primaryPhone",7:"secondaryPhone",9:"location",10:"headline",11:"bio",12:"resume_url",13:"skillsInterested",14:"skillsExperienced",15:"userExperienceArray",16:"personalWebsite",17:"facebook",18:"behance",19:"dribbble",20:"instagram",21:"githandle",22:"bitBucket",23:"twitterhandle",24:"userEducationArray",25:"student",26:"userAchievementsArray",27:"userCreativeWorksArray",28:"yearsOfExperience",29:"userProjectsArray",30:"userJobSearch",31:"linkedIn"};for(var key in map_json){var field_json,field_value=$scope[map_json[key]];if((field_value||0==field_value||0==field_value)&&("string"==typeof field_value||"number"==typeof field_value||"boolean"==typeof field_value?(5==key&&($cookies.put("profilePicture",field_value,{expires:exp}),$rootScope.profilePicture=$cookies.get("profilePicture"),$scope.selfProfilePicture=$scope.profilePicture),field_json={member_detail_field_id:key,value:$scope[map_json[key]],values:{}}):(15==key&&angular.forEach(field_value,function(value,key){if(value.job_title){moment.tz.guess();if(value.joined_on)var joined_on=moment(value.joined_on).toISOString();if(value.left_on)var left_on=moment(value.left_on).toISOString();else var left_on=null;1==value.current?$scope.userExperienceArray[key].current=1:$scope.userExperienceArray[key].current=0,$scope.userExperienceArray[key].joined_on=joined_on,$scope.userExperienceArray[key].left_on=left_on}else value.job_title}),24==key&&angular.forEach(field_value,function(value,key){var started_on,left_on;moment.tz.guess();started_on=void 0!==value.started_on&&null!=value.started_on?moment(value.started_on).toISOString():null,null!=value.left_on?left_on=moment(value.left_on).toISOString():started_on=null,1==value.current?$scope.userEducationArray[key].current=1:$scope.userEducationArray[key].current=0,$scope.userEducationArray[key].started_on=started_on,$scope.userEducationArray[key].left_on=left_on}),26==key&&angular.forEach(field_value,function(value,key){var start_date_tz=moment.tz.guess();if(value.given_on)var given_on=moment.tz(value.given_on.split("+")[0],start_date_tz).toISOString();$scope.userAchievementsArray[key].given_on=given_on}),27==key&&angular.forEach(field_value,function(value,key){var start_date_tz=moment.tz.guess();if(value.created_on&&"object"==typeof value.created_on)var created_on=moment(value.created_on,start_date_tz).toISOString();else created_on=value.created_on;$scope.userCreativeWorksArray[key].created_on=created_on}),field_json={member_detail_field_id:key,values:$scope[map_json[key]],value:""}),(!1===field_json.value||1==field_json.value||field_json.value.length>0||field_json.values.length>0)&&result.push(field_json),"number"==typeof field_json.value)){var num=field_json.value;num.toString();result.push(field_json)}}}$scope.userHandle?profileData={member_detail:result,handle:$scope.userHandle}:profileData={member_detail:result};var params={};params=2==type?{require_all:0}:{};var formUrl=$scope.baseUrl+"/users/",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.put(formUrl,profileData,{headers:headers,params:params}).success(function(data,status,headers,config){$scope.showloader=!1,$scope.hideAnchorTag=!0,1==$scope.fileUploaded&&($scope.fileUploaded=!1),snackbar.create("Your profile has been saved",3e3);try{$scope.editProfileModalDeny(),$state.reload()}catch(e){}$cookies.put("cHandle",$scope.userHandle,{expires:exp}),$cookies.get("newUser")&&$cookies.remove("newUser"),$timeout(function(){$scope.message=null},3e3),$scope.isDisabled=!1,$state.is("index.profileedit")&&$timeout(function(){$state.go("index.profile")},1e3),$state.is("index.practice")&&$cookies.remove("newUser"),$state.is("user.update")&&($scope.entType?($scope.getReferences(!0),"judge"==$scope.entType&&$cookies.remove("entType")):$scope.getReferences(!0)),$state.is("user.secondary",{typeId:"activity"})&&($scope.activityRegister(1,$scope.viaRefActivityId),"activity"!=$scope.entType&&2!=$scope.entType||$cookies.remove("entType"),$scope.showSecondaryFormLoarder=!1),$state.is("resetpassword")&&$location.search().reftg&&$scope.activityRegister(1,$scope.viaRefActivityId),$state.is("index.specChallenge",{actvSlug:$stateParams.actvSlug})&&$scope.activityRegister(1,$scope.viaRefActivityId)}).error(function(data,status,headers,config){$scope.isDisabled=!1,500===status?$scope.message=data.error:404===status||400===status?$scope.message=data.error:401===status&&($scope.message=data.error,$scope.message='<br><h4 class="text-danger text-center">'+data.error+"</h4>")})},$scope.emailVerification=function(){$cookies.get("Authorization");if($scope.showloaderForVerify=!0,$scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.loggedIn){var verifyUrl=$scope.baseUrl+"/users/verify",params={key:"email"};$http.post(verifyUrl,{},{params:params}).success(function(response){$scope.showloaderForVerify=!1,snackbar.create(response.message,3e3)}).error(function(data){$scope.showloaderForVerify=!1,$state.go("login"),snackbar.create(data.message,3e3)})}else{var verifyUrl=$scope.baseUrl+"/users/verify?key=email&value="+$scope.emailToVerify;$http.post(verifyUrl).success(function(response){$scope.showloaderForVerify=!1,$scope.semailToVerifypecKeyword="Verification link sent successfully !"}).error(function(data){$scope.showloaderForVerify=!1,$state.go("login")})}},$scope.verificationKeyword="verifying...",$scope.emailVerificationTokenCheck=function(){if($scope.emailTokenKey=$location.search().email_verification_key,$scope.emailTokenKey){$scope.showloaderForVerify=!0;var verifyemailUrl=$scope.baseUrl+"/users/verify",verifyData=JSON.stringify({key:"email",value:$scope.emailTokenKey}),authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(verifyemailUrl,verifyData,{headers:headers}).success(function(response){$scope.showloaderForVerify=!1,$scope.verificationKeyword="Verified, Please login",$scope.showLoginbutton=!0,$state.is("verify")&&$timeout(function(){$state.go("login")},3e3),$state.is("index.profile")&&($state.go("index.profile"),SweetAlert.swal("Success","Email Verified successfully","success")),snackbar.create(response.message,3e3)}).error(function(data){$scope.showloaderForVerify=!1,$scope.verificationKeyword=data.message,$state.is("verify")&&$timeout(function(){$state.go("login")},3e3),$scope.showLoginbutton=!1,snackbar.create(data.message,3e3),$state.is("index.profile")&&($state.go("index.profile"),SweetAlert.swal("Ooh!","Invalid Code","error"))})}},$scope.getCommunityTypes=function(){var getCommunityTypesUrl=$scope.baseUrl+"/users/gangs/type",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getCommunityTypesUrl,{headers:headers}).then(function(response){$scope.communityTypes=response.data.data})},$scope.createCommunity=function(){$scope.showloader=!0;var communityData=JSON.stringify({gang_type_id:Number($scope.gangTypeId),handle:$scope.gangHandle,name:$scope.gangName,description:$scope.gangDescription,logo:$scope.logo_url?$scope.logo_url:"null",image:$scope.meta_banner_url?$scope.meta_banner_url:"null",banner:$scope.community_banner_url?$scope.community_banner_url:"null"}),createCommunityUrl=$scope.baseUrl+"/users/gangs",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(createCommunityUrl,communityData,{headers:headers}).success(function(response){$scope.showloader=!1,$scope.communityTypes=response.data.data,snackbar.create(response.data.data,5e3),$state.go("index.communities",{handle:$scope.gangHandle})}).error(function(data){snackbar.create(data.error,5e3)})},$scope.getCommunities=function(){if($scope.showloaderComm=!0,$scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.loggedIn)var getCommunityUrl=$scope.baseUrl+"/users/gangs";else var getCommunityUrl=$scope.baseUrl+"/users/gangs/suggest?public=true";var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getCommunityUrl,{headers:headers}).then(function(response){if($scope.showloaderComm=!1,$scope.communities=[],$scope.url=0==$scope.communities.length?"create_community":"activities",$scope.selectedCommunity=$scope.communities,$scope.loggedIn)var all_gang_data=response.data.data.my_gangs;else var all_gang_data=response.data.data;var allCommunitiesData={};angular.forEach(all_gang_data,function(item){$scope.specCommunityhandle=item.handle,allCommunitiesData.is_following=item.is_following,allCommunitiesData.status=item.status,allCommunitiesData.description=item.description,allCommunitiesData.handle=item.handle,allCommunitiesData.handle_md5=md5.createHash(allCommunitiesData.handle),allCommunitiesData.name=item.name,allCommunitiesData.id=item.id,allCommunitiesData.banner=item.banner,allCommunitiesData.member_strength=item.member_strength,allCommunitiesData.all_activities_count=item.all_activities_count,allCommunitiesData.upcoming_activities_count=item.upcoming_activities_count,allCommunitiesData.is_manager=item.is_manager;var a=item.logo,b=a.split("."),fileType=b[b.length-1];item.logo&&-1!=$scope.extensionCheck.image.indexOf(fileType)?allCommunitiesData.logo=item.logo:allCommunitiesData.logo="https://www.gravatar.com/avatar/"+allCommunitiesData.handle_md5+"?s=150?&d=identicon",$scope.communities.push({name:allCommunitiesData.name,id:allCommunitiesData.id,logo:allCommunitiesData.logo,banner:allCommunitiesData.banner,is_manager:allCommunitiesData.is_manager,handle:allCommunitiesData.handle,followers:allCommunitiesData.member_strength,total_activities_count:allCommunitiesData.all_activities_count,upcoming_activities_count:allCommunitiesData.upcoming_activities_count,description:allCommunitiesData.description,is_following:allCommunitiesData.is_following,status:allCommunitiesData.status})})})},$scope.unverifiedCommunityModal=function(){$scope.$modalInstance=$modal.open({templateUrl:"views/unverified_community.ef6c53f9.html",controller:function($scope,$modalInstance){$scope.unverifiedCommunityModalDeny=function(){$modalInstance.close()}},size:"md",windowClass:"animated bounceInDown",scope:$scope})},$scope.getSpecificCommunity=function(){var getspecificCommunityUrl=null;$scope.communityLoader=!0;var gangkaHandle=$stateParams.handle;$scope.loggedIn=$cookieStore.get("isLoggedInUser"),getspecificCommunityUrl=gangkaHandle?$scope.loggedIn?$scope.baseUrl+"/users/gangs?gang_handle="+gangkaHandle:$scope.baseUrl+"/users/gangs?gang_handle="+gangkaHandle+"&public=true":$scope.baseUrl+"/users/gangs";var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(getspecificCommunityUrl,{headers:headers}).then(function(response){$scope.commActive=!1,$scope.loggedIn?$scope.selectedCommunityData=response.data.data.gang_data:$scope.selectedCommunityData=response.data.data,$scope.communityShareUrl=location.href,$scope.selectedCommunityDataName=$scope.selectedCommunityData.name,$scope.loggedIn?$rootScope.pageTitle=$scope.selectedCommunityDataName:$rootScope.pageTitle="skillenza | "+$scope.selectedCommunityDataName,$scope.selectedCommunityCreatorId=$scope.selectedCommunityData.member_id,$scope.selectedCommunityDataHandle=$scope.selectedCommunityData.handle;var community_handle_md5=md5.createHash($scope.selectedCommunityDataHandle),fileTypeLogo=$scope.getUrlFileType($scope.selectedCommunityData.logo),fileTypeBanner=$scope.getUrlFileType($scope.selectedCommunityData.banner);$scope.selectedCommunityData.logo&&-1!=$scope.extensionCheck.image.indexOf(fileTypeLogo)?$scope.selectedCommunityDataLogo=$scope.selectedCommunityData.logo:$scope.selectedCommunityDataLogo="https://www.gravatar.com/avatar/"+community_handle_md5+"?s=150?&d=identicon",$scope.selectedCommunityData.banner&&-1!=$scope.extensionCheck.image.indexOf(fileTypeBanner)?$scope.selectedCommunityDataBanner=$scope.selectedCommunityData.banner:$scope.selectedCommunityDataBanner="http://placeholdit.herokuapp.com/1320x200?r="+Math.random(),$scope.selectedCommunityDataCredit=$scope.selectedCommunityData.credit_balance,$scope.selectedCommunityDataImage=$scope.selectedCommunityData.image,$scope.selectedCommunityDataGangTypeId=$scope.selectedCommunityData.gang_type_id,$scope.selectedCommunityDataDescription=$scope.selectedCommunityData.description,$scope.selectedCommunityDataStatus=$scope.selectedCommunityData.status,$scope.contactAdmin=!1,0==$scope.selectedCommunityDataStatus?($scope.commStatusText="unverified",$scope.commStatusColor="default",$scope.commActive=!1,$scope.contactAdmin=!0):1==$scope.selectedCommunityDataStatus?($scope.commStatusText="Verified",$scope.commStatusColor="primary",$scope.commActive=!0):2==$scope.selectedCommunityDataStatus?($scope.commStatusText="Deactivated",$scope.commStatusColor="warning",$scope.commActive=!1):3==$scope.selectedCommunityDataStatus&&($scope.commStatusText="Disabled",$scope.commStatusColor="danger",$scope.commActive=!1,$scope.contactAdmin=!0),$scope.selectedCommunityDataImage&&($scope.selectedCommunityDataImage=$scope.selectedCommunityDataImage.replace(/ /g,"%20"));var og_url=window.location.href;ngMeta.setTag("url",og_url),ngMeta.setTag("description",removeMd($scope.selectedCommunityDataDescription)),ngMeta.setTag("image",$scope.selectedCommunityDataImage?$scope.selectedCommunityDataImage:makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:1200,height:630,n:24,type:"png",text:$scope.specActivityTags.map(function(u){return u.name})})),ngMeta.setTitle($scope.selectedCommunityDataName),$scope.selectedCommunityIsManager=$scope.selectedCommunityData.is_manager,$scope.selectedCommunityFollowersCount=$scope.selectedCommunityData.total_followers,$scope.selectedCommunityDataId=$scope.selectedCommunityData.id,$rootScope.rootCommId=$scope.selectedCommunityDataId,$scope.selectedCommunityIsFollowing=$scope.selectedCommunityData.is_following,1==$scope.selectedCommunityIsManager?$scope.divSize="col-md-7 col-xs-7":$scope.divSize="col-md-9 col-xs-5",$scope.selectedCommunityFollowers=$scope.selectedCommunityData.member_data,$scope.selectedCommunityFollowersData=[],angular.forEach($scope.selectedCommunityFollowers,function(item){item_community_followers={},item_community_followers.handle=item.handle,item_community_followers.role=item.role,item_community_followers.id=item.id,item.id==$scope.selectedCommunityData.member_id&&(item_community_followers.self=!0),item_community_followers.md5=md5.createHash(item_community_followers.handle),angular.forEach(item.extra,function(data){1==data.id&&(item_community_followers.name=data.value),5==data.id&&(item_community_followers.pic=data.value),
item_community_followers.pic=item_community_followers.pic?item_community_followers.pic:"https://www.gravatar.com/avatar/"+item_community_followers.md5+"?s=150?&d=identicon"}),$scope.selectedCommunityFollowersData.push({id:item_community_followers.id,role:item_community_followers.role,self:item_community_followers.self,name:item_community_followers.name,CommfollowerHandle:item_community_followers.handle,CommfollowerPic:item_community_followers.pic})}),0==$scope.selectedCommunityDataStatus&&$scope.selectedCommunityIsManager&&$timeout(function(){$scope.unverifiedCommunityModal()},3e3),$scope.communityLoader=!1},function(error){500==error.status?($scope.message=error.data.error,$state.go("index.home")):404==error.status||400==error.status?$state.go("index.home"):401==error.status&&$state.go("index.home")})},$scope.loadMoreCommunityFollowers=function(handle){$scope.showloaderFollowers=!0;var authToken=$cookies.get("Authorization"),headers={Authorization:authToken},getmorefollowers=$scope.baseUrl+"/users/gang/follow?gang_handle="+handle;$http.get(getmorefollowers,{headers:headers}).success(function(response){$scope.showloaderFollowers=!1,$scope.communityFollowersPageIndex++,$scope.communityFollowersLoadBusy=!1,$scope.showloaderGangActsBusy=!0,$scope.allMembersData=[],angular.forEach(response.data,function(item){item_community_followers={},item_community_followers.handle=item.follower_member_data.handle,item_community_followers.role=item.follower_member_data.role,item_community_followers.id=item.follower_member_data.id,item.follower_member_data.id===$scope.selectedCommunityCreatorId&&(item_community_followers.self=!0),item_community_followers.md5=md5.createHash(item_community_followers.handle),angular.forEach(item.follower_member_data.extra,function(data){1==data.id&&(item_community_followers.name=data.value),5==data.id&&(item_community_followers.pic=data.value),item_community_followers.pic=item_community_followers.pic?item_community_followers.pic:"https://www.gravatar.com/avatar/"+item_community_followers.md5+"?s=150?&d=identicon"}),$scope.allMembersData.push({id:item_community_followers.id,role:item_community_followers.role,self:item_community_followers.self,name:item_community_followers.name,CommfollowerHandle:item_community_followers.handle,CommfollowerPic:item_community_followers.pic}),$scope.communityFollowersScrollFinished=!1})}),$scope.getNextFollowers=function(){var authToken=$cookies.get("Authorization"),headers={Authorization:authToken},getnextfollowersurl=$scope.baseUrl+"/users/gang/follow?gang_handle="+handle;$scope.showloaderFollowers=!0,$scope.communityFollowersLoadBusy=!0;var params={page:$scope.communityFollowersPageIndex};$http.get(getnextfollowersurl,{headers:headers,params:params}).success(function(response){$scope.showloaderFollowers=!1,$scope.communityFollowersLoadBusy=!1,$scope.newFollowersData=response.data,$scope.allNextMembersData=[],angular.forEach(response.data,function(alpha){item_community_followers={},item_community_followers.handle=alpha.follower_member_data.handle,item_community_followers.role=alpha.follower_member_data.role,item_community_followers.id=alpha.follower_member_data.id,alpha.follower_member_data.id===$scope.selectedCommunityCreatorId&&(item_community_followers.self=!0),item_community_followers.md5=md5.createHash(item_community_followers.handle),angular.forEach(alpha.follower_member_data.extra,function(data){1==data.id&&(item_community_followers.name=data.value),5==data.id&&(item_community_followers.pic=data.value),item_community_followers.pic=item_community_followers.pic?item_community_followers.pic:"https://www.gravatar.com/avatar/"+item_community_followers.md5+"?s=150?&d=identicon"}),$scope.allNextMembersData.push({id:item_community_followers.id,role:item_community_followers.role,self:item_community_followers.self,name:item_community_followers.name,CommfollowerHandle:item_community_followers.handle,CommfollowerPic:item_community_followers.pic})}),null==response.data?$scope.communityFollowersScrollFinished=!0:($scope.communityFollowersPageIndex++,$scope.allMembersData=$scope.allMembersData.concat($scope.allNextMembersData))})}},$scope.communityUserSearch=function(querystring){$scope.commUserSearchMsg="",$scope.communityFollowersLoadBusy=!0,$scope.allMembersData=[],$scope.showloaderFollowers=!0;var authToken=$cookies.get("Authorization"),headers={Authorization:authToken},getnextfollowersurl=$scope.baseUrl+"/users/gang/follow",params={gang_handle:$stateParams.handle,search:querystring};querystring.length>1?$http.get(getnextfollowersurl,{headers:headers,params:params}).success(function(response){response.data?angular.forEach(response.data,function(item){item_community_followers={},item_community_followers.handle=item.follower_member_data.handle,item_community_followers.role=item.follower_member_data.role,item_community_followers.id=item.follower_member_data.id,item.follower_member_data.id===$scope.selectedCommunityCreatorId&&(item_community_followers.self=!0),item_community_followers.md5=md5.createHash(item_community_followers.handle),angular.forEach(item.follower_member_data.extra,function(data){1==data.id&&(item_community_followers.name=data.value),5==data.id&&(item_community_followers.pic=data.value),item_community_followers.pic=item_community_followers.pic?item_community_followers.pic:"https://www.gravatar.com/avatar/"+item_community_followers.md5+"?s=150?&d=identicon"}),$scope.allMembersData.push({id:item_community_followers.id,role:item_community_followers.role,self:item_community_followers.self,name:item_community_followers.name,CommfollowerHandle:item_community_followers.handle,CommfollowerPic:item_community_followers.pic}),$scope.showloaderFollowers=!1}):($scope.showloaderFollowers=!1,$scope.commUserSearchMsg="No Results Found")}):($scope.communityFollowersLoadBusy=!1,$scope.communityFollowersPageIndex=1,$scope.loadMoreCommunityFollowers($stateParams.handle))},$scope.communityAssignRightsModal=function(mem_id,gang_id,type,name){$scope.$modalInstance=$modal.open({templateUrl:"views/assign_rights.31ca1a0a.html",controller:function($scope,$modalInstance){$scope.tobeAdminMemberId=mem_id,$scope.particularGang=gang_id,$scope.actionToBeTaken=type,$scope.tobeAdminName=name,$scope.communityAssignRightsModalDeny=function(){$modalInstance.close()}},size:"md",windowClass:"animated bounceInDown",scope:$scope})},$scope.assignRights=function(mem_id,gang_id,type){var makeAdminUrl=$scope.baseUrl+"/users/gang/member_details/status",makeAdminData=JSON.stringify({gang_id:gang_id,member_id:mem_id,type:type}),authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(makeAdminUrl,makeAdminData,{headers:headers}).success(function(response){angular.forEach($scope.allMembersData,function(item,key){item.id==mem_id&&($scope.allMembersData[key].role=1==type?"manager":"member")}),snackbar.create(response.message,3e3)}).error(function(data){snackbar.create(data.errors,3e3)})},$scope.getDiscussion=function(idk,typ){var discussionsUrl=$scope.socketBaseUrl+"socketapi/discussion",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};if(void 0==idk)$scope.startDiscussion="Start discussion now.";else var params={type:typ,id:idk};$http.get(discussionsUrl,{headers:headers,params:params}).success(function(response){$scope.discussionTree=response.tree,$scope.discussionThreads=response.tree.nodes})},$scope.getGangSpecActivity=function(){var gang_handle=$stateParams.handle;if($scope.showloaderGangActs=!0,$scope.showloaderGangActsBusy=!0,$scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.loggedIn)var gangSpecUrl=$scope.baseUrl+"/users/gangs/activity?gang_handle="+gang_handle;else var gangSpecUrl=$scope.baseUrl+"/users/gangs/activity?gang_handle="+gang_handle+"&public=true";var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(gangSpecUrl,{headers:headers}).success(function(response){$scope.allGangActivities=[];var gang_items={};angular.forEach(response.data.activity_data,function(item){gang_items.handle=item.slug,gang_items.title=item.title,gang_items.is_host=item.is_host,gang_items.card=item.card,item.card&&-1!=$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.card))?gang_items.card=item.card:gang_items.card=makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:263,height:150,n:10,text:item.slug,r:Math.random()}),gang_items.total_applied=item.total_applied,gang_items.status=item.status,$scope.whereAmI(item.application_start_time,item.application_end_time),$scope.allGangActivities.push({handle:gang_items.handle,title:gang_items.title,banner:gang_items.banner,is_host:gang_items.is_host,card:gang_items.card,application_start_time:item.application_start_time,application_end_time:item.application_end_time,timeStatus:$scope.timeStatus,total_applied:gang_items.total_applied,status:gang_items.status})}),$scope.showloaderGangActs=!1,$scope.gangActPageIndex++,$scope.showloaderGangActsBusy=!1}),$scope.getNextGangspecActivities=function(){if($scope.showloaderGangActsBusy=!0,$scope.showloaderGangActs=!0,$scope.loggedIn)var params={page:$scope.gangActPageIndex},loadGangActsUrl=$scope.baseUrl+"/users/gangs/activity?gang_handle="+gang_handle;else var params={page:$scope.gangActPageIndex,public:!0},loadGangActsUrl=$scope.baseUrl+"/users/gangs/activity?gang_handle="+gang_handle;var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.get(loadGangActsUrl,{headers:headers,params:params}).success(function(data){$scope.showloaderGangActs=!1,$scope.showloaderGangActsBusy=!1,$scope.newGangActivites=[];var gang_items={};angular.forEach(data.data.activity_data,function(item){gang_items.handle=item.slug,gang_items.title=item.title,gang_items.is_host=item.is_host,gang_items.card=item.card,item.card&&$scope.isUrlValid(item.card)&&-1!=$scope.extensionCheck.image.indexOf($scope.getUrlFileType(item.card))?gang_items.card=item.card:gang_items.card=makeParamArrayURL("https://bannerzen.herokuapp.com/api",{width:263,height:150,n:10,text:item.slug,r:Math.random()}),gang_items.total_applied=item.total_applied,gang_items.status=item.status;var start_date_tz=moment.tz.guess();gang_items.application_start_time=moment(item.application_start_time).tz(start_date_tz).format("MMMM Do YYYY"),gang_items.application_end_time=moment(item.application_end_time).tz(start_date_tz).format("MMMM Do YYYY"),$scope.whereAmI(gang_items.application_start_time,gang_items.application_end_time),$scope.newGangActivites.push({handle:gang_items.handle,title:gang_items.title,is_host:gang_items.is_host,card:gang_items.card,banner:gang_items.banner,application_start_time:item.application_start_time,application_end_time:item.application_end_time,timeStatus:$scope.timeStatus,total_applied:gang_items.total_applied,status:gang_items.status})}),0===$scope.newGangActivites.length?$scope.gangActScrollFinished=!0:($scope.gangActPageIndex++,$scope.allGangActivities=$scope.allGangActivities.concat($scope.newGangActivites))})}},$scope.socialShare=function(flag,title){Socialshare.share({provider:flag,attrs:{socialshareText:title,socialshareUrl:location.href}})},$scope.updateCommunity=function(){$scope.showloader=!0;var updateCommunityData=JSON.stringify({handle:$scope.selectedCommunityDataHandle,name:$scope.selectedCommunityDataName,description:$scope.selectedCommunityDataDescription,logo:$scope.edit_logo_url,image:$scope.edit_metaImage_url,banner:$scope.edit_banner_url}),updateCommunityUrl=$scope.baseUrl+"/users/gangs?gang_id="+$scope.selectedCommunityDataId,authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.put(updateCommunityUrl,updateCommunityData,{headers:headers}).then(function(response){snackbar.create("Success",4e3),$timeout(function(){$scope.message=null},6e3),$state.go("index.communities",{handle:$scope.selectedCommunityDataHandle})})},$scope.followCommunity=function(commId,index){if($scope.loggedIn=$cookieStore.get("isLoggedInUser"),$scope.loggedIn){var followCommunityUrl=$scope.baseUrl+"/users/follow",followCommunityData=JSON.stringify({gang_id:commId}),authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(followCommunityUrl,followCommunityData,{headers:headers}).success(function(response){$scope.selectedCommunityIsFollowing=1,"number"==typeof index&&($scope.allCommunities[index].is_following=1),$scope.selectedCommunityIsFollowing=1,$scope.followedResponse=response.data,snackbar.create(response.data,3e3)}).error(function(data){snackbar.create(data.error,3e3)})}else $scope.signupModal("","",commId),$scope.specKeyword="to follow"},$scope.unfollowCommunity=function(commId,index){var unfollowCommunityUrl=$scope.baseUrl+"/users/unfollow",unfollowCommunityData=JSON.stringify({gang_id:commId}),authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(unfollowCommunityUrl,unfollowCommunityData,{headers:headers}).success(function(response){$scope.selectedCommunityIsFollowing=0,"number"==typeof index&&($scope.allCommunities[index].is_following=0),$scope.selectedCommunityIsFollowing=0,$scope.followedResponse=response.data,snackbar.create(response.data,3e3)}).error(function(data){snackbar.create(data.error,3e3)})},$scope.logout=function(){var logoutData=JSON.stringify({device_type:$scope.device_type,device_token:$scope.device_token}),logoutUrl=$scope.baseUrl+"/users/logout",authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$http.post(logoutUrl,logoutData,{headers:headers}).success(function(response){($state.is("user.update")||$state.is("user.secondary"))&&($cookies.remove("Authorization"),$cookies.remove("cHandle"),$cookies.remove("profilePicture"),$cookies.remove("isLoggedInUser"),$cookies.remove("userfirstname"),$cookies.remove("newUser"),$cookies.remove("selfId"),$scope.loggedIn=!1,$state.go("signup")),$cookies.remove("Authorization"),$cookies.remove("cHandle"),$cookies.remove("profilePicture"),$cookies.remove("userfirstname"),$cookies.remove("isLoggedInUser"),$cookies.remove("selfId"),$cookies.remove("newUser"),$scope.loggedIn=!1;try{$scope.socket.emit("forcedisconnect","I got Disconnected")}catch(e){}$state.go("signup")})},$scope.events=[{title:"All Day Event",start:new Date(y,m,1)},{title:"Long Event",start:new Date(y,m,d-5),end:new Date(y,m,d-2)},{id:999,title:"Repeating Event",start:new Date(y,m,d-3,16,0),allDay:!1},{id:999,title:"Repeating Event",start:new Date(y,m,d+4,16,0),allDay:!1},{title:"Birthday Party",start:new Date(y,m,d+1,19,0),end:new Date(y,m,d+1,22,30),allDay:!1},{title:"Click for Google",start:new Date(y,m,28),end:new Date(y,m,29),url:"http://google.com/"}],$scope.alertOnEventClick=function(event,allDay,jsEvent,view){$scope.alertMessage=event.title+": Clicked "},$scope.alertOnDrop=function(event,dayDelta,minuteDelta,allDay,revertFunc,jsEvent,ui,view){$scope.alertMessage=event.title+": Droped to make dayDelta "+dayDelta},$scope.alertOnResize=function(event,dayDelta,minuteDelta,revertFunc,jsEvent,ui,view){$scope.alertMessage=event.title+": Resized to make dayDelta "+minuteDelta},$scope.uiConfig={calendar:{height:450,editable:!0,header:{left:"prev,next",center:"title",right:"month,agendaWeek,agendaDay"},eventClick:$scope.alertOnEventClick,eventDrop:$scope.alertOnDrop,eventResize:$scope.alertOnResize}},$scope.addShortans=function(checkPointIndex){$scope.flag=!1,$scope.checkpoints[checkPointIndex].questions.push({}),$scope.checkpoints[checkPointIndex].questions[$scope.checkpoints[checkPointIndex].questions.length-1].options=[{}]},$scope.nestedModel=function(base,s,value){for(var pieces=s.split("."),newObj={},x=0;x<pieces.length-1;x++)newObj[pieces[x]]=value},$scope.makeSlug=function(modelName,s){if(!(s&&"string"==typeof s&&s.length>0))return s;var trim=s.replace(/[ ]+/g," ").trim().replace(/ /g,"_").toLowerCase();$scope[modelName]=trim},$scope.loadTemplate=function(com){getPlatformData.saveEditActivityData(""),0==com?$state.go("index.create_community"):$state.go("index.activities")},$scope.MarkdownOptions={height:200,focus:!0,airMode:!0},$scope.$watch(function(scope){return $(".sweet-alert").length},function(newValue,oldValue){newValue>oldValue&&0==$(".sweet-alert .fa-close").length&&$(".sweet-alert").append("<a href='javascript:void(0)' onclick='swal.close()'><i class='fa fa-close fa-2x' style='position:absolute; top: 10; right: 10'></i></a>")}),$scope.itemsInCart={},$scope.showSave=!1,$scope.addtoCart=function(index,adon){$scope.showSave=!0,$scope.itemsInCart[adon.setting_key]=adon},$scope.to_array=function(j){for(var n_keys=Object.keys(j).length,j_arr=[],x=0;x<n_keys;x++)j_arr.push(j[x]);return j_arr},$scope.to_json=function(a){for(var r={},x=0;x<a.length;x++)r[x]=a[x];return r},$scope.status={isopen:!1},$scope.toggled=function(open){$log.log("Dropdown is now: ",open)},$scope.toggleDropdown=function($event){$event.preventDefault(),$event.stopPropagation(),$scope.status.isopen=!$scope.status.isopen},$scope.sendZohoForm=function(user){var enterpriseData={xnQsjsdp:"aff1c6ae9a4b7275d02bdae81e3e0f7512b473a9775fc1518fc3092147ffa642",zc_gad:"",xmIwtLD:"47ba67b538d04cd06d39648ce430aad78e801dd8b1882b3fa12523085afb48c1",actionType:"Q3VzdG9tTW9kdWxlNA==",returnURL:"https://skillenza.com",NAME:user.fname+" "+user.lname,COBJ4CF1:user.email,COBJ4CF2:user.number,COBJ4CF3:user.company,COBJ4CF4:user.designation};$http({method:"POST",url:"https://crm.zoho.com/crm/WebForm",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(obj){var str=[];for(var p in obj)str.push(encodeURIComponent(p)+"="+encodeURIComponent(obj[p]));return str.join("&")},data:enterpriseData}).success(function(response){SweetAlert.swal({title:"Thanks!",text:"We will contact you shortly.",type:"success",timer:2e3,showConfirmButton:!1})}).error(function(data){SweetAlert.swal({title:"Thanks!",text:"We will contact you shortly.",type:"success",timer:2e3,showConfirmButton:!1})})},$scope.typeSwitch=function(type){return"checkboxes"==type?"multiple":"select"==type?"multiple":"radio"==type?"multiple":type}}function agileBoard($scope){$scope.todoList=[{content:"chekedin",date:"12.10.2015",statusClass:"warning",time:"9:00am",tagName:"Mark"},{content:"Objective",date:"05.04.2015",statusClass:"success",time:"10:00am",tagName:"Tag"},{content:"Datascience",date:"16.11.2015",statusClass:"info",time:"11:00am",tagName:"Mark"},{content:"Manual Evaluation",date:"18.11.2015",statusClass:"danger",time:"1:00pm",tagName:"Mark"}],$scope.sortableOptions={connectWith:".connectList"}}function chartistCtrl(){this.lineData={labels:["Monday","Tuesday","Wednesday","Thursday","Friday"],series:[[12,9,7,8,5],[2,1,3.5,7,3],[1,3,4,5,6]]},this.lineOptions={fullWidth:!0,chartPadding:{right:40}};var times=function(n){return Array.apply(null,new Array(n))},prepareData=times(26).map(Math.random).reduce(function(data,rnd,index){return data.labels.push(index+1),data.series.forEach(function(series){series.push(100*Math.random())}),data},{labels:[],series:times(4).map(function(){return new Array})});this.scatterData=prepareData,this.scatterOptions={showLine:!1,axisX:{labelInterpolationFnc:function(value,index){return index%13==0?"W"+value:null}}},this.stackedData={labels:["Q1","Q2","Q3","Q4"],series:[[8e5,12e5,14e5,13e5],[2e5,4e5,5e5,3e5],[1e5,2e5,4e5,6e5]]},this.stackedOptions={stackBars:!0,axisY:{labelInterpolationFnc:function(value){return value/1e3+"k"}}},this.horizontalData={labels:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],series:[[5,4,3,7,5,10,3],[3,2,9,5,4,6,4]]},this.horizontalOptions={seriesBarDistance:10,reverseData:!0,horizontalBars:!0,axisY:{offset:70}};var prepareData={series:[5,3,4]};this.pieData=prepareData;var sum=function(a,b){return a+b};this.pieOptions={labelInterpolationFnc:function(value){return Math.round(value/prepareData.series.reduce(sum)*100)+"%"}},this.gaugeData={series:[20,10,30,40]},this.gaugeOptions={donut:!0,donutWidth:60,startAngle:270,total:200,showLabel:!1}}function metricsCtrl(){this.demo1Data=[34,43,43,35,44,32,44,52],this.demo1Options={type:"line",width:"380px",height:"60",lineColor:"#1ab394",fillColor:"transparent"},this.demo2Data=[32,11,25,37,41,32,34,42],this.demo2Options={type:"line",width:"100%",height:"50",lineColor:"#1ab394",fillColor:"#ffffff"},this.demo3Data=[74,43,23,55,54,32,24,12],this.demo3Options={type:"line",width:"100%",height:"60",lineColor:"#ed5565",fillColor:"#ffffff"},this.demo4Data=[24,43,33,55,64,72,44,22],this.demo4Options={type:"line",width:"100%",height:"60",lineColor:"#ed5565",fillColor:"#ffffff"},this.demo5Data=[1,6],this.demo5Options={type:"pie",height:"110",sliceColors:["#1ab394","#b3b3b3"]},this.demo6Data=[5,3],this.demo6Options={type:"pie",height:"140",sliceColors:["#1ab394","#F5F5F5"]},this.demo7Data=[2,2],this.demo7Options={type:"pie",height:"140",sliceColors:["#ed5565","#F5F5F5"]},this.demo8Data=[2,3],this.demo8Options={type:"pie",height:"140",sliceColors:["#ed5565","#F5F5F5"]};var pieCustomData=[52,12,44],pieCustomOptions={type:"pie",height:"110",sliceColors:["#1ab394","#b3b3b3","#e4f0fb"]},pieCustom2Data=[52,44,19,8,2],pieCustom2Options={type:"pie",height:"110",sliceColors:["#1ab394","#b3b3b3","#e4f0fb","#e57373","#81C784"]},barCustomData=[5,6,7,2,0,4,2,4,5,7,2,4,12,14,4,2,14,12,7],barCustomOptions={type:"bar",barWidth:8,height:"150px",barColor:"#1ab394",negBarColor:"#c6c6c6"},data1=[[0,4],[1,8],[2,5],[3,10],[4,4],[5,16],[6,5],[7,11],[8,6],[9,11],[10,30],[11,10],[12,13],[13,4],[14,3],[15,3],[16,6]],data2=[[0,1],[1,0],[2,2],[3,0],[4,1],[5,3],[6,1],[7,5],[8,2],[9,3],[10,2],[11,1],[12,0],[13,2],[14,8],[15,0],[16,0]],options={series:{lines:{show:!1,fill:!0},splines:{show:!0,tension:.4,lineWidth:1,fill:.4},points:{radius:0,show:!0},shadowSize:2,grow:{stepMode:"linear",stepDirection:"up",steps:80}},grow:{stepMode:"linear",stepDirection:"up",steps:80},grid:{hoverable:!0,clickable:!0,tickColor:"#d5d5d5",borderWidth:1,color:"#d5d5d5"},colors:["#1ab394","#1C84C6"],xaxis:{},yaxis:{ticks:4},tooltip:!1};this.flotData=[data1,data2],this.flotOptions=options,this.pieCustomData=pieCustomData,this.pieCustomOptions=pieCustomOptions,this.pieCustom2Data=pieCustom2Data,this.pieCustom2Options=pieCustom2Options,this.barCustomData=barCustomData,this.barCustomOptions=barCustomOptions}function dashboard(){function gd(year,month,day){return new Date(year,month-1,day).getTime()}var pieData=[{label:"Sales 1",data:21,color:"#d3d3d3"},{label:"Sales 2",data:3,color:"#bababa"},{label:"Sales 3",data:15,color:"#79d2c0"},{label:"Sales 4",data:52,color:"#1ab394"}],data1=[[gd(2012,1,1),7],[gd(2012,1,2),6],[gd(2012,1,3),4],[gd(2012,1,4),8],[gd(2012,1,5),9],[gd(2012,1,6),7],[gd(2012,1,7),5],[gd(2012,1,8),4],[gd(2012,1,9),7],[gd(2012,1,10),8],[gd(2012,1,11),9],[gd(2012,1,12),6],[gd(2012,1,13),4],[gd(2012,1,14),5],[gd(2012,1,15),11],[gd(2012,1,16),8],[gd(2012,1,17),8],[gd(2012,1,18),11],[gd(2012,1,19),11],[gd(2012,1,20),6],[gd(2012,1,21),6],[gd(2012,1,22),8],[gd(2012,1,23),11],[gd(2012,1,24),13],[gd(2012,1,25),7],[gd(2012,1,26),9],[gd(2012,1,27),9],[gd(2012,1,28),8],[gd(2012,1,29),5],[gd(2012,1,30),8],[gd(2012,1,31),25]],data2=[[gd(2012,1,1),800],[gd(2012,1,2),500],[gd(2012,1,3),600],[gd(2012,1,4),700],[gd(2012,1,5),500],[gd(2012,1,6),456],[gd(2012,1,7),800],[gd(2012,1,8),589],[gd(2012,1,9),467],[gd(2012,1,10),876],[gd(2012,1,11),689],[gd(2012,1,12),700],[gd(2012,1,13),500],[gd(2012,1,14),600],[gd(2012,1,15),700],[gd(2012,1,16),786],[gd(2012,1,17),345],[gd(2012,1,18),888],[gd(2012,1,19),888],[gd(2012,1,20),888],[gd(2012,1,21),987],[gd(2012,1,22),444],[gd(2012,1,23),999],[gd(2012,1,24),567],[gd(2012,1,25),786],[gd(2012,1,26),666],[gd(2012,1,27),888],[gd(2012,1,28),900],[gd(2012,1,29),178],[gd(2012,1,30),555],[gd(2012,1,31),993]],dataset=[{label:"Number of orders",grow:{stepMode:"linear"},data:data2,color:"#1ab394",bars:{show:!0,align:"center",barWidth:5184e4,lineWidth:0}},{label:"Payments",grow:{stepMode:"linear"},data:data1,yaxis:2,color:"#1C84C6",lines:{lineWidth:1,show:!0,fill:!0,fillColor:{colors:[{opacity:.2},{opacity:.2}]}}}],options={grid:{hoverable:!0,clickable:!0,tickColor:"#d5d5d5",borderWidth:0,color:"#d5d5d5"},colors:["#1ab394","#464f88"],tooltip:!0,xaxis:{mode:"time",tickSize:[3,"day"],tickLength:0,axisLabel:"Date",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:10,color:"#d5d5d5"},yaxes:[{position:"left",max:1070,color:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:"Arial",axisLabelPadding:3},{position:"right",color:"#d5d5d5",axisLabelUseCanvas:!0,axisLabelFontSizePixels:12,axisLabelFontFamily:" Arial",axisLabelPadding:67}],legend:{noColumns:1,labelBoxBorderColor:"#d5d5d5",position:"nw"}};this.flotData=dataset,this.flotOptions=options,this.flotPieData=pieData}function ComplexController($scope,$element,title,close,$http,$cookies,$cookieStore,ENV){$scope.baseUrl=ENV.apiEndpoint,$scope.hostUrl=ENV.hostUrl,$scope.setFile=function(element,mymodel,myindex,filetype,checkPointIndex,questionIndex,flag){$scope.isInvalid=!0,$scope.showloader=!0,$scope.invalidFileType="";var authToken=$cookies.get("Authorization"),headers={Authorization:authToken};$scope.$apply(function($scope){if($scope.theFile=element.files[0],void 0!==$scope.theFile){var fileName=$scope.theFile.name,fileType=$scope.theFile.type;if(filetype){if(!$scope.validTypeMap[filetype]||-1==$scope.validTypeMap[filetype].indexOf(fileType)||$scope.theFile.size>1999e4)return $scope.invalidFileType=$scope.composeInvalidFileTypeError("Only files of type",$scope.validTypeMap[filetype]," and size under 19.99MB is supported. Got file of type "+fileType+" with size "+Math.floor($scope.theFile.size/1048576)+" MB."),void SweetAlert.swal("Ooh!",$scope.invalidFileType,"error");$scope.invalidFileType=""}var signReqUrl=$scope.baseUrl+"/sign_s3?file_name="+fileName+"&file_type="+fileType;$http.get(signReqUrl,{headers:headers}).then(function(response){$scope.fileResponse=response,$scope.fileUploadUrl=$scope.fileResponse.data.data.data.url,$scope.fileFields=$scope.fileResponse.data.data.data.fields;var postData=(response.data.data.data.url,response.data.data.data.fields.key,new FormData);for(key in $scope.fileFields)postData.append(key,$scope.fileFields[key]);var signReqUrl=$scope.baseUrl+"/sign_s3?file_name="+fileName+"&file_type="+fileType;$http.get(signReqUrl,{headers:headers}).then(function(response){$scope.fileResponse=response,$scope.fileUploadUrl=$scope.fileResponse.data.data.data.url,$scope.fileFields=$scope.fileResponse.data.data.data.fields;var cdn_url=response.data.data.cdn_url,full_url=response.data.data.data.url+response.data.data.data.fields.key,postData=new FormData;for(key in $scope.fileFields)postData.append(key,$scope.fileFields[key]);postData.append("file",$scope.theFile),$http.post($scope.fileUploadUrl,postData,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(response){$scope.isInvalid=!1,$scope.showloader=!1,"number"==typeof myindex?$scope[mymodel][myindex]=cdn_url||full_url:flag?$scope.checkpoints[checkPointIndex].questions[questionIndex][mymodel]=cdn_url||full_url:$scope[mymodel]=cdn_url||full_url})})})}else $scope.isInvalid=!1})},$scope.url="http://www.discoposse.com/wp-content/uploads/2014/08/test-all-the-things.jpg",$scope.title=title,$scope.close=function(){close({url:$scope.url},200)},$scope.cancel=function(){$scope.url=null,$element.modal("hide"),close({url:$scope.url},200)}}angular.module("skillenza").controller("MainCtrl",["$rootScope","$filter","$scope","$http","$location","$interval","$anchorScroll","$window","$cookies","$cookieStore","$modal","$state","$stateParams","Auth","$httpParamSerializerJQLike","$timeout","snackbar","vsityPlatformServices","mapInputTypeFieldId","getPlatformData","SweetAlert","md5","Socialshare","ENV","ngMeta",MainCtrl]).controller("agileBoard",["$scope",agileBoard]).controller("chartistCtrl",[chartistCtrl]).controller("dashboard",[dashboard]).controller("metricsCtrl",[metricsCtrl]).controller("ComplexController",["$scope","$element","title","close","$http","$cookies","$cookieStore","ENV",ComplexController]).filter("reverse",function(){return function(items){return items.slice().reverse()}}).filter("escape_notification",function(){return function(text){var match=/(!\[.+\])\((http.+\.[^ ]+) (\'.+\') \)/.exec(text);if(match){return text.slice(0,match.index)+match[1]+"("+encodeURI(match[2]).replace(/\(/g,"\\(").replace(/\)/g,"\\)")+" "+match[3]+" )"+text.slice(match.index+match[0].length)}return text}}).filter("suffix",function(){return function(i){var j=i%10,k=i%100;return 1==j&&11!=k?i+"st":2==j&&12!=k?i+"nd":3==j&&13!=k?i+"rd":i+"th"}}).filter("trustUrl",function($sce){return function(Url){return $sce.trustAsResourceUrl(Url)}});